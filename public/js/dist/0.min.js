(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[0],{

/***/ "./src/app/components/inputs/fields/identify/Component/updateContractIdentifyComponnent/Helpers.js":
/*!*********************************************************************************************************!*\
  !*** ./src/app/components/inputs/fields/identify/Component/updateContractIdentifyComponnent/Helpers.js ***!
  \*********************************************************************************************************/
/*! exports provided: selectDis, DataQuery, queryOption, querySetting, DataReqest */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectDis", function() { return selectDis; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataQuery", function() { return DataQuery; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryOption", function() { return queryOption; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "querySetting", function() { return querySetting; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataReqest", function() { return DataReqest; });
/* harmony import */ var esri_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! esri-loader */ "./node_modules/esri-loader/dist/umd/esri-loader.js");
/* harmony import */ var esri_loader__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(esri_loader__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _mapviewer_config_map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../mapviewer/config/map */ "./src/app/components/inputs/fields/identify/Component/mapviewer/config/map.js");


const options = {
  url: 'https://js.arcgis.com/3.13'
};
const selectDis = e => {
  var a = [];
  e.forEach(el => {
    el.features.forEach(element => {
      if (!a.find(t => t.attributes.PARCEL_SPATIAL_ID == element.attributes.PARCEL_SPATIAL_ID)) {
        a.push(element);
      }
    });
  });
  return a;
};
const DataQuery = (layerNum, QueryOptions, CallBack) => {
  Object(esri_loader__WEBPACK_IMPORTED_MODULE_0__["loadModules"])(["esri/symbols/SimpleLineSymbol", "esri/Color", "esri/layers/FeatureLayer", "esri/tasks/RelationshipQuery", "esri/tasks/QueryTask", "esri/tasks/query", "esri/request", "esri/geometry/Polygon", "esri/symbols/SimpleFillSymbol", "esri/graphic"], options).then(([SimpleLineSymbol, Color, FeatureLayer, RQuery, QueryTask, Query, request, Polygon, SimpleFillSymbol, Graphic]) => {
    var query = new Query();
    var qt = new QueryTask(_mapviewer_config_map__WEBPACK_IMPORTED_MODULE_1__["mapUrl"] + `/${layerNum}`);
    QueryOptions.forEach(e => {
      query[e.name] = e.value;
    });
    qt.execute(query, CallBack, res => {
      console.log(res);
    });
  });
};
const queryOption = (where, geo, outfields) => {
  return [{
    name: "where",
    value: where
  }, {
    name: "returnGeometry",
    value: geo
  }, {
    name: "outFields",
    value: outfields
  }];
};
const querySetting = (num, where, geo, outfields, url) => {
  return {
    url: (url || _mapviewer_config_map__WEBPACK_IMPORTED_MODULE_1__["mapUrl"]) + "/" + num,
    where,
    returnGeometry: geo,
    outFields: outfields
  };
};
const DataReqest = (url, callBack) => {
  Object(esri_loader__WEBPACK_IMPORTED_MODULE_0__["loadModules"])(["esri/request"], options).then(([request]) => {
    request({
      url: url,
      content: {
        f: "json"
      },
      handleAs: "json",
      callbackParamName: "callback"
    }).then(callBack);
  });
};

/***/ }),

/***/ "./src/app/components/inputs/fields/identify/Component/updateContractIdentifyComponnent/index.js":
/*!*******************************************************************************************************!*\
  !*** ./src/app/components/inputs/fields/identify/Component/updateContractIdentifyComponnent/index.js ***!
  \*******************************************************************************************************/
/*! exports provided: appMapDispatchToProps, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "appMapDispatchToProps", function() { return appMapDispatchToProps; });
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "./node_modules/@babel/runtime/helpers/extends.js");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var antd_lib_button_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd/lib/button/style */ "./node_modules/antd/lib/button/style/index.js");
/* harmony import */ var antd_lib_button_style__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd_lib_button_style__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var antd_lib_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! antd/lib/button */ "./node_modules/antd/lib/button/index.js");
/* harmony import */ var antd_lib_button__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(antd_lib_button__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var antd_lib_select_style__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd/lib/select/style */ "./node_modules/antd/lib/select/style/index.js");
/* harmony import */ var antd_lib_select_style__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(antd_lib_select_style__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd_lib_select__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd/lib/select */ "./node_modules/antd/lib/select/index.js");
/* harmony import */ var antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd_lib_select__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _common_esri_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/esri_request */ "./src/app/components/inputs/fields/identify/Component/common/esri_request.js");
/* harmony import */ var _common_common_func__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/common_func */ "./src/app/components/inputs/fields/identify/Component/common/common_func.js");
/* harmony import */ var react_sticky__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-sticky */ "./node_modules/react-sticky/lib/index.js");
/* harmony import */ var react_sticky__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_sticky__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _mapviewer_config_map__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../mapviewer/config/map */ "./src/app/components/inputs/fields/identify/Component/mapviewer/config/map.js");
/* harmony import */ var antd_dist_antd_css__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! antd/dist/antd.css */ "./node_modules/antd/dist/antd.css");
/* harmony import */ var antd_dist_antd_css__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(antd_dist_antd_css__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _MapComponent_MapComponent__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../MapComponent/MapComponent */ "./src/app/components/inputs/fields/identify/Component/MapComponent/MapComponent.js");
/* harmony import */ var _MapBtnsComponent__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../MapBtnsComponent */ "./src/app/components/inputs/fields/identify/Component/MapBtnsComponent/index.js");
/* harmony import */ var _mapping__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../mapping */ "./src/app/components/inputs/fields/identify/Component/mapping.js");
/* harmony import */ var _main_helpers_actions_main__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../../main_helpers/actions/main */ "./src/main_helpers/actions/main/index.js");
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-redux */ "./node_modules/react-redux/es/index.js");
/* harmony import */ var _Helpers__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./Helpers */ "./src/app/components/inputs/fields/identify/Component/updateContractIdentifyComponnent/Helpers.js");
/* harmony import */ var _common_esri_loader__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../common/esri_loader */ "./src/app/components/inputs/fields/identify/Component/common/esri_loader.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_19__);


















var uniqid = __webpack_require__(/*! uniqid */ "./node_modules/uniqid/index.js");


const {
  Option
} = antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a;
const appMapDispatchToProps = dispatch => {
  return {
    ...Object(_mapping__WEBPACK_IMPORTED_MODULE_14__["mapDispatchToProps"])(dispatch, "lands"),
    ...Object(_main_helpers_actions_main__WEBPACK_IMPORTED_MODULE_15__["default"])(dispatch)
  };
};
class updateContractIdentifyComponnent extends react__WEBPACK_IMPORTED_MODULE_6__["Component"] {
  constructor(props) {
    var _props$input, _props$input$value, _props$input$value$te, _props$input2, _props$input2$value, _props$input2$value$t, _this$props$mainObjec4, _this$props$mainObjec5, _this$props$mainObjec6, _props$input3, _props$input3$value, _props$input3$value$t;
    super(props);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "LayerID", []);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "onMunChange", (e, callback) => {
      //
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["clearGraphicFromLayer"])(this.map, "SelectLandsGraphicLayer");
      this.planId = null;
      if ((!callback || callback && typeof callback == "object") && !this.loadLists) {
        this.setState({
          munval: e,
          planeval: undefined,
          subTypeval: undefined,
          subNameval: undefined,
          blockval: undefined,
          parcelval: undefined,
          selectedLands: [],
          selectedLandsT: [],
          PlanNum: [],
          blockNum: [],
          subDivNames: [],
          //subDivType: [],
          parcelId: null,
          parcelNum: []
          //parcelData: {},
        });
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
          ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) == -1 && this.LayerID.Municipality_Boundary || this.LayerID.District_Boundary, `MUNICIPALITY_NAME='${e}'` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), true, [2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) == -1 && ["MUNICIPALITY_NAME"] || ["MUNICIPALITY_NAME", "SUB_MUNICIPALITY_NAME"]),
          callbackResult: res => {
            this.pol = res.features[0];
            Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["highlightFeature"])(res.features[0], this.map, {
              layerName: "SelectGraphicLayer",
              isZoom: true,
              isHiglightSymbol: true,
              highlighColor: [0, 0, 0, 0.25]
            });
          }
        });
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
          ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Plan_Data, `MUNICIPALITY_NAME='${e}'` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), false, ["PLAN_SPATIAL_ID", "PLAN_NO", "SUB_MUNICIPALITY_NAME"]),
          callbackResult: res => {
            this.setState({
              PlanNum: res.features.map((e, i) => {
                return {
                  ...e,
                  i: uniqid()
                };
              })
            });
          }
        });
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
          ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Landbase_Parcel, `MUNICIPALITY_NAME='${e}'` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), false, ["PARCEL_SPATIAL_ID", "PARCEL_PLAN_NO", "SUB_MUNICIPALITY_NAME"]),
          callbackResult: res => {
            this.setState({
              parcelSearch: null,
              parcelNum: res.features.map((e, i) => {
                return {
                  ...e,
                  i
                };
              })
            });
          }
        });
        this.resetGraphics();
      } else {
        if (e) {
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
            ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) == -1 && this.LayerID.Municipality_Boundary || this.LayerID.District_Boundary, `MUNICIPALITY_NAME='${e}'` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), true, [2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) == -1 && ["MUNICIPALITY_NAME"] || ["MUNICIPALITY_NAME", "SUB_MUNICIPALITY_NAME"]),
            callbackResult: res => {
              this.pol = res.features[0];
              Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
                ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Plan_Data, `MUNICIPALITY_NAME='${e}'` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), false, ["PLAN_SPATIAL_ID", "PLAN_NO", "SUB_MUNICIPALITY_NAME"]),
                callbackResult: res => {
                  this.setState({
                    PlanNum: res.features.map((e, i) => {
                      return {
                        ...e,
                        i: uniqid()
                      };
                    })
                  }, callback);
                }
              });
            }
          });
        } else if (callback && typeof callback == "function") {
          callback();
        }
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "resetFields", () => {
      this.props.onChange([]);
      this.setState({
        selectedLands: [],
        selectedLandsT: []
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "onPlaneChange", (f, callback) => {
      var _this$state$PlanNum$f, _this$state$PlanNum$f2, _this$state$PlanNum$f3;
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["clearGraphicFromLayer"])(this.map, "SelectLandsGraphicLayer");
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["clearGraphicFromLayer"])(this.map, "SelectGraphicLayer");
      var planSpatialId = (_this$state$PlanNum$f = this.state.PlanNum.filter(m => m.i == f || m.attributes.PLAN_NO == f)) === null || _this$state$PlanNum$f === void 0 ? void 0 : (_this$state$PlanNum$f2 = _this$state$PlanNum$f[0]) === null || _this$state$PlanNum$f2 === void 0 ? void 0 : (_this$state$PlanNum$f3 = _this$state$PlanNum$f2.attributes) === null || _this$state$PlanNum$f3 === void 0 ? void 0 : _this$state$PlanNum$f3.PLAN_SPATIAL_ID;
      this.planId = planSpatialId;
      if ((!callback || callback && typeof callback == "object") && !this.loadLists) {
        var _this$state$PlanNum$f4, _this$state$PlanNum$f5, _this$state$PlanNum$f6;
        this.setState({
          plan_no: (_this$state$PlanNum$f4 = this.state.PlanNum.filter(m => m.i == f || m.attributes.PLAN_NO == f)) === null || _this$state$PlanNum$f4 === void 0 ? void 0 : (_this$state$PlanNum$f5 = _this$state$PlanNum$f4[0]) === null || _this$state$PlanNum$f5 === void 0 ? void 0 : (_this$state$PlanNum$f6 = _this$state$PlanNum$f5.attributes) === null || _this$state$PlanNum$f6 === void 0 ? void 0 : _this$state$PlanNum$f6.PLAN_NO,
          planeval: f,
          subTypeval: undefined,
          subNameval: undefined,
          blockval: undefined,
          parcelval: undefined,
          blockNum: [],
          subDivNames: [],
          //subDivType: [],
          parcelId: null,
          parcelNum: []
          //parcelData: {},
        });
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
          ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Plan_Data, `PLAN_SPATIAL_ID='${planSpatialId}'` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), true,
          //["MUNICIPALITY_NAME"]
          [this.state.munval != 10501 && "MUNICIPALITY_NAME" || "SUB_MUNICIPALITY_NAME"]),
          callbackResult: res => {
            this.pol = res.features[0];
            Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["highlightFeature"])(res.features[0], this.map, {
              layerName: "SelectGraphicLayer",
              isZoom: true,
              isHiglightSymbol: true,
              highlighColor: [0, 0, 0, 0.25]
            });
            this.planId = planSpatialId;
          }
        });
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
          ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Survey_Block, `PLAN_SPATIAL_ID='${planSpatialId}'` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), false, ["BLOCK_NO", "BLOCK_SPATIAL_ID", "SUB_MUNICIPALITY_NAME"]),
          callbackResult: res => {
            this.setState({
              blockNum: res.features
            });
          }
        });
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
          ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Landbase_Parcel, `PLAN_SPATIAL_ID='${planSpatialId}'` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), false, ["PARCEL_SPATIAL_ID", "PARCEL_PLAN_NO", "SUB_MUNICIPALITY_NAME"]),
          callbackResult: res => {
            this.setState({
              parcelSearch: null,
              parcelNum: res.features.map((e, i) => {
                return {
                  ...e,
                  i
                };
              })
            });
          }
        });
        this.resetGraphics();
      } else {
        if (f) {
          var _this$state$PlanNum$f7;
          this.pol = (_this$state$PlanNum$f7 = this.state.PlanNum.filter(m => m.i == f || m.attributes.PLAN_NO == f)) === null || _this$state$PlanNum$f7 === void 0 ? void 0 : _this$state$PlanNum$f7[0];
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
            ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Survey_Block, `PLAN_SPATIAL_ID='${planSpatialId}'` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), false, ["BLOCK_NO", "BLOCK_SPATIAL_ID", "SUB_MUNICIPALITY_NAME"]),
            callbackResult: res => {
              this.setState({
                blockNum: res.features
              }, callback);
            }
          });
        } else if (callback && typeof callback == "function") {
          callback();
        }
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "resetGraphics", () => {
      this.state["selectedLands"] = [];
      this.state["selectedLandsT"] = [];
      this.DrawGraph();
    });
    // onSubTypeChange = (e) => {
    //   clearGraphicFromLayer(this.map, "SelectLandsGraphicLayer");
    //   this.setState({
    //     subType_name: this.state.subDivType.filter((m) => m.code == e)[0].name,
    //     subTypeval: e,
    //     subNameval: undefined,
    //     blockval: undefined,
    //     parcelval: undefined,
    //   });
    //   queryTask({
    //     ...querySetting(
    //       this.LayerID.Subdivision,
    //       `SUBDIVISION_TYPE=${e} AND PLAN_SPATIAL_ID=${this.planId}`,
    //       false,
    //       ["SUBDIVISION_DESCRIPTION", "SUBDIVISION_SPATIAL_ID"]
    //     ),
    //     callbackResult: (res) => {
    //       this.setState({ subDivNames: res.features });
    //     },
    //   });
    // };
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "onSubTypeChange", (e, callback) => {
      //this.onPlaneChange(this.state.planeval);

      if ((!callback || callback && typeof callback == "object") && !this.loadLists) {
        this.setState({
          subType_name: this.state.subDivType.filter(m => m.code == e)[0].name,
          subTypeval: e
        });
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
          ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Subdivision, `SUBDIVISION_TYPE=${e} AND PLAN_SPATIAL_ID=${this.planId}` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), false, ["SUBDIVISION_DESCRIPTION", "SUBDIVISION_SPATIAL_ID", "SUB_MUNICIPALITY_NAME"]),
          callbackResult: res => {
            this.setState({
              subDivNames: res.features
            });
          }
        });
      } else {
        if (e) {
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
            ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Subdivision, `SUBDIVISION_TYPE=${e} AND PLAN_SPATIAL_ID=${this.planId}` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), false, ["SUBDIVISION_DESCRIPTION", "SUBDIVISION_SPATIAL_ID", "SUB_MUNICIPALITY_NAME"]),
            callbackResult: res => {
              this.setState({
                subDivNames: res.features
              }, callback);
            }
          });
        } else if (callback && typeof callback == "function") {
          callback();
        }
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "onSubNameChange", (e, callback) => {
      var _this$state$subDivNam;
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["clearGraphicFromLayer"])(this.map, "SelectLandsGraphicLayer");
      var selectedSubDivName = (_this$state$subDivNam = this.state.subDivNames.filter(m => m.attributes.SUBDIVISION_SPATIAL_ID == e || m.attributes.SUBDIVISION_DESCRIPTION == e)) === null || _this$state$subDivNam === void 0 ? void 0 : _this$state$subDivNam[0];
      if ((!callback || callback && typeof callback == "object") && !this.loadLists) {
        var _selectedSubDivName$a;
        this.setState({
          subName_name: selectedSubDivName === null || selectedSubDivName === void 0 ? void 0 : (_selectedSubDivName$a = selectedSubDivName.attributes) === null || _selectedSubDivName$a === void 0 ? void 0 : _selectedSubDivName$a.SUBDIVISION_DESCRIPTION,
          subNameval: e,
          blockval: undefined,
          parcelval: undefined,
          parcelNum: [],
          parcelId: null
        });
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
          ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Subdivision, `SUBDIVISION_SPATIAL_ID=${e}` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), true, ["SUBDIVISION_SPATIAL_ID", "SUB_MUNICIPALITY_NAME"]),
          callbackResult: res => {
            this.pol = res.features[0];
            Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["highlightFeature"])(res.features[0], this.map, {
              layerName: "SelectGraphicLayer",
              isZoom: true,
              isHiglightSymbol: true,
              highlighColor: [0, 0, 0, 0.25]
            });
          }
        });
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
          ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Landbase_Parcel, `SUBDIVISION_SPATIAL_ID=${e}` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), false, ["PARCEL_SPATIAL_ID", "PARCEL_PLAN_NO", "SUB_MUNICIPALITY_NAME"]),
          callbackResult: res => {
            this.setState({
              parcelSearch: null,
              parcelNum: res.features.map((e, i) => {
                return {
                  ...e,
                  i
                };
              })
            });
          }
        });
        this.resetGraphics();
      } else {
        this.pol = selectedSubDivName;
        if (callback && typeof callback == "function") {
          callback();
        }
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "onBlockChange", (e, callback) => {
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["clearGraphicFromLayer"])(this.map, "SelectLandsGraphicLayer");
      if ((!callback || callback && typeof callback == "object") && !this.loadLists) {
        var _this$state$blockNum$, _this$state$blockNum$2, _this$state$blockNum$3;
        this.setState({
          block_no: (_this$state$blockNum$ = this.state.blockNum.filter(m => m.attributes.BLOCK_SPATIAL_ID == e)) === null || _this$state$blockNum$ === void 0 ? void 0 : (_this$state$blockNum$2 = _this$state$blockNum$[0]) === null || _this$state$blockNum$2 === void 0 ? void 0 : (_this$state$blockNum$3 = _this$state$blockNum$2.attributes) === null || _this$state$blockNum$3 === void 0 ? void 0 : _this$state$blockNum$3.BLOCK_NO,
          blockval: e,
          parcelval: undefined,
          parcelId: null,
          parcelNum: []
        });
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
          ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Survey_Block, `BLOCK_SPATIAL_ID=${e}` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), true, ["BLOCK_SPATIAL_ID", "SUB_MUNICIPALITY_NAME"]),
          callbackResult: res => {
            this.pol = res.features[0];
            Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["highlightFeature"])(res.features[0], this.map, {
              layerName: "SelectGraphicLayer",
              isZoom: true,
              isHiglightSymbol: true,
              highlighColor: [0, 0, 0, 0.25]
            });
          }
        });
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
          ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Landbase_Parcel, `BLOCK_SPATIAL_ID=${e}` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), false, ["PARCEL_SPATIAL_ID", "PARCEL_PLAN_NO", "SUB_MUNICIPALITY_NAME"]),
          callbackResult: res => {
            this.setState({
              parcelSearch: null,
              parcelNum: res.features.map((e, i) => {
                return {
                  ...e,
                  i
                };
              })
            });
          }
        });
        this.resetGraphics();
      } else {
        var _this$state$blockNum$4;
        this.pol = (_this$state$blockNum$4 = this.state.blockNum.filter(m => m.attributes.BLOCK_SPATIAL_ID == e)) === null || _this$state$blockNum$4 === void 0 ? void 0 : _this$state$blockNum$4[0];
        if (callback && typeof callback == "function") {
          callback();
        }
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "onLandParcelChange", (f, callback) => {
      var _this$state$selectedL;
      this.RolBackPol = this.pol;
      this.RolBackParcelNum = this.state.parcelNum;
      if (!((_this$state$selectedL = this.state.selectedLands) !== null && _this$state$selectedL !== void 0 && _this$state$selectedL.length)) {
        var _this$state$parcelNum, _this$state$parcelNum2, _this$state$parcelNum3;
        var e = (_this$state$parcelNum = this.state.parcelNum.filter(m => m.i === f)) === null || _this$state$parcelNum === void 0 ? void 0 : (_this$state$parcelNum2 = _this$state$parcelNum[0]) === null || _this$state$parcelNum2 === void 0 ? void 0 : (_this$state$parcelNum3 = _this$state$parcelNum2.attributes) === null || _this$state$parcelNum3 === void 0 ? void 0 : _this$state$parcelNum3.PARCEL_SPATIAL_ID;
        if ((!callback || callback && typeof callback == "object") && !this.loadLists) {
          this.setState({
            parcelId: e,
            parcelval: f
          });
        }
        if (f) {
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
            ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Landbase_Parcel, `PARCEL_SPATIAL_ID='${e}'` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), true, ["PARCEL_SPATIAL_ID", "SUB_MUNICIPALITY_NAME"]),
            callbackResult: res => {
              this.selectedLandsT = [];
              Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["highlightFeature"])(res.features[0], this.map, {
                layerName: "SelectGraphicLayer",
                strokeColor: [0, 0, 0],
                highlightWidth: 3,
                isHighlighPolygonBorder: true,
                isZoom: true,
                zoomFactor: 25
              });
            }
          });
        }
      } else {
        var _this$state$parcelNum4, _g$attributes;
        var prevParcelId = this.state.parcelId;
        var g = (_this$state$parcelNum4 = this.state.parcelNum.filter(m => m.i == f)) === null || _this$state$parcelNum4 === void 0 ? void 0 : _this$state$parcelNum4[0];
        this.state["parcelId"] = g === null || g === void 0 ? void 0 : (_g$attributes = g.attributes) === null || _g$attributes === void 0 ? void 0 : _g$attributes.PARCEL_SPATIAL_ID;
        this.LandHoverOff(this.map.getLayer("SelectGraphicLayer").graphics.find(prevGraphic => prevGraphic.attributes.PARCEL_SPATIAL_ID == prevParcelId));
        this.setState({
          parcelval: f
        });
      }
      if (callback && typeof callback == "function") {
        callback();
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "addParcelToSelect", feature => {
      return new Promise((resolve, reject) => {
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["intersectQueryTask"])({
          outFields: ["OBJECTID", "MUNICIPALITY_NAME", "PARCEL_AREA", "PARCEL_LAT_COORD", "PARCEL_LONG_COORD", "PARCEL_MAIN_LUSE", "PLAN_NO", "PARCEL_PLAN_NO", "USING_SYMBOL", "PARCEL_SPATIAL_ID", "SUB_MUNICIPALITY_NAME"],
          geometry: feature.geometry,
          url: _mapviewer_config_map__WEBPACK_IMPORTED_MODULE_10__["mapUrl"] + "/" + this.LayerID.Landbase_Parcel,
          where: "PARCEL_PLAN_NO is not null" + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""),
          callbackResult: res => {
            Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["getFeatureDomainName"])(res.features, this.LayerID.Landbase_Parcel).then(r => {
              res.features = res.features.map((e, i) => {
                return {
                  ...e,
                  i: uniqid()
                };
              });
              return resolve(res);
            });
          }
        });
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "DrawGraph", () => {
      var _this$state$selectedL2;
      if (!((_this$state$selectedL2 = this.state.selectedLands) !== null && _this$state$selectedL2 !== void 0 && _this$state$selectedL2.length)) {
        this.map.graphics.clear();
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["clearGraphicFromLayer"])(this.map, "SelectLandsGraphicLayer");
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["clearGraphicFromLayer"])(this.map, "editlengthGraphicLayer");
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["clearGraphicFromLayer"])(this.map, "PacrelNoGraphicLayer");
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["clearGraphicFromLayer"])(this.map, "SelectGraphicLayer");
        this.setToStore(null);
      } else {
        this.parcelDis = Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["selectDis"])(this.selectedLandsT);
        console.log(this.parcelDis);
        this.setAdjacentToStore(this.parcelDis);
        this.setState({
          parcelNum: this.parcelDis
        });
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["clearGraphicFromLayer"])(this.map, "SelectLandsGraphicLayer");
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["clearGraphicFromLayer"])(this.map, "SelectGraphicLayer");
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["clearGraphicFromLayer"])(this.map, "PacrelNoGraphicLayer");
        this.parcelDis.filter(element => {
          var _this$state$selectedL3;
          return !((_this$state$selectedL3 = this.state.selectedLands) !== null && _this$state$selectedL3 !== void 0 && _this$state$selectedL3.find(i => i.id === element.attributes.PARCEL_SPATIAL_ID));
        }).forEach(f => {
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["addParcelNo"])(f.geometry.getExtent().getCenter(), this.map, f.attributes.PARCEL_PLAN_NO + "", "PacrelNoGraphicLayer", 20, [0, 0, 0]);
        });
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["highlightFeature"])(this.parcelDis.filter(element => {
          var _this$state$selectedL4;
          return (_this$state$selectedL4 = this.state.selectedLands) === null || _this$state$selectedL4 === void 0 ? void 0 : _this$state$selectedL4.find(i => i.id === element.attributes.PARCEL_SPATIAL_ID);
        }), this.map, {
          layerName: "SelectGraphicLayer",
          noclear: true,
          attr: {
            isParcel: true
          },
          isZoom: true,
          isHighlighPolygonBorder: true,
          zoomFactor: 25
        });
        this.parcelDis.filter(element => {
          var _this$state$selectedL5;
          return (_this$state$selectedL5 = this.state.selectedLands) === null || _this$state$selectedL5 === void 0 ? void 0 : _this$state$selectedL5.find(i => i.id === element.attributes.PARCEL_SPATIAL_ID);
        }).forEach(f => {
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["addParcelNo"])(f.geometry.getExtent().getCenter(), this.map, f.attributes.PARCEL_PLAN_NO + "", "PacrelNoGraphicLayer", 20, [0, 0, 0]);
        });
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "mapLoaded", map => {
      this.map = map;
      this.props.setMap(map);
      if (this.props.input && this.props.input.value && this.props.input.value.parcels) {
        var _this$props$mainObjec, _this$props$mainObjec2, _this$props$mainObjec3, _this$props$input$val14, _this$props$input$val15;
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["highlightFeature"])(this.props.input.value.parcels, this.map, {
          layerName: "SelectGraphicLayer",
          noclear: true,
          isZoom: true,
          attr: {
            isParcel: true
          },
          isHighlighPolygonBorder: true,
          zoomFactor: 25
        });
        setTimeout(() => {
          var _this$props$input$val, _this$props$input$val2, _this$props$input$val3, _this$props$input, _this$props$input$val12, _this$props$input$val13;
          this.props.input.value.parcels.forEach(f => {
            f.geometry = new esri.geometry.Polygon(f.geometry);
            Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["addParcelNo"])(f.geometry.getExtent().getCenter(), this.map, f.attributes.PARCEL_PLAN_NO + "", "PacrelNoGraphicLayer", 20, [0, 0, 0]);
          });

          //drawLength(this.map, this.props.input.value.parcels);
          if ((_this$props$input$val = this.props.input.value) !== null && _this$props$input$val !== void 0 && (_this$props$input$val2 = _this$props$input$val.temp) !== null && _this$props$input$val2 !== void 0 && (_this$props$input$val3 = _this$props$input$val2.parcelDis) !== null && _this$props$input$val3 !== void 0 && _this$props$input$val3.length) {
            var _this$props$input$val4, _this$props$input$val5, _this$props$input$val6, _this$props$input$val7, _this$props$input$val8, _this$props$input$val9, _this$props$input$val10, _this$props$input$val11;
            // highlightFeature(
            //   this.props.input.value?.temp?.parcelDis.filter(
            //     (element) =>
            //       !this.props.input.value.parcels.find(
            //         (i) =>
            //           i.attributes.PARCEL_SPATIAL_ID ===
            //           element.attributes.PARCEL_SPATIAL_ID
            //       )
            //   ),
            //   this.map,
            //   {
            //     layerName: "SelectLandsGraphicLayer",
            //     noclear: false,
            //     isZoom: false,
            //     isHiglightSymbol: true,
            //     highlighColor: [0, 255, 0, 0.5],
            //     zoomFactor: 25,
            //   }
            // );

            (_this$props$input$val4 = this.props.input.value) === null || _this$props$input$val4 === void 0 ? void 0 : (_this$props$input$val5 = _this$props$input$val4.temp) === null || _this$props$input$val5 === void 0 ? void 0 : (_this$props$input$val6 = _this$props$input$val5.parcelDis) === null || _this$props$input$val6 === void 0 ? void 0 : (_this$props$input$val7 = _this$props$input$val6.filter(element => !this.props.input.value.parcels.find(i => i.attributes.PARCEL_SPATIAL_ID === element.attributes.PARCEL_SPATIAL_ID))) === null || _this$props$input$val7 === void 0 ? void 0 : _this$props$input$val7.forEach(f => {
              if (!f.geometry.getExtent) {
                f.geometry = new esri.geometry.Polygon(f.geometry);
              }
              Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["addParcelNo"])(f.geometry.getExtent().getCenter(), this.map, f.attributes.PARCEL_PLAN_NO + "", "PacrelNoGraphicLayer", 20, [0, 0, 0]);
            });
            console.log((_this$props$input$val8 = this.props.input.value) === null || _this$props$input$val8 === void 0 ? void 0 : (_this$props$input$val9 = _this$props$input$val8.temp) === null || _this$props$input$val9 === void 0 ? void 0 : _this$props$input$val9.parcelDis);
            this.setState({
              parcelSearch: null,
              parcelNum: (_this$props$input$val10 = this.props.input.value) === null || _this$props$input$val10 === void 0 ? void 0 : (_this$props$input$val11 = _this$props$input$val10.temp) === null || _this$props$input$val11 === void 0 ? void 0 : _this$props$input$val11.parcelDis
            });
          } else if ((_this$props$input = this.props.input) !== null && _this$props$input !== void 0 && (_this$props$input$val12 = _this$props$input.value) !== null && _this$props$input$val12 !== void 0 && (_this$props$input$val13 = _this$props$input$val12.parcels) !== null && _this$props$input$val13 !== void 0 && _this$props$input$val13.length) {
            var _this$props$input2, _this$props$input2$va;
            Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["checkParcelAdjacents"])((_this$props$input2 = this.props.input) === null || _this$props$input2 === void 0 ? void 0 : (_this$props$input2$va = _this$props$input2.value) === null || _this$props$input2$va === void 0 ? void 0 : _this$props$input2$va.parcels);
          }
        }, 500);
        const {
          input: {
            value
          }
        } = this.props;
        this.state.landsData = {
          ...value,
          conditions: this.state.conditions,
          temp: {
            mun: this.props.input.value.temp.mun,
            plan: ((_this$props$mainObjec = this.props.mainObject) === null || _this$props$mainObjec === void 0 ? void 0 : (_this$props$mainObjec2 = _this$props$mainObjec.landData) === null || _this$props$mainObjec2 === void 0 ? void 0 : (_this$props$mainObjec3 = _this$props$mainObjec2.landData) === null || _this$props$mainObjec3 === void 0 ? void 0 : _this$props$mainObjec3.PLAN_NO) || this.props.input.value.temp.plan,
            subTypeval: this.props.input.value.temp.subTypeval,
            subNameval: this.props.input.value.temp.subNameval,
            parcelDis: (_this$props$input$val14 = this.props.input.value) === null || _this$props$input$val14 === void 0 ? void 0 : (_this$props$input$val15 = _this$props$input$val14.temp) === null || _this$props$input$val15 === void 0 ? void 0 : _this$props$input$val15.parcelDis,
            blockval: this.props.input.value.temp.blockval,
            parcelval: this.props.input.value.temp.parcelval,
            subname: this.props.input.value.temp.subname,
            block_no: this.props.input.value.temp.block_no
          },
          parcels: [...this.props.input.value.parcels],
          domainLists: {
            ...this.state.domainLists
          }
        };
        this.props.input.onChange({
          ...this.state.landsData
        });
      }
      this.setState({
        mapLoaded: true
      });
      this.props.setCurrentMap(map);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "setValue", (item, event) => {
      item.value = event.target.value;
      this.setToStore();
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "OnParcelSelect", () => {
      var _this$state$selectedL6;
      this.setState({
        parcelval: undefined
      });
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["clearGraphicFromLayer"])(this.map, "SelectGraphicLayer");
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["clearGraphicFromLayer"])(this.map, "SelectLandsGraphicLayer");
      if (!((_this$state$selectedL6 = this.state.selectedLands) !== null && _this$state$selectedL6 !== void 0 && _this$state$selectedL6.filter(e => e.id === this.state.parcelId).length)) {
        // ["PARCEL_AREA", "PARCEL_MAIN_LUSE", "PARCEL_LAT_COORD", "PARCEL_LONG_COORD", "PLAN_NO", "PARCEL_PLAN_NO", "USING_SYMBOL", "PARCEL_BLOCK_NO", "DISTRICT_NAME", "SUBDIVISION_DESCRIPTION", "SUBDIVISION_TYPE", "PARCEL_SPATIAL_ID", "MUNICIPALITY_NAME"]
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
          ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Landbase_Parcel, `PARCEL_SPATIAL_ID =${this.state.parcelId}` + ([2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && ` AND SUB_MUNICIPALITY_NAME = '${this.props.currentModule.record.workflow_id == 2261 && 1050103 || this.props.currentModule.record.workflow_id == 2262 && 1050101 || this.props.currentModule.record.workflow_id == 2263 && 1050102}'` || ""), true, ["*"]),
          callbackResult: res => {
            var _this$state$selectedL7;
            if (this.state.selectedLands && ((_this$state$selectedL7 = this.state.selectedLands) === null || _this$state$selectedL7 === void 0 ? void 0 : _this$state$selectedL7.length) == 0) {
              Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["queryTask"])({
                ...Object(_Helpers__WEBPACK_IMPORTED_MODULE_17__["querySetting"])(this.LayerID.Tbl_Parcel_Conditions, `USING_SYMBOL_CODE ='${res.features[0].attributes.USING_SYMBOL}'`, false, ["SLIDE_AREA", "MIN_FROT_OFFSET", "BUILDING_RATIO", "FRONT_OFFSET", "SIDE_OFFSET", "BACK_OFFSET", "FLOORS", "FLOOR_HEIGHT", "FAR", "ADD_FLOOR"]),
                callbackResult: condition => {
                  this.setState({
                    conditions: condition.features
                  });
                  Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["getFeatureDomainName"])(res.features, this.LayerID.Landbase_Parcel).then(r => {
                    this.addParcelToSelect(r[0]).then(res => {
                      var _this$selectedLandsT;
                      this.setToStore(r);
                      this.setState({
                        parcelId: null
                      });
                      (_this$selectedLandsT = this.selectedLandsT) === null || _this$selectedLandsT === void 0 ? void 0 : _this$selectedLandsT.push(res);
                      this.DrawGraph();
                    }, () => {
                      var _this$state$selectedL8;
                      (_this$state$selectedL8 = this.state.selectedLands) === null || _this$state$selectedL8 === void 0 ? void 0 : _this$state$selectedL8.pop();
                      this.setToStore();
                    });
                  });
                }
              });
            } else {
              Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["getFeatureDomainName"])(res.features, this.LayerID.Landbase_Parcel).then(r => {
                this.addParcelToSelect(r[0]).then(res => {
                  var _this$selectedLandsT2;
                  this.setToStore(r);
                  this.setState({
                    parcelId: null
                  });
                  (_this$selectedLandsT2 = this.selectedLandsT) === null || _this$selectedLandsT2 === void 0 ? void 0 : _this$selectedLandsT2.push(res);
                  this.DrawGraph();
                }, () => {
                  var _this$state$selectedL9;
                  (_this$state$selectedL9 = this.state.selectedLands) === null || _this$state$selectedL9 === void 0 ? void 0 : _this$state$selectedL9.pop();
                  this.setToStore();
                });
              });
            }
          }
        });
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "setToStore", r => {
      const {
        input: {
          value
        }
      } = this.props;
      this.state.landsData = {
        ...value,
        conditions: this.state.conditions,
        mapGraphics: [],
        temp: {
          mun: this.state.munval,
          plan: this.state.planeval,
          subTypeval: this.state.subTypeval,
          subNameval: this.state.subNameval,
          subname: this.state.subName_name,
          parcelDis: this.parcelDis || this.RolBackParcelNum,
          block_no: this.state.block_no,
          blockval: this.state.blockval,
          parcelval: this.state.parcelval,
          city_name: this.state.city_name
        }
      };
      if (r) {
        var _this$state$selectedL10;
        r[0].attributes.PARCEL_AREA = "";
        (_this$state$selectedL10 = this.state.selectedLands) === null || _this$state$selectedL10 === void 0 ? void 0 : _this$state$selectedL10.push({
          geometry: r[0].geometry,
          attributes: r[0].attributes,
          id: this.state.parcelId
        });
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["map_object"])(this.state.selectedLands);
      }
      this.state.landsData["parcels"] = [...this.state.selectedLands];
      this.props.input.onChange({
        ...this.state.landsData
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "setAdjacentToStore", r => {
      let store = this.props.input.value;
      store.temp.parcelDis = r;
      this.props.input.onChange(store);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "LandHoverOn", f => {
      var _this$state$selectedL11;
      if ((_this$state$selectedL11 = this.state.selectedLands) !== null && _this$state$selectedL11 !== void 0 && _this$state$selectedL11.length) {
        var fitleredGraphics = this.map.getLayer("SelectGraphicLayer").graphics.filter(graphic => {
          var _graphic$attributes, _f$attributes;
          return (graphic === null || graphic === void 0 ? void 0 : (_graphic$attributes = graphic.attributes) === null || _graphic$attributes === void 0 ? void 0 : _graphic$attributes.OBJECTID) != (f === null || f === void 0 ? void 0 : (_f$attributes = f.attributes) === null || _f$attributes === void 0 ? void 0 : _f$attributes.OBJECTID);
        });
        fitleredGraphics = [...new Map(fitleredGraphics.map(item => {
          var _item$attributes;
          return [item === null || item === void 0 ? void 0 : (_item$attributes = item["attributes"]) === null || _item$attributes === void 0 ? void 0 : _item$attributes["OBJECTID"], item];
        })).values()];
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["clearGraphicFromLayer"])(this.map, "SelectGraphicLayer");
        fitleredGraphics.forEach(graphic => {
          this.map.getLayer("SelectGraphicLayer").add(graphic);
        });
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["highlightFeature"])([f], this.map, {
          layerName: "SelectGraphicLayer",
          noclear: true,
          isZoom: false,
          isHiglightSymbol: false,
          attr: true
        });
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "LandHoverOff", f => {
      var _this$state$selectedL12, _f$attributes2, _this$state;
      if (f && (_this$state$selectedL12 = this.state.selectedLands) !== null && _this$state$selectedL12 !== void 0 && _this$state$selectedL12.length && (f === null || f === void 0 ? void 0 : (_f$attributes2 = f.attributes) === null || _f$attributes2 === void 0 ? void 0 : _f$attributes2.PARCEL_SPATIAL_ID) != ((_this$state = this.state) === null || _this$state === void 0 ? void 0 : _this$state.parcelId)) {
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["highlightFeature"])([f], this.map, {
          layerName: "SelectGraphicLayer",
          noclear: true,
          isZoom: false,
          isHiglightSymbol: true,
          highlighColor: [0, 255, 0, 0.5],
          attr: true
        });
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "remove", item => {
      var _this$state$selectedL13, _this$state$selectedL14;
      var itemIndex = (_this$state$selectedL13 = this.state.selectedLands) === null || _this$state$selectedL13 === void 0 ? void 0 : _this$state$selectedL13.findIndex(parcel => {
        return parcel.attributes.PARCEL_PLAN_NO == item.attributes.PARCEL_PLAN_NO;
      });
      var itemIndexT = (_this$state$selectedL14 = this.state.selectedLandsT) === null || _this$state$selectedL14 === void 0 ? void 0 : _this$state$selectedL14.findIndex(parcel => {
        return parcel.attributes.PARCEL_PLAN_NO == item.attributes.PARCEL_PLAN_NO;
      });
      //this.state.parcelData = {};
      if (itemIndex != -1) {
        var _this$state$selectedL15, _this$state$selectedL16;
        let {
          mainObject
        } = this.props;
        if (mainObject && mainObject.waseka) {
          delete mainObject.waseka;
        }
        (_this$state$selectedL15 = this.state.selectedLands) === null || _this$state$selectedL15 === void 0 ? void 0 : _this$state$selectedL15.splice(itemIndex, 1);
        (_this$state$selectedL16 = this.state.selectedLandsT) === null || _this$state$selectedL16 === void 0 ? void 0 : _this$state$selectedL16.splice(itemIndexT, 1);
      }
      this.DrawGraph();
      this.setToStore();
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "openPopup", scope => {
      scope = this;
      var fields = this.parcelDataFields;
      this.props.setMain("Popup", {
        popup: {
          type: "create",
          className: "contract-modal",
          childProps: {
            fields,
            initialValues: {
              ...this.state.selectedLands[0].parcelData
            },
            ok(values) {
              var _scope$state$selected;
              (_scope$state$selected = scope.state.selectedLands) === null || _scope$state$selected === void 0 ? void 0 : _scope$state$selected.forEach(parcel => {
                parcel.parcelData = values;
              });
              scope.setToStore();
              return Promise.resolve(true);
            }
          }
        }
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "myChangeHandler", (name, i, e, event) => {
      let val = typeof event == "string" && event || event.target.value;
      e.attributes[name] = val;
      // e.attributes["PARCEL_AREA"] = event.target.value;
      if (this.showEditBtn(name, val)) {
        this["edit_" + name + i] = val;
        this.setState({
          [name + "_isEdit_" + i]: true
        });
      } else {
        this.setState({});
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "showEditBtn", (name, value) => {
      if (name == "USING_SYMBOL") {
        return value == null;
      } else {
        return ["PARCEL_AREA", "PLAN_NO", "DISTRICT_NAME", "USING_SYMBOL_TEXT"].indexOf(name) > -1;
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "enableEdit", (name, i) => {
      this.setState({
        [name + "_isEdit_" + i]: true
      });
    });
    this.PlanNum = [];
    this.planId = null;
    this.parcelTs = [];
    this.selectionMode = false;
    this.parcel_fields_headers = [" ", " (2)", " ", " ", "", " ", " ", " "
    // " ",
    ];
    this.units = [{
      value: "",
      label: ""
    }, {
      value: "",
      label: ""
    }, {
      value: "",
      label: ""
    }];
    let extInitialValue = "";
    this.parcel_fields = [{
      name: "PARCEL_PLAN_NO",
      editable: false
    }, {
      name: "PARCEL_AREA",
      editable: true,
      extName: "PARCEL_AREA_UNIT_NAME",
      extData: [{
        value: " ",
        label: " "
      }, {
        value: "",
        label: ""
      }, {
        value: "",
        label: ""
      }],
      extInitialValue: " "
    }, {
      name: "PARCEL_BLOCK_NO",
      editable: true,
      type: "text"
    }, {
      name: "PLAN_NO",
      editable: true,
      type: "text"
    }, {
      name: "DISTRICT_NAME",
      editable: true,
      type: "text"
    }, {
      name: "SUBDIVISION_TYPE",
      editable: false
    }, {
      name: "SUBDIVISION_DESCRIPTION",
      editable: false
    }, {
      name: "USING_SYMBOL",
      editable: false
    }];
    let callBackSelect = (scope, controlName, val) => {
      let {
        input: {
          onChange,
          value
        }
      } = this.props;
      //delete value[controlName];
      let controlValue = {
        [controlName]: val,
        ...value
      };
      //this.state[controlName] = val;
      onChange(controlValue);
      this.setState(controlValue);
    };
    this.parcelDataFields = {
      parcel_type: {
        label: " ",
        placeholder: "    ",
        type: "input",
        field: "select",
        className: "select_flex",
        name: "parcel_type",
        data: [{
          label: " ",
          value: " "
        }, {
          label: " ",
          value: " "
        }, {
          label: "",
          value: ""
        }, {
          label: "",
          value: ""
        }],
        required: true
      },
      other: {
        label: "",
        placeholder: "    ",
        field: "text",
        type: "input",
        name: "other",
        maxLength: 200,
        required: true,
        permission: {
          // show_match_value: { parcel_type: "" },
          show_values_equal_list: [{
            key: "parcel_type",
            value: ""
          }]
        }
      },
      north_length: {
        label: "   ()",
        placeholder: "      ()",
        field: "inputNumber",
        type: "input",
        name: "north_length",
        hasAU: true,
        value_key: "value",
        label_key: "value",
        data: [...this.units],
        //onClick: callBackSelect,
        required: true,
        extInitialValue
      },
      north_desc: {
        label: "  ",
        placeholder: "     ",
        field: "text",
        type: "input",
        name: "north_desc",
        maxLength: 200,
        required: true
      },
      south_length: {
        label: "   ()",
        placeholder: "      ()",
        field: "inputNumber",
        type: "input",
        name: "south_length",
        required: true,
        hasAU: true,
        value_key: "value",
        label_key: "value",
        data: [...this.units],
        //onClick: callBackSelect,
        extInitialValue
      },
      south_desc: {
        label: "  ",
        placeholder: "     ",
        field: "text",
        type: "input",
        name: "south_desc",
        maxLength: 200,
        required: true
      },
      east_length: {
        label: "   ()",
        placeholder: "      ()",
        field: "inputNumber",
        type: "input",
        name: "east_length",
        required: true,
        hasAU: true,
        value_key: "value",
        label_key: "value",
        data: [...this.units],
        //onClick: callBackSelect,
        extInitialValue
      },
      east_desc: {
        label: "  ",
        placeholder: "     ",
        field: "text",
        type: "input",
        name: "east_desc",
        maxLength: 200,
        required: true
      },
      west_length: {
        label: "   ()",
        placeholder: "      ()",
        field: "inputNumber",
        type: "input",
        name: "west_length",
        required: true,
        hasAU: true,
        value_key: "value",
        label_key: "value",
        data: [...this.units],
        //onClick: callBackSelect,
        extInitialValue
      },
      west_desc: {
        label: "  ",
        placeholder: "     ",
        field: "text",
        type: "input",
        name: "west_desc",
        maxLength: 200,
        required: true
      }
    };
    Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["map_object"])(props.input && props.input.value.parcels);
    this.selectedLandsT = (props === null || props === void 0 ? void 0 : (_props$input = props.input) === null || _props$input === void 0 ? void 0 : (_props$input$value = _props$input.value) === null || _props$input$value === void 0 ? void 0 : (_props$input$value$te = _props$input$value.temp) === null || _props$input$value$te === void 0 ? void 0 : _props$input$value$te.parcelDis) && [{
      features: props === null || props === void 0 ? void 0 : (_props$input2 = props.input) === null || _props$input2 === void 0 ? void 0 : (_props$input2$value = _props$input2.value) === null || _props$input2$value === void 0 ? void 0 : (_props$input2$value$t = _props$input2$value.temp) === null || _props$input2$value$t === void 0 ? void 0 : _props$input2$value$t.parcelDis
    }] || [];
    this.state = {
      mapLoaded: false,
      munval: props.input && props.input.value.temp && props.input.value.temp.mun || undefined,
      planeval: ((_this$props$mainObjec4 = this.props.mainObject) === null || _this$props$mainObjec4 === void 0 ? void 0 : (_this$props$mainObjec5 = _this$props$mainObjec4.landData) === null || _this$props$mainObjec5 === void 0 ? void 0 : (_this$props$mainObjec6 = _this$props$mainObjec5.landData) === null || _this$props$mainObjec6 === void 0 ? void 0 : _this$props$mainObjec6.PLAN_NO) || props.input && props.input.value.temp && props.input.value.temp.plan || undefined,
      subTypeval: props.input && props.input.value.temp && props.input.value.temp.subTypeval || undefined,
      subNameval: props.input && props.input.value.temp && props.input.value.temp.subNameval || undefined,
      blockval: props.input && props.input.value.temp && props.input.value.temp.blockval || undefined,
      selectedLands: props.input && props.input.value.parcels || [],
      parcelval: props.input && props.input.value.temp && props.input.value.temp.parcel || undefined,
      conditions: props.input && props.input.value.conditions || undefined,
      planSersh: null,
      parcelNum: (props === null || props === void 0 ? void 0 : (_props$input3 = props.input) === null || _props$input3 === void 0 ? void 0 : (_props$input3$value = _props$input3.value) === null || _props$input3$value === void 0 ? void 0 : (_props$input3$value$t = _props$input3$value.temp) === null || _props$input3$value$t === void 0 ? void 0 : _props$input3$value$t.parcelDis) || [],
      parcelNumS: [],
      blockNum: [],
      subDivNames: [],
      subDivType: [],
      MunicipalityNames: [],
      PlanNum: [],
      parcelId: null,
      mapExtend: null,
      parcelSearch: null,
      poly: null,
      //parcelSideLengths: [],
      //parcelData: props.input.value.parcelData || {},
      landsData: {}
    };
    this.isloaded = true;
  }
  componentDidMount() {
    window.filterUrl = _mapviewer_config_map__WEBPACK_IMPORTED_MODULE_10__["mapUrl"];
    Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["getInfo"])().then(res => {
      this.LayerID = res;
      Object(_common_esri_request__WEBPACK_IMPORTED_MODULE_7__["esriRequest"])(_mapviewer_config_map__WEBPACK_IMPORTED_MODULE_10__["mapUrl"] + "/" + this.LayerID.Municipality_Boundary).then(response => {
        let muns = [2088].indexOf(this.props.currentModule.record.workflow_id) == -1 ? response.types[0].domains.MUNICIPALITY_NAME.codedValues.filter(codeValue => this.props.currentModule.record.workflow_id == 2128 && codeValue.code == 10506 || this.props.currentModule.record.workflow_id == 2241 && codeValue.code == 10513 || [2261, 2262, 2263].indexOf(this.props.currentModule.record.workflow_id) != -1 && codeValue.code == 10501 || this.props.currentModule.record.workflow_id == 2208) : response.types[0].domains.MUNICIPALITY_NAME.codedValues.filter(codeValue => {
          if ([10506].indexOf(codeValue.code) == -1) {
            // 10501,10513,
            return codeValue;
          }
        });
        this.setState({
          MunicipalityNames: muns,
          munval: muns.length == 1 && muns[0].code || this.state.munval
        }, () => {
          if (this.state.munval) {
            this.onMunChange(this.state.munval, () => {
              this.onPlaneChange(this.state.planeval, () => {
                this.onSubTypeChange(this.state.subTypeval, () => {
                  this.onSubNameChange(this.state.subNameval, () => {
                    this.onBlockChange(this.state.blockval, () => {
                      this.onLandParcelChange(this.state.parcelval, () => {});
                    });
                  });
                });
              });
            });
          }
        });
        if (muns.length == 1 && muns[0].code) {
          setTimeout(() => {
            var _this$state$selectedL17;
            if (!((_this$state$selectedL17 = this.state.selectedLands) !== null && _this$state$selectedL17 !== void 0 && _this$state$selectedL17.length)) {
              this.onMunChange(muns[0].code);
            }
          }, 1000);
        }
      });
      Object(_common_esri_request__WEBPACK_IMPORTED_MODULE_7__["esriRequest"])(_mapviewer_config_map__WEBPACK_IMPORTED_MODULE_10__["mapUrl"] + "/" + this.LayerID.Subdivision).then(response => {
        this.setState({
          subDivType: response.fields[7].domain.codedValues
        });
      });
    });
    this.isloaded = false;
  }
  replaceAll(str, find, replace) {
    return str.replace(new RegExp(find, "g"), replace);
  }
  saveEdit(id, name, i) {
    var _this$state$selectedL18;
    let findParcel = this.props.input.value.parcels.find(p => {
      var _p$attributes;
      return [p === null || p === void 0 ? void 0 : p.id, p === null || p === void 0 ? void 0 : (_p$attributes = p.attributes) === null || _p$attributes === void 0 ? void 0 : _p$attributes.PARCEL_SPATIAL_ID].indexOf(id) != -1;
    });
    findParcel.attributes[name] = this["edit_" + name + i] || findParcel.attributes[name];
    let selectLand = (_this$state$selectedL18 = this.state.selectedLands) === null || _this$state$selectedL18 === void 0 ? void 0 : _this$state$selectedL18.find(p => {
      var _p$attributes2;
      return [p === null || p === void 0 ? void 0 : p.id, p === null || p === void 0 ? void 0 : (_p$attributes2 = p.attributes) === null || _p$attributes2 === void 0 ? void 0 : _p$attributes2.PARCEL_SPATIAL_ID].indexOf(id) != -1;
    });
    selectLand.attributes[name] = this["edit_" + name + i] || selectLand.attributes[name];
    this.setState({
      [name + "_isEdit_" + i]: false,
      selectedLands: [...this.state.selectedLands]
    }, () => {
      this.setToStore();
    });
  }
  render() {
    var _this$state$Municipal;
    const {
      //parcelData,
      selectedLands,
      MunicipalityNames,
      subDivType,
      subDivNames,
      subNameval,
      blockNum,
      blockval,
      PlanNum,
      mapLoaded,
      planeval,
      parcelSearch,
      parcelNum,
      parcelval,
      conditions
    } = this.state;
    const {
      fullMapWidth
    } = this.props;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div", {
      className: !fullMapWidth ? "content-section implementation" : ""
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div", null, mapLoaded && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div", {
      style: {
        boxShadow: "1px 1px 3px black",
        paddingLeft: "15px",
        paddingTop: "30px",
        height: "487px"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a, {
      getPopupContainer: trigger => trigger.parentNode,
      autoFocus: true,
      onChange: this.onMunChange,
      showSearch: true,
      value: this.state.munval,
      placeholder: "\u0627\u062E\u062A\u0631 \u0627\u0633\u0645 \u0627\u0644\u0628\u0644\u062F\u064A\u0647",
      disabled: !((_this$state$Municipal = this.state.MunicipalityNames) !== null && _this$state$Municipal !== void 0 && _this$state$Municipal.length),
      optionFilterProp: "children",
      filterOption: (input, option) => {
        if (option.props.children) {
          return option.props.children.find(i => {
            return i && i.indexOf(input.trim().toLowerCase()) >= 0;
          }) != null;
        } else {
          return false;
        }
      }
    }, MunicipalityNames === null || MunicipalityNames === void 0 ? void 0 : MunicipalityNames.map(e => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(Option, {
      key: e.code,
      value: e.code
    }, e.name, " "))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a, {
      getPopupContainer: trigger => trigger.parentNode,
      onChange: this.onPlaneChange,
      showSearch: true,
      autoFocus: true,
      disabled: !PlanNum.length,
      optionFilterProp: "children",
      filterOption: (input, option) => {
        if (option.props.children) {
          var _option$props$childre;
          return ((_option$props$childre = option.props.children) === null || _option$props$childre === void 0 ? void 0 : _option$props$childre.indexOf(Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["convertToArabic"])(input))) != -1;
        } else {
          return false;
        }
      },
      value: planeval,
      placeholder: "\u0631\u0642\u0645 \u0627\u0644\u0645\u062E\u0637\u0637",
      notFoundContent: "not found"
    }, PlanNum
    //.slice(0, 100)
    .map((d, i) => {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(Option, {
        key: i,
        value: d.i
      }, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["convertToArabic"])(d.attributes.PLAN_NO));
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a, {
      getPopupContainer: trigger => trigger.parentNode,
      autoFocus: true,
      onChange: this.onSubTypeChange,
      showSearch: true,
      disabled: !subDivType.length,
      value: this.state.subTypeval,
      placeholder: " ",
      optionFilterProp: "children",
      filterOption: (input, option) => {
        if (option.props.children) {
          var _option$props$childre2;
          return ((_option$props$childre2 = option.props.children) === null || _option$props$childre2 === void 0 ? void 0 : _option$props$childre2.indexOf(Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["convertToArabic"])(input))) != -1;
        } else {
          return false;
        }
      }
    }, subDivType
    //.slice(0, 100)
    .map((e, i) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(Option, {
      key: i,
      value: e.code
    }, " ", e.name, " "))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a, {
      getPopupContainer: trigger => trigger.parentNode,
      autoFocus: true,
      onChange: this.onSubNameChange,
      showSearch: true,
      disabled: !subDivNames.length,
      placeholder: "\u0627\u0633\u0645 \u0627\u0644\u062A\u0642\u0633\u064A\u0645",
      value: subNameval,
      optionFilterProp: "children",
      filterOption: (input, option) => {
        var _option$props$childre3;
        return ((_option$props$childre3 = option.props.children) === null || _option$props$childre3 === void 0 ? void 0 : _option$props$childre3.indexOf(Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["convertToArabic"])(input))) != -1;
      }
    }, subDivNames.map((e, i) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(Option, {
      key: i,
      value: e.attributes.SUBDIVISION_SPATIAL_ID
    }, " ", e.attributes.SUBDIVISION_DESCRIPTION))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a, {
      getPopupContainer: trigger => trigger.parentNode,
      autoFocus: true,
      onChange: this.onBlockChange,
      showSearch: true,
      disabled: !blockNum.length,
      value: blockval,
      placeholder: "\u0631\u0642\u0645 \u0627\u0644\u0628\u0644\u0643",
      optionFilterProp: "children",
      filterOption: (input, option) => {
        var _option$props$childre4;
        return ((_option$props$childre4 = option.props.children) === null || _option$props$childre4 === void 0 ? void 0 : _option$props$childre4.indexOf(Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["convertToArabic"])(input))) != -1;
      }
    }, blockNum
    //.slice(0, 100)
    .map((e, i) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(Option, {
      key: i,
      value: e.attributes.BLOCK_SPATIAL_ID
    }, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["convertToArabic"])(e.attributes.BLOCK_NO)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a, {
      onFocus: () => {
        //clearGraphicFromLayer(this.map, "SelectLandsGraphicLayer");
        if (!this.state["parcelId"]) {
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["highlightFeature"])(parcelNum.filter((e, i) => {
            if (parcelSearch) {
              var _this$state$selectedL19;
              if ((_this$state$selectedL19 = this.state.selectedLands) !== null && _this$state$selectedL19 !== void 0 && _this$state$selectedL19.length) {
                var _this$state$selectedL20;
                return !((_this$state$selectedL20 = this.state.selectedLands) !== null && _this$state$selectedL20 !== void 0 && _this$state$selectedL20.find(tt => tt.attributes.PARCEL_SPATIAL_ID == e.attributes.PARCEL_SPATIAL_ID));
              } else {
                return e.attributes.PARCEL_PLAN_NO && e.attributes.PARCEL_PLAN_NO.toLowerCase().indexOf(parcelSearch.toLowerCase()) >= 0;
              }
            } else {
              if (selectedLands !== null && selectedLands !== void 0 && selectedLands.length) {
                return !(selectedLands !== null && selectedLands !== void 0 && selectedLands.find(tt => tt.attributes.PARCEL_PLAN_NO == e.attributes.PARCEL_PLAN_NO)) && e.attributes.PARCEL_PLAN_NO;
              } else {
                return e.attributes.PARCEL_PLAN_NO;
              }
            }
          }),
          // .slice(0, 100),
          this.map, {
            layerName: "SelectGraphicLayer",
            noclear: false,
            isZoom: false,
            isHiglightSymbol: true,
            highlighColor: [0, 255, 0, 0.5],
            attr: true
          });
        }
      },
      onChange: this.onLandParcelChange,
      showSearch: true,
      disabled: parcelNum && !parcelNum.length,
      onSearch: e => {
        this.setState({
          parcelSearch: e
        });
      },
      filterOption: (input, option) => {
        if (option.props.children) {
          var _option$props$childre5;
          return ((_option$props$childre5 = option.props.children) === null || _option$props$childre5 === void 0 ? void 0 : _option$props$childre5.indexOf(Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["convertToArabic"])(input))) != -1;
        } else {
          return false;
        }
      },
      value: parcelval,
      placeholder: "\u0631\u0642\u0645 \u0642\u0637\u0639\u0629 \u0627\u0644\u0627\u0631\u0636"
    }, parcelNum && parcelNum.filter((e, i) => {
      if (parcelSearch) {
        var _this$state$selectedL21;
        if ((_this$state$selectedL21 = this.state.selectedLands) !== null && _this$state$selectedL21 !== void 0 && _this$state$selectedL21.length) {
          var _this$state$selectedL22;
          return !((_this$state$selectedL22 = this.state.selectedLands) !== null && _this$state$selectedL22 !== void 0 && _this$state$selectedL22.find(tt => tt.attributes.PARCEL_SPATIAL_ID == e.attributes.PARCEL_SPATIAL_ID));
        } else {
          return e.attributes.PARCEL_PLAN_NO && e.attributes.PARCEL_PLAN_NO.toLowerCase().indexOf(parcelSearch.toLowerCase()) >= 0;
        }
      } else {
        if (selectedLands !== null && selectedLands !== void 0 && selectedLands.length) {
          return !(selectedLands !== null && selectedLands !== void 0 && selectedLands.find(tt => tt.attributes.PARCEL_PLAN_NO == e.attributes.PARCEL_PLAN_NO)) && e.attributes.PARCEL_PLAN_NO;
        } else {
          return e.attributes.PARCEL_PLAN_NO;
        }
      }
    }).slice(0, 100).map((e, i) => {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(Option, {
        onMouseEnter: this.LandHoverOn.bind(this, e),
        onMouseLeave: this.LandHoverOff.bind(this, e),
        key: e.attributes.PARCEL_SPATIAL_ID,
        value: e.i
      }, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["localizeNumber"])(e.attributes.PARCEL_PLAN_NO));
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_2___default.a, {
      className: "add-gis",
      disabled: !this.state.parcelId,
      onClick: this.OnParcelSelect
    }, "\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0623\u0631\u0636"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react_sticky__WEBPACK_IMPORTED_MODULE_9__["StickyContainer"], {
      style: {
        direction: "ltr"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react_sticky__WEBPACK_IMPORTED_MODULE_9__["Sticky"], {
      bottomOffset: 80
    }, ({
      style
    }) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_MapBtnsComponent__WEBPACK_IMPORTED_MODULE_13__["default"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({
      style: style
    }, this.props)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_MapComponent_MapComponent__WEBPACK_IMPORTED_MODULE_12__["default"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({
      mapload: this.mapLoaded.bind(this)
    }, this.props))))), mapLoaded && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div", {
      style: {
        gridColumn: "1/3"
      }
    }, selectedLands && (selectedLands === null || selectedLands === void 0 ? void 0 : selectedLands.length) > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("h1", {
      className: "titleSelectedParcel"
    }, "\u0627\u0644\u0623\u0631\u0627\u0636\u064A \u0627\u0644\u0645\u062E\u062A\u0627\u0631\u0629"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("table", {
      className: "table table-bordered",
      style: {
        marginTop: "1%"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("thead", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("tr", null, this.parcel_fields_headers.map((field_header, k) => {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("th", null, field_header);
    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("th", null, " \u062E\u064A\u0627\u0631\u0627\u062A"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("tbody", null, selectedLands === null || selectedLands === void 0 ? void 0 : selectedLands.map((e, i) => {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("tr", {
        key: i
      }, this.parcel_fields.map((field, k) => {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("td", {
          key: k
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div", {
          className: "select_width"
        }, field.editable ? !this.state[field.name + "_isEdit_" + i] ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("span", null, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["localizeNumber"])(`${e.attributes[field.name] || ""} ${e.attributes[field.extName] || ""}`)), this.showEditBtn(field.name, e.attributes[field.name]) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("button", {
          className: "btn",
          style: {
            marginRight: e.attributes[field.name] ? "20px" : "0px"
          },
          onClick: this.enableEdit.bind(this, field.name, i)
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("i", {
          className: "fas fa-edit"
        })))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("span", {
          style: {
            display: "grid",
            gridTemplateColumns: "1fr 100px auto",
            alignItems: "center",
            gridGap: "10px"
          }
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("input", {
          key: i,
          className: "form-control",
          type: field.type || "number",
          step: "any",
          value: e.attributes[field.name],
          onChange: this.myChangeHandler.bind(this, field.name, i, e)
        }), field.extName && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a, {
          getPopupContainer: trigger => trigger.parentNode,
          autoFocus: true,
          value: e.attributes[field.extName] || this.myChangeHandler(field.extName, i, e, field.extInitialValue),
          onChange: this.myChangeHandler.bind(this, field.extName, i, e),
          placeholder: "    "
        }, field.extData.map((e, i) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(Option, {
          key: i,
          value: e.value
        }, e.label))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("button", {
          className: "btn",
          style: {
            marginRight: "20px"
          },
          onClick: this.saveEdit.bind(this, e.attributes.PARCEL_SPATIAL_ID, field.name, i)
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("i", {
          className: "fa fa-floppy-o"
        }))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("span", null, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_8__["localizeNumber"])(e.attributes[field.name] || "")))));
      }), i === (selectedLands === null || selectedLands === void 0 ? void 0 : selectedLands.length) - 1 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("td", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("button", {
        className: "btn follow",
        style: {
          margin: "0px 5px"
        },
        onClick: () => {
          this.openPopup(this);
        }
      }, "\u062D\u062F\u0648\u062F \u0648 \u0623\u0628\u0639\u0627\u062F \u0627\u0644\u0623\u0631\u0636"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("button", {
        className: " btn btn-danger ",
        onClick: this.remove.bind(this, e)
      }, "\u062D\u0630\u0641")) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("td", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("button", {
        className: " btn btn-danger ",
        onClick: this.remove.bind(this, e)
      }, "\u062D\u0630\u0641")));
    }))))));
  }
}
/* harmony default export */ __webpack_exports__["default"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_16__["connect"])(_mapping__WEBPACK_IMPORTED_MODULE_14__["mapStateToProps"], appMapDispatchToProps)(updateContractIdentifyComponnent));

/***/ })

}]);
//# sourceMappingURL=0.min.js.map