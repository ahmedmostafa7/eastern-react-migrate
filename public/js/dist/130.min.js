(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[130],{

/***/ "./src/app/components/wizard/components/stepContent/sections/sectionTypes/wizardSummery/components/editUpdateCreate.js":
/*!*****************************************************************************************************************************!*\
  !*** ./src/app/components/wizard/components/stepContent/sections/sectionTypes/wizardSummery/components/editUpdateCreate.js ***!
  \*****************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return editUpdateCreate; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _inputs_fields_identify_Component_mapviewer_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../../inputs/fields/identify/Component/mapviewer/config */ "./src/app/components/inputs/fields/identify/Component/mapviewer/config/index.js");



class editUpdateCreate extends react__WEBPACK_IMPORTED_MODULE_1__["Component"] {
  constructor(...args) {
    super(...args);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "state", {
      allFeatures: {}
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "isHasDifference", (index, layer) => {
      var _editAndDeleteMapLaye, _editAndDeleteMapLaye2, _editAndDeleteMapLaye3;
      let isDifference = false;
      (_editAndDeleteMapLaye = _inputs_fields_identify_Component_mapviewer_config__WEBPACK_IMPORTED_MODULE_2__["editAndDeleteMapLayers"][layer]) === null || _editAndDeleteMapLaye === void 0 ? void 0 : (_editAndDeleteMapLaye2 = _editAndDeleteMapLaye.outFields) === null || _editAndDeleteMapLaye2 === void 0 ? void 0 : (_editAndDeleteMapLaye3 = _editAndDeleteMapLaye2.filter(x => !x.notInclude)) === null || _editAndDeleteMapLaye3 === void 0 ? void 0 : _editAndDeleteMapLaye3.forEach(field => {
        if (this.state.allFeatures[layer].features[index].attributes[field.name] != this.state.originalFeatures[layer].features[index].attributes[field.name]) {
          isDifference = true;
        }
      });
      return isDifference;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "compareGeomtryDifference", (index, layer) => {
      try {
        return !window.geometryEngine.equals(this.state.allFeatures[layer].features[index].geometry, this.state.originalFeatures[layer].features[index].geometry);
      } catch (error) {
        let feature = this.state.allFeatures[layer].features[index].geometry;
        let originalFeature = this.state.originalFeatures[layer].features[index].geometry;
        let tempFeatureGeometry = null;
        let tempOriginalGeometry = null;
        delete feature.cache;
        delete originalFeature.cache;
        delete feature.spatialReference._geVersion;
        delete originalFeature.spatialReference._geVersion;
        if (feature.type == "polygon") {
          tempFeatureGeometry = new esri.geometry.Polygon(feature);
          tempOriginalGeometry = new esri.geometry.Polygon(originalFeature);
        } else if (feature.type == "point") {
          tempFeatureGeometry = new esri.geometry.Point(feature);
          tempOriginalGeometry = new esri.geometry.Point(originalFeature);
        } else {
          tempFeatureGeometry = new esri.geometry.Polyline(feature);
          tempOriginalGeometry = new esri.geometry.Polyline(originalFeature);
        }
        return !window.geometryEngine.equals(tempFeatureGeometry, tempOriginalGeometry);
      }
    });
  }
  formatNumber(num) {
    return (+num).toFixed(2).replace(/[.,]00$/, "");
  }
  componentDidMount() {
    this.setState({
      allFeatures: this.props.mainObject.editUpdateCreate.editableFeatures,
      originalFeatures: this.props.mainObject.editUpdateCreate.originalFeatures
    });
  }
  render() {
    const {
      allFeatures,
      originalFeatures
    } = this.state;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, Object.keys(allFeatures).map(layer => {
      var _allFeatures$layer$fe;
      return (_allFeatures$layer$fe = allFeatures[layer].features) !== null && _allFeatures$layer$fe !== void 0 && _allFeatures$layer$fe.length ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
        style: {
          background: '#57779d',
          textAlign: "center",
          padding: '5px'
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("label", {
        style: {
          color: "white",
          float: 'none',
          marginRight: '20px',
          fontSize: '23px !important'
        }
      }, _inputs_fields_identify_Component_mapviewer_config__WEBPACK_IMPORTED_MODULE_2__["editAndDeleteMapLayers"][layer].name)), allFeatures[layer].features.map((feature, index) => {
        var _editAndDeleteMapLaye4, _editAndDeleteMapLaye5, _editAndDeleteMapLaye6, _editAndDeleteMapLaye7, _editAndDeleteMapLaye8, _editAndDeleteMapLaye9, _editAndDeleteMapLaye10, _editAndDeleteMapLaye11, _editAndDeleteMapLaye12, _editAndDeleteMapLaye13, _editAndDeleteMapLaye14, _editAndDeleteMapLaye15, _editAndDeleteMapLaye16, _editAndDeleteMapLaye17;
        return feature.isDelete ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
          className: "editSummaryTable"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("label", null, "\u0645\u0648\u0642\u0639 ", index + 1, " : "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("table", {
          className: "table table-bordered centeredTable",
          style: {
            width: '100%'
          }
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("thead", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("tr", null, (_editAndDeleteMapLaye4 = _inputs_fields_identify_Component_mapviewer_config__WEBPACK_IMPORTED_MODULE_2__["editAndDeleteMapLayers"][layer]) === null || _editAndDeleteMapLaye4 === void 0 ? void 0 : (_editAndDeleteMapLaye5 = _editAndDeleteMapLaye4.outFields) === null || _editAndDeleteMapLaye5 === void 0 ? void 0 : (_editAndDeleteMapLaye6 = _editAndDeleteMapLaye5.filter(x => !x.notInclude)) === null || _editAndDeleteMapLaye6 === void 0 ? void 0 : _editAndDeleteMapLaye6.map(field => {
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("th", null, field.arName);
        }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("tbody", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("tr", {
          style: {
            background: feature.isDelete ? '#ff000045' : ''
          }
        }, (_editAndDeleteMapLaye7 = _inputs_fields_identify_Component_mapviewer_config__WEBPACK_IMPORTED_MODULE_2__["editAndDeleteMapLayers"][layer]) === null || _editAndDeleteMapLaye7 === void 0 ? void 0 : (_editAndDeleteMapLaye8 = _editAndDeleteMapLaye7.outFields) === null || _editAndDeleteMapLaye8 === void 0 ? void 0 : (_editAndDeleteMapLaye9 = _editAndDeleteMapLaye8.filter(x => !x.notInclude)) === null || _editAndDeleteMapLaye9 === void 0 ? void 0 : _editAndDeleteMapLaye9.map(field => {
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("td", null, isNaN(feature.attributes[field.name]) || !feature.attributes[field.name] ? feature.attributes[field.name] || 'غير متوفر' : this.formatNumber(feature.attributes[field.name]));
        }))))) : this.isHasDifference(index, layer) || this.compareGeomtryDifference(index, layer) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
          className: "editSummaryTable"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {
          style: {
            textAlign: 'center',
            background: '#c9d3df'
          }
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("label", {
          style: {
            fontWeight: 'bold !important'
          }
        }, "\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0648\u0642\u0639 ", index + 1)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("table", {
          className: "table table-bordered centeredTable",
          style: {
            width: '100%'
          }
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("thead", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("tr", null, (_editAndDeleteMapLaye10 = _inputs_fields_identify_Component_mapviewer_config__WEBPACK_IMPORTED_MODULE_2__["editAndDeleteMapLayers"][layer]) === null || _editAndDeleteMapLaye10 === void 0 ? void 0 : (_editAndDeleteMapLaye11 = _editAndDeleteMapLaye10.outFields.filter(x => x.isSummary)) === null || _editAndDeleteMapLaye11 === void 0 ? void 0 : _editAndDeleteMapLaye11.map(field => {
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("th", null, field.arName);
        }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("tbody", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("tr", null, (_editAndDeleteMapLaye12 = _inputs_fields_identify_Component_mapviewer_config__WEBPACK_IMPORTED_MODULE_2__["editAndDeleteMapLayers"][layer]) === null || _editAndDeleteMapLaye12 === void 0 ? void 0 : (_editAndDeleteMapLaye13 = _editAndDeleteMapLaye12.outFields) === null || _editAndDeleteMapLaye13 === void 0 ? void 0 : (_editAndDeleteMapLaye14 = _editAndDeleteMapLaye13.filter(x => x.isSummary)) === null || _editAndDeleteMapLaye14 === void 0 ? void 0 : _editAndDeleteMapLaye14.map(field => {
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("td", null, originalFeatures[layer].features[index].attributes[field.name]);
        })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("label", null, "\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062A\u0639\u062F\u064A\u0644"), this.isHasDifference(index, layer) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("table", {
          className: "table table-bordered centeredTable",
          style: {
            width: '100%'
          }
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("thead", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("tr", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("th", null, "\u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("th", null, "\u0642\u0628\u0644"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("th", null, "\u0628\u0639\u062F"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("tbody", null, (_editAndDeleteMapLaye15 = _inputs_fields_identify_Component_mapviewer_config__WEBPACK_IMPORTED_MODULE_2__["editAndDeleteMapLayers"][layer]) === null || _editAndDeleteMapLaye15 === void 0 ? void 0 : (_editAndDeleteMapLaye16 = _editAndDeleteMapLaye15.outFields) === null || _editAndDeleteMapLaye16 === void 0 ? void 0 : (_editAndDeleteMapLaye17 = _editAndDeleteMapLaye16.filter(x => !x.notInclude)) === null || _editAndDeleteMapLaye17 === void 0 ? void 0 : _editAndDeleteMapLaye17.map(field => {
          return allFeatures[layer].features[index].attributes[field.name] != originalFeatures[layer].features[index].attributes[field.name] ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("tr", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("td", null, field.arName), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("td", null, originalFeatures[layer].features[index].attributes[field.name]), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("td", null, feature.attributes[field.name])) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null);
        }))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null), this.compareGeomtryDifference(index, layer) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, "\u062A\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0639\u0644\u0649 \u0623\u0628\u0639\u0627\u062F \u0627\u0644\u0645\u0648\u0642\u0639") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null)) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null);
      })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null);
    }));
  }
}

/***/ })

}]);
//# sourceMappingURL=130.min.js.map