(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[15],{

/***/ "./src/app/components/inputs/fields/identify/Component/msa7yDataComponent/Helpers.js":
/*!*******************************************************************************************!*\
  !*** ./src/app/components/inputs/fields/identify/Component/msa7yDataComponent/Helpers.js ***!
  \*******************************************************************************************/
/*! exports provided: selectDis, DataQuery, queryOption, querySetting, DataReqest */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectDis", function() { return selectDis; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataQuery", function() { return DataQuery; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryOption", function() { return queryOption; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "querySetting", function() { return querySetting; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataReqest", function() { return DataReqest; });
/* harmony import */ var esri_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! esri-loader */ "./node_modules/esri-loader/dist/umd/esri-loader.js");
/* harmony import */ var esri_loader__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(esri_loader__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _mapviewer_config_map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../mapviewer/config/map */ "./src/app/components/inputs/fields/identify/Component/mapviewer/config/map.js");


const options = {
  url: 'https://js.arcgis.com/3.13'
};
const selectDis = e => {
  var a = [];
  e.forEach(el => {
    el.features.forEach(element => {
      if (!a.find(t => t.attributes.PARCEL_SPATIAL_ID == element.attributes.PARCEL_SPATIAL_ID)) {
        a.push(element);
      }
    });
  });
  return a;
};
const DataQuery = (layerNum, QueryOptions, CallBack) => {
  Object(esri_loader__WEBPACK_IMPORTED_MODULE_0__["loadModules"])(["esri/symbols/SimpleLineSymbol", "esri/Color", "esri/layers/FeatureLayer", "esri/tasks/RelationshipQuery", "esri/tasks/QueryTask", "esri/tasks/query", "esri/request", "esri/geometry/Polygon", "esri/symbols/SimpleFillSymbol", "esri/graphic"], options).then(([SimpleLineSymbol, Color, FeatureLayer, RQuery, QueryTask, Query, request, Polygon, SimpleFillSymbol, Graphic]) => {
    var query = new Query();
    var qt = new QueryTask(_mapviewer_config_map__WEBPACK_IMPORTED_MODULE_1__["mapUrl"] + `/${layerNum}`);
    QueryOptions.forEach(e => {
      query[e.name] = e.value;
    });
    qt.execute(query, CallBack, res => {
      console.log(res);
    });
  });
};
const queryOption = (where, geo, outfields) => {
  return [{
    name: "where",
    value: where
  }, {
    name: "returnGeometry",
    value: geo
  }, {
    name: "outFields",
    value: outfields
  }];
};
const querySetting = (num, where, geo, outfields, url) => {
  return {
    url: (url || _mapviewer_config_map__WEBPACK_IMPORTED_MODULE_1__["mapUrl"]) + "/" + num,
    where,
    returnGeometry: geo,
    outFields: outfields
  };
};
const DataReqest = (url, callBack) => {
  Object(esri_loader__WEBPACK_IMPORTED_MODULE_0__["loadModules"])(["esri/request"], options).then(([request]) => {
    request({
      url: url,
      content: {
        f: "json"
      },
      handleAs: "json",
      callbackParamName: "callback"
    }).then(callBack);
  });
};

/***/ }),

/***/ "./src/app/components/inputs/fields/identify/Component/msa7yDataComponent/cadData.js":
/*!*******************************************************************************************!*\
  !*** ./src/app/components/inputs/fields/identify/Component/msa7yDataComponent/cadData.js ***!
  \*******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var antd_lib_row_style__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd/lib/row/style */ "./node_modules/antd/lib/row/style/index.js");
/* harmony import */ var antd_lib_row_style__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd_lib_row_style__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var antd_lib_row__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd/lib/row */ "./node_modules/antd/lib/row/index.js");
/* harmony import */ var antd_lib_row__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd_lib_row__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var antd_lib_col_style__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! antd/lib/col/style */ "./node_modules/antd/lib/col/style/index.js");
/* harmony import */ var antd_lib_col_style__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(antd_lib_col_style__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var antd_lib_col__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! antd/lib/col */ "./node_modules/antd/lib/col/index.js");
/* harmony import */ var antd_lib_col__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(antd_lib_col__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var antd_lib_select_style__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd/lib/select/style */ "./node_modules/antd/lib/select/style/index.js");
/* harmony import */ var antd_lib_select_style__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(antd_lib_select_style__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd_lib_select__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd/lib/select */ "./node_modules/antd/lib/select/index.js");
/* harmony import */ var antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd_lib_select__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "./node_modules/@babel/runtime/helpers/extends.js");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var antd_lib_tabs_style__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! antd/lib/tabs/style */ "./node_modules/antd/lib/tabs/style/index.js");
/* harmony import */ var antd_lib_tabs_style__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(antd_lib_tabs_style__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var antd_lib_tabs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! antd/lib/tabs */ "./node_modules/antd/lib/tabs/index.js");
/* harmony import */ var antd_lib_tabs__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(antd_lib_tabs__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! lodash/isEmpty */ "./node_modules/lodash/isEmpty.js");
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! lodash/isEqual */ "./node_modules/lodash/isEqual.js");
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _helpers_apiMethods__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../helpers/apiMethods */ "./src/app/helpers/apiMethods/index.js");
/* harmony import */ var _main_helpers_functions_filters_state__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../../main_helpers/functions/filters/state */ "./src/main_helpers/functions/filters/state.js");
/* harmony import */ var _common_esri_request__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../common/esri_request */ "./src/app/components/inputs/fields/identify/Component/common/esri_request.js");
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");
/* harmony import */ var _main_helpers_functions_filters__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../../main_helpers/functions/filters */ "./src/main_helpers/functions/filters/index.js");
/* harmony import */ var _common_common_func__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../common/common_func */ "./src/app/components/inputs/fields/identify/Component/common/common_func.js");
/* harmony import */ var _mapviewer_config_layers__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../mapviewer/config/layers */ "./src/app/components/inputs/fields/identify/Component/mapviewer/config/layers.js");
/* harmony import */ var _mapviewer_config_map__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../mapviewer/config/map */ "./src/app/components/inputs/fields/identify/Component/mapviewer/config/map.js");
/* harmony import */ var react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! react-beautiful-dnd */ "./node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js");
/* harmony import */ var antd_dist_antd_css__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! antd/dist/antd.css */ "./node_modules/antd/dist/antd.css");
/* harmony import */ var antd_dist_antd_css__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(antd_dist_antd_css__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var _MapComponent_MapComponent__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../MapComponent/MapComponent */ "./src/app/components/inputs/fields/identify/Component/MapComponent/MapComponent.js");
/* harmony import */ var _mapping__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../mapping */ "./src/app/components/inputs/fields/identify/Component/mapping.js");
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! react-redux */ "./node_modules/react-redux/es/index.js");
/* harmony import */ var _Helpers__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./Helpers */ "./src/app/components/inputs/fields/identify/Component/msa7yDataComponent/Helpers.js");
/* harmony import */ var _common_esri_loader__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../common/esri_loader */ "./src/app/components/inputs/fields/identify/Component/common/esri_loader.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_28__);
/* harmony import */ var _label__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../label */ "./src/app/components/inputs/fields/label/index.js");
/* harmony import */ var _reducers__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../../../../../reducers */ "./src/app/reducers/index.js");
/* harmony import */ var _wizard_modulesObjects__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../../../../wizard/modulesObjects */ "./src/app/components/wizard/modulesObjects/index.js");





















const {
  TabPane
} = antd_lib_tabs__WEBPACK_IMPORTED_MODULE_9___default.a;






var uniqid = __webpack_require__(/*! uniqid */ "./node_modules/uniqid/index.js");
const _ = __webpack_require__(/*! lodash */ "./node_modules/lodash/lodash.js");





const reorder = (list, startIndex, endIndex) => {
  const result = Array.from(list);
  const [removed] = result.splice(startIndex, 1);
  result.splice(endIndex, 0, removed);
  return result;
};

/**
 * Moves an item from one list to another list.
 */
const move = (source, destination, droppableSource, droppableDestination) => {
  const sourceClone = Array.from(source);
  const destClone = Array.from(destination);
  const [removed] = sourceClone.splice(droppableSource.index, 1);
  destClone.splice(droppableDestination.index, 0, removed);
  const result = {};
  result[droppableSource.droppableId] = sourceClone;
  result[droppableDestination.droppableId] = destClone;
  return result;
};
const grid = 8;
const getItemStyle = (isDragging, draggableStyle) => ({
  // some basic styles to make the items look a bit nicer
  userSelect: "none",
  padding: "2px",
  fontSize: "20px",
  marginRight: "13px",
  float: "right",
  // change background colour if dragging
  background: "#E0E0E0",
  // styles we need to apply on draggables
  ...draggableStyle
});
const dragStyle = {
  float: "right",
  marginRight: "13px",
  backgroundColor: "#E0E0E0",
  padding: "2px"
};
const getListStyle = isDraggingOver => ({
  //background: isDraggingOver ? 'lightblue' : 'lightgrey',
  padding: grid,
  width: "100%",
  height: "60px"
});
const itemContainerNorth = {
  borderTop: "13px solid #008DFF",
  margin: "auto",
  height: "auto",
  width: "500px",
  backgroundColor: "white",
  boxShadow: "1px 1px 3px #505050",
  cursor: "pointer",
  borderRadius: "10px",
  padding: "5px",
  minHeight: "152px",
  overflow: "auto"
};
const sideClass = {
  float: "right",
  textAlign: "right",
  fontSize: "20px",
  marginLeft: "10px",
  marginRight: "10px",
  backgroundColor: "#E0E0E0"
};
const itemContainerWest = {
  borderLeft: "13px solid red",
  height: "auto",
  width: "500px",
  marginTop: "15px",
  backgroundColor: "white",
  boxShadow: "1px 1px 3px #505050",
  cursor: "pointer",
  borderRadius: "10px",
  padding: "5px",
  minHeight: "152px",
  overflow: "auto"
};
const itemContainerEmpty = {
  height: "auto",
  margin: "auto",
  width: "500px",
  marginTop: "35px",
  backgroundColor: "white",
  boxShadow: "1px 1px 3px #505050",
  cursor: "pointer",
  borderRadius: "10px",
  padding: "5px",
  minHeight: "152px",
  overflow: "auto"
};
const itemContainerEast = {
  borderRight: "13px solid #8A8A8A",
  height: "auto",
  width: "500px",
  marginTop: "15px",
  backgroundColor: "white",
  boxShadow: "1px 1px 3px #505050",
  cursor: "pointer",
  borderRadius: "10px",
  padding: "5px",
  minHeight: "152px",
  overflow: "auto"
};
const itemContainerSouth = {
  borderBottom: "13px solid #09F869",
  margin: "auto",
  height: "auto",
  width: "500px",
  marginTop: "15px",
  backgroundColor: "white",
  boxShadow: "1px 1px 3px #505050",
  cursor: "pointer",
  borderRadius: "10px",
  padding: "5px",
  minHeight: "152px",
  overflow: "auto"
};
Array.prototype.sum = function (prop) {
  var total = 0;
  for (var y = 0, _len = this.length; y < _len; y++) {
    prop = prop.replace(/\[(\w+)\]/g, ".$1");
    prop = prop.replace(/^\./, "");
    var a = prop.split(".");
    var data = JSON.parse(JSON.stringify(this[y]));
    for (var i = 0, n = a.length; i < n; ++i) {
      var k = a[i];
      if (k in data) {
        data = data[k];
      } else {
        return 0;
      }
    }
    total += data;
  }
  return total;
};
class cadDataComponent extends react__WEBPACK_IMPORTED_MODULE_12__["Component"] {
  constructor(_props) {
    var _this$props$mainObjec9, _this$props$mainObjec10, _this$props$mainObjec11, _this$props$mainObjec12, _this$props$mainObjec13, _selectMainObject, _selectMainObject$dat, _selectMainObject$dat2;
    super(_props);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "myChangeHandler", (name, i, e, polygonKey, event) => {
      this["edit_" + name + i + `${!isNaN(polygonKey) ? polygonKey : ""}`] = event.target.value;
      if (["DISTRICT_NAME", "PARCEL_BLOCK_NO"].indexOf(name) == -1) {
        e[name] = event.target.value;
      } else {
        e.attributes[name] = event.target.value;
      }
      this.setState({
        [name + "_isEdit_" + i + `${!isNaN(polygonKey) ? polygonKey : ""}`]: true
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "showEditBtn", (name, value) => {
      return !this.state.viewNumbersOnly && ["NORTH_EAST_DIRECTION", "NORTH_WEST_DIRECTION", "SOUTH_EAST_DIRECTION", "SOUTH_WEST_DIRECTION"].indexOf(name) > -1 || ["DISTRICT_NAME", "PARCEL_BLOCK_NO"].indexOf(name) != -1 || false;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "enableEdit", (name, i, polygonKey) => {
      this.setState({
        [name + "_isEdit_" + i + `${!isNaN(polygonKey) ? polygonKey : ""}`]: true
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "id2List", {
      droppable_North: "northBoundries",
      droppable_South: "southBoundries",
      droppable_East: "eastBoundries",
      droppable_West: "westBoundries"
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "getList", id => this.state[this.id2List[id] + (this.state.activeKey - 1)]);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "onDragEnd", result => {
      const {
        source,
        destination
      } = result;
      if (!destination) {
        return;
      }
      if (source.droppableId === destination.droppableId) {
        const items = reorder(this.getList(source.droppableId), source.index, destination.index);
        let state = {
          items
        };
        if (source.droppableId === "droppable_South") {
          state = {
            ["southBoundries" + (this.state.activeKey - 1)]: items
          };
        }
        if (source.droppableId === "droppable_North") {
          state = {
            ["northBoundries" + (this.state.activeKey - 1)]: items
          };
        }
        if (source.droppableId === "droppable_East") {
          state = {
            ["eastBoundries" + (this.state.activeKey - 1)]: items
          };
        }
        if (source.droppableId === "droppable_West") {
          state = {
            ["westBoundries" + (this.state.activeKey - 1)]: items
          };
        }
        this.setState(state);
      } else {
        const result = move(this.getList(source.droppableId), this.getList(destination.droppableId), source, destination);
        if (result.droppable_North) {
          this.state.polygons[+this.state.activeKey - 1].data[0].data = result.droppable_North.map(item => {
            return item.data;
          });
        }
        if (result.droppable_West) {
          this.state.polygons[+this.state.activeKey - 1].data[3].data = result.droppable_West.map(item => {
            return item.data;
          });
        }
        if (result.droppable_South) {
          this.state.polygons[+this.state.activeKey - 1].data[4].data = result.droppable_South.map(item => {
            return item.data;
          });
        }
        if (result.droppable_East) {
          this.state.polygons[+this.state.activeKey - 1].data[1].data = result.droppable_East.map(item => {
            return item.data;
          });
        }
        this.dropSuccess();
        this.calculateLines();
        this.setState({
          ["northBoundries" + (this.state.activeKey - 1)]: result.droppable_North || this.state["northBoundries" + (this.state.activeKey - 1)],
          ["southBoundries" + (this.state.activeKey - 1)]: result.droppable_South || this.state["southBoundries" + (this.state.activeKey - 1)],
          ["eastBoundries" + (this.state.activeKey - 1)]: result.droppable_East || this.state["eastBoundries" + (this.state.activeKey - 1)],
          ["westBoundries" + (this.state.activeKey - 1)]: result.droppable_West || this.state["westBoundries" + (this.state.activeKey - 1)]
        });
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "dropSuccess", () => {
      const {
        input
      } = this.props;
      const {
        layerParcels
      } = this.state;
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "boundriesDirection");
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "highlightBoundriesGraphicLayer");
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "pictureGraphicLayer");
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "PacrelNoGraphicLayer");
      var count = 0;
      var oldData = JSON.parse(JSON.stringify(layerParcels));
      this.state.layerParcels = [];
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["sortLines"])(this.state.polygons);
      this.state.polygons.forEach((polygon, key) => {
        if (polygon.polygon) {
          count++;
          var parcelNumber = key + 1;
          if (oldData[key]) {
            polygon.corners = JSON.parse(JSON.stringify(oldData[key].corners));
          } else polygon.corners = [];
          layerParcels.push(JSON.parse(JSON.stringify(polygon.polygon)));
          layerParcels[layerParcels.length - 1].lines = [];
          layerParcels[layerParcels.length - 1].corners = [];
          polygon.data.forEach(boundry => {
            var lineDirection;
            if (boundry.name != "main") {
              var color = [0, 0, 255];
              if (boundry.name == "north") {
                color = [0, 141, 255];
                lineDirection = 1;
              } else if (boundry.name == "east") {
                color = [117, 114, 114];
                lineDirection = 2;
              } else if (boundry.name == "west") {
                color = [255, 0, 0];
                lineDirection = 4;
              } else if (boundry.name == "south") {
                color = [0, 255, 0];
                lineDirection = 3;
              }
              boundry.data.forEach(line => {
                //if (this.toLoadLines) {
                line.color = color;
                line.polygonNum = count;
                line.lineDirection = lineDirection;
                var polyline = new esri.geometry.Polyline(line);
                var point1 = {};
                point1.x = line.paths[0][0][0];
                point1.y = line.paths[0][0][1];
                point1.x = Number(point1.x.toPrecision(12));
                point1.y = Number(point1.y.toPrecision(12));
                var latlng = esri.geometry.xyToLngLat(point1.x, point1.y);
                point1.lat = latlng[0];
                point1.lng = latlng[1];
                var point2 = {};
                point2.x = line.paths[0][1][0];
                point2.y = line.paths[0][1][1];
                point2.x = Number(point2.x.toPrecision(12));
                point2.y = Number(point2.y.toPrecision(12));
                latlng = esri.geometry.xyToLngLat(point2.x, point2.y);
                point2.lat = latlng[0];
                point2.lng = latlng[1];
                var fromCornerIndex = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["getCornersIndex"])(polygon.corners, point1);
                if (fromCornerIndex == -1) {
                  polygon.corners.push(point1);
                  fromCornerIndex = polygon.corners.length;
                }
                var toCornerIndex = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["getCornersIndex"])(polygon.corners, point2);
                if (toCornerIndex == -1) {
                  polygon.corners.push(point2);
                  toCornerIndex = polygon.corners.length;
                }
                line.from = fromCornerIndex;
                line.to = toCornerIndex;
                line.BOUNDARY_NO = line.from;
                var polyline = new esri.geometry.Polyline(line);
                layerParcels[layerParcels.length - 1].lines.push(polyline);
                var attr = {
                  parcelNumber: parcelNumber
                };
                Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["addGraphicToLayer"])(polyline, this.map, "boundriesDirection", color, null, null, null, attr);
                // } else {
                //   var polyline = new esri.geometry.Polyline(line);
                //   addGraphicToLayer(
                //     polyline,
                //     this.map,
                //     "boundriesDirection",
                //     color,
                //     null,
                //     null,
                //     null,
                //     attr
                //   );
                // }
              });
            }
          });
          layerParcels[layerParcels.length - 1].corners = JSON.parse(JSON.stringify(polygon.corners));
        }
      });

      //draw corners
      layerParcels.forEach((polygon, key) => {
        var _polygon$corners;
        var polygonClass = new esri.geometry.Polygon(polygon);
        var graphic = new esri.Graphic(polygonClass, null, null, null);
        var pt = graphic.geometry.getExtent().getCenter();
        polygon.lines.forEach((line, key) => {
          var attr = {
            BOUNDARY_NO: line.BOUNDARY_NO,
            FROM_CORNER: line.from,
            TO_CORNER: line.to,
            BOUNDARY_LENGTH: line.text,
            BOUNDARY_DIRECTION: line.lineDirection
          };
          var graphic = new esri.Graphic(line, null, attr, null);
          polygon.lines[key] = graphic;
          var tempString = " يميل "; //" من النقطة " + "<b>" + line.from + "</b>" + " الي النقطة " + "<b>" + line.to + "</b>" + " ";

          if (line.lineDirection == 1) {
            if (!polygon.northDescription) polygon.northDescription = "من الغرب الي الشرق";else {
              polygon.northDescription += " ثم ";
            }
            polygon.northDescription += tempString + Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["computeAngle"])(line.paths[0][0], line.paths[0][1]) + " بطول " + "<b>" + line.text + "</b>" + " م";
          } else if (line.lineDirection == 4) {
            if (!polygon.westDescription) polygon.westDescription = " من الجنوب الي الشمال";else {
              polygon.westDescription += " ثم ";
            }
            polygon.westDescription += tempString + Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["computeAngle"])(line.paths[0][0], line.paths[0][1]) + " بطول " + "<b>" + line.text + "</b>" + " م";
          } else if (line.lineDirection == 3) {
            if (!polygon.southDescription) polygon.southDescription = "من الشرق الي الغرب";else {
              polygon.southDescription += " ثم ";
            }
            polygon.southDescription += tempString + Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["computeAngle"])(line.paths[0][0], line.paths[0][1]) + " بطول " + "<b>" + line.text + "</b>" + " م";
          } else if (line.lineDirection == 2) {
            if (!polygon.eastDescription) polygon.eastDescription = "من الشمال الي الجنوب";else {
              polygon.eastDescription += " ثم ";
            }
            polygon.eastDescription += tempString + Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["computeAngle"])(line.paths[0][0], line.paths[0][1]) + " بطول " + "<b>" + line.text + "</b>" + " م";
          }
        });
        polygon === null || polygon === void 0 ? void 0 : (_polygon$corners = polygon.corners) === null || _polygon$corners === void 0 ? void 0 : _polygon$corners.forEach((corner, key) => {
          var point = new esri.geometry.Point(corner.lat, corner.lng);
          var mp = esri.geometry.geographicToWebMercator(point);
          var iconTextPosition;
          var iconPosition;
          if (!corner.iconPosition) {
            iconTextPosition = {
              x: -5,
              y: 0
            };
            iconPosition = {
              x: 0,
              y: 0
            };
            if (layerParcels.length > 1) {
              iconPosition = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["getCornerIconPosition"])(key + 1, polygon.lines);
              iconTextPosition.x = iconPosition.x > 0 ? iconPosition.x : iconPosition.x - 5;
              iconTextPosition.y = iconPosition.y > 0 ? iconPosition.y : iconPosition.y - 4;
            }
            corner.iconTextPosition = iconTextPosition;
            corner.iconPosition = iconPosition;
          } else {
            iconTextPosition = corner.iconTextPosition;
            iconPosition = corner.iconPosition;
          }
          if (!this.state.isUpdateContract && !this.state.isKrokyUpdateContract && !this.state.isTadkekMesahy && !this.state.isFarz) Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["addParcelNo"])(mp, this.map, "" + (key + 1) + "", "PacrelNoGraphicLayer", 25, [255, 0, 0], null, iconTextPosition);
        });
      });
      this.state.polygons.forEach((polygon, key) => {
        if (polygon.polygon) {
          var _layerParcels$key, _layerParcels$key2, _layerParcels$key3, _layerParcels$key4;
          var polygonClass = new esri.geometry.Polygon(polygon.polygon);
          var graphic = new esri.Graphic(polygonClass, null, null, null);
          var pt = graphic.geometry.getExtent().getCenter();
          polygon.position = pt;
          polygon.northDescription = ((_layerParcels$key = layerParcels[key]) === null || _layerParcels$key === void 0 ? void 0 : _layerParcels$key.northDescription) || "";
          polygon.westDescription = ((_layerParcels$key2 = layerParcels[key]) === null || _layerParcels$key2 === void 0 ? void 0 : _layerParcels$key2.westDescription) || "";
          polygon.southDescription = ((_layerParcels$key3 = layerParcels[key]) === null || _layerParcels$key3 === void 0 ? void 0 : _layerParcels$key3.southDescription) || "";
          polygon.eastDescription = ((_layerParcels$key4 = layerParcels[key]) === null || _layerParcels$key4 === void 0 ? void 0 : _layerParcels$key4.eastDescription) || "";
          if (!polygon.isFullBoundry && !this.state.isKrokyUpdateContract && !this.state.isTadkekMesahy) {
            Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["redrawNames"])(polygon, this.map, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["setParcelName"])([this.state["parcel_name" + key], this.state["parcelSliceNo" + key]]), "PacrelNoGraphicLayer", key);
          }
        }
      });

      // DrawIntersectLines();
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "calculateLines", () => {
      this.state.polygons.forEach((polygon, key) => {
        polygon.data.forEach(lines => {
          lines.totalLength = 0;
          lines.data.forEach(line => {
            //if (!line.hide) lines.totalLength += line.text;
            if (!line.hide) lines.totalLength += +(+line.text).toFixed(2);
          });
          lines.totalLength = lines.totalLength; //.toFixed(2);
        });
      });
      this.settoStore(this.state.polygons);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "getSuggestLine", () => {
      this.state.polygons.forEach((polygon, index) => {
        if (polygon.area != -1) {
          this.state["area" + index] = (+polygon.area).toFixed(2);
          var lengthPoint1, lengthPoint2;
          var polyg = new esri.geometry.Polygon(polygon.polygon);
          var polygonCenterPoint = polyg.getExtent().getCenter();
          polygon.data[2].data.forEach((boundry, key) => {
            if (this.toLoadLines) {
              // var line = new esri.geometry.Polyline(boundry);
              // var centerPointofLine = line.getExtent().getCenter();

              // var diffrenceInXWithMaxPoint = Math.abs(
              //   centerPointofLine.x - polygon.maxPoint.x
              // );
              // var diffrenceWithPolygonCenterPoint = Math.abs(
              //   centerPointofLine.x - polygonCenterPoint.x
              // );

              // if (diffrenceInXWithMaxPoint < diffrenceWithPolygonCenterPoint) {
              //   polygon.data[1].data.push(boundry);
              // } else {
              //   if (direction.direction == "west") {
              //     polygon.data[3].data.push(boundry);
              //   } else if (direction.direction == "north") {
              //     polygon.data[0].data.push(boundry);
              //   } else if (direction.direction == "south") {
              //     polygon.data[4].data.push(boundry);
              //   }
              // }
              let direction = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["computePointDirection"])(polygon, boundry.paths[0][0], boundry.paths[0][1], polyg);
              if (direction.direction == "east") {
                polygon.data[1].data.push(boundry);
              } else {
                if (direction.direction == "west") {
                  polygon.data[3].data.push(boundry);
                } else if (direction.direction == "north") {
                  polygon.data[0].data.push(boundry);
                } else if (direction.direction == "south") {
                  polygon.data[4].data.push(boundry);
                }
              }
            }
          });
          polygon.data[2].data = [];
        }
      });

      // const {
      //   mainObject: {
      //     waseka: {
      //       waseka: { sakType },
      //     },
      //   },
      // } = this.props;

      //if (!sakType || (sakType && sakType != "4")) {
      this.dropSuccess();
      //}

      this.recalculateBoundries(this.state.polygons, obj => {
        this.setState(obj);
      });
      this.calculateLines();
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "recalculateBoundries", (polygons, callback) => {
      if (polygons && polygons.length > 0) {
        var obj = {
          polygons: polygons
        };
        polygons.forEach((polygon, index) => {
          obj["westBoundries" + index] = polygon.data[3].data.map((item, i) => {
            return {
              id: `item-${"west_" + i}`,
              content: item.text,
              data: item
            };
          });
          obj["northBoundries" + index] = polygon.data[0].data.map((item, i) => {
            return {
              id: `item-${"north_" + i}`,
              content: item.text,
              data: item
            };
          });
          obj["eastBoundries" + index] = polygon.data[1].data.map((item, i) => {
            return {
              id: `item-${"east_" + i}`,
              content: item.text,
              data: item
            };
          });
          obj["southBoundries" + index] = polygon.data[4].data.map((item, i) => {
            return {
              id: `item-${"south_" + i}`,
              content: item.text,
              data: item
            };
          });
        });
        if (callback) {
          callback(obj);
        }
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "buildCADDetails", isLoading => {
      // componentDidUpdate
      //return new Promise((resolve,reject) => {
      let mainObject = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["selectMainObject"])(this.props);
      const {
        mapLayers,
        t
      } = this.props;
      const {
        outRange,
        pointsLength,
        annotationLength,
        polygons,
        lineLengthFont,
        parcelNumberFont,
        isBoundry,
        cadResults,
        isKrokyUpdateContract,
        isUpdateContract,
        isTadkekMesahy,
        isPlan,
        notify,
        hideDrag,
        muns
      } = this.state;

      //if(this.state.polygons && this.state.polygons.length == 0 && cadResults.data.length > 0){

      //if (isPlan) {

      if (this.map && cadResults && cadResults.data) {
        var _cadResults$data$3, _cadResults$data$4, _cadResults$data$6, _cadResults$data$6$sh, _cadResults$data$14, _cadResults$data$15, _cadResults$data$16, _mainObject$landData26, _cadResults$data$19, _cadResults$data$20, _cadResults$data$21, _cadResults$data$22, _cadResults$data$23, _cadResults$data$25, _cadResults$data$49, _cadResults$data$49$d, _cadResults$data$50, _cadResults$data$50$a;
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["getInfo"])().then(res => {
          var _cadResults$data$, _cadResults$data$2, _mainObject$landData, _mainObject$landData$, _mainObject$landData2, _mainObject$landData3, _mainObject$landData4, _mainObject$landData5, _mainObject$landData6, _mainObject$landData7, _mainObject$landData8, _mainObject$landData9, _mainObject$landData10;
          this.LayerID = res;
          let LayerID = res;
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["intersectQueryTask"])({
            outFields: ["*"],
            geometry: (cadResults === null || cadResults === void 0 ? void 0 : cadResults.data) && (cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$ = cadResults.data[0]) === null || _cadResults$data$ === void 0 ? void 0 : _cadResults$data$.shapeFeatures) && (cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$2 = cadResults.data[0]) === null || _cadResults$data$2 === void 0 ? void 0 : _cadResults$data$2.shapeFeatures[0]) || null,
            url: _mapviewer_config_map__WEBPACK_IMPORTED_MODULE_20__["mapUrl"] + "/" + (LayerID === null || LayerID === void 0 ? void 0 : LayerID.Municipality_Boundary),
            where: `MUNICIPALITY_NAME = ${(mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData = mainObject.landData) === null || _mainObject$landData === void 0 ? void 0 : (_mainObject$landData$ = _mainObject$landData.landData) === null || _mainObject$landData$ === void 0 ? void 0 : _mainObject$landData$.municipality_id) || (mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData2 = mainObject.landData) === null || _mainObject$landData2 === void 0 ? void 0 : (_mainObject$landData3 = _mainObject$landData2.landData) === null || _mainObject$landData3 === void 0 ? void 0 : (_mainObject$landData4 = _mainObject$landData3.municipality) === null || _mainObject$landData4 === void 0 ? void 0 : _mainObject$landData4.code) || (mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData5 = mainObject.landData) === null || _mainObject$landData5 === void 0 ? void 0 : (_mainObject$landData6 = _mainObject$landData5.landData) === null || _mainObject$landData6 === void 0 ? void 0 : (_mainObject$landData7 = _mainObject$landData6.lands) === null || _mainObject$landData7 === void 0 ? void 0 : (_mainObject$landData8 = _mainObject$landData7.parcels) === null || _mainObject$landData8 === void 0 ? void 0 : (_mainObject$landData9 = _mainObject$landData8[0]) === null || _mainObject$landData9 === void 0 ? void 0 : (_mainObject$landData10 = _mainObject$landData9.attributes) === null || _mainObject$landData10 === void 0 ? void 0 : _mainObject$landData10.MUNICIPALITY_NAME_Code)}`,
            preQuery: (query, Query) => {
              query.spatialRelationship = Query.SPATIAL_REL_WITHIN;
            },
            callbackResult: res => {
              this.state.mun = _.find(muns, function (d) {
                var _res$features$, _res$features$$attrib;
                return (res === null || res === void 0 ? void 0 : res.features) && (res === null || res === void 0 ? void 0 : (_res$features$ = res.features[0]) === null || _res$features$ === void 0 ? void 0 : (_res$features$$attrib = _res$features$.attributes) === null || _res$features$$attrib === void 0 ? void 0 : _res$features$$attrib.MUNICIPALITY_NAME) == (d === null || d === void 0 ? void 0 : d.code);
              });
              this.settoStore(this.state.polygons);
            },
            errorCallbackResult: res => {
              this.state.mun = null;
              this.settoStore(this.state.polygons);
            }
          });
        });
        let settings = {
          map: this.map,
          layers: mapLayers,
          tolerance: 1,
          polygonFeature: cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$3 = cadResults.data[0]) === null || _cadResults$data$3 === void 0 ? void 0 : _cadResults$data$3.shapeFeatures[0],
          identifyResults: results => {
            var _mainObject$landData11, _mainObject$landData12, _mainObject$landData13, _mainObject$landData14, _mainObject$landData15, _mainObject$landData16, _mainObject$landData17, _mainObject$landData18, _mainObject$landData19, _mainObject$landData20, _mainObject$landData21;
            results = _.groupBy(results, "layerName");
            var munLits = [];
            var urbanList = [];
            var submunList = [];
            if ((mainObject !== null && mainObject !== void 0 && (_mainObject$landData11 = mainObject.landData) !== null && _mainObject$landData11 !== void 0 && (_mainObject$landData12 = _mainObject$landData11.landData) !== null && _mainObject$landData12 !== void 0 && _mainObject$landData12.municipality_id || mainObject !== null && mainObject !== void 0 && (_mainObject$landData13 = mainObject.landData) !== null && _mainObject$landData13 !== void 0 && (_mainObject$landData14 = _mainObject$landData13.landData) !== null && _mainObject$landData14 !== void 0 && (_mainObject$landData15 = _mainObject$landData14.municipality) !== null && _mainObject$landData15 !== void 0 && _mainObject$landData15.code || mainObject !== null && mainObject !== void 0 && (_mainObject$landData16 = mainObject.landData) !== null && _mainObject$landData16 !== void 0 && (_mainObject$landData17 = _mainObject$landData16.landData) !== null && _mainObject$landData17 !== void 0 && (_mainObject$landData18 = _mainObject$landData17.lands) !== null && _mainObject$landData18 !== void 0 && (_mainObject$landData19 = _mainObject$landData18.parcels) !== null && _mainObject$landData19 !== void 0 && (_mainObject$landData20 = _mainObject$landData19[0]) !== null && _mainObject$landData20 !== void 0 && (_mainObject$landData21 = _mainObject$landData20.attributes) !== null && _mainObject$landData21 !== void 0 && _mainObject$landData21.MUNICIPALITY_NAME_Code) && results && results["Municipality_Boundary"]) {
              var _mainObject$landData22, _mainObject$landData23, _mainObject$landData24, _mainObject$landData25;
              var mun_class = mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData22 = mainObject.landData) === null || _mainObject$landData22 === void 0 ? void 0 : (_mainObject$landData23 = _mainObject$landData22.landData) === null || _mainObject$landData23 === void 0 ? void 0 : (_mainObject$landData24 = _mainObject$landData23.municipality) === null || _mainObject$landData24 === void 0 ? void 0 : (_mainObject$landData25 = _mainObject$landData24.mun_classes) === null || _mainObject$landData25 === void 0 ? void 0 : _mainObject$landData25.mun_class;
              results["Municipality_Boundary"].forEach(mun => {
                var _mun$feature, _mun$feature$attribut, _mun$feature2;
                submunList.push((mun === null || mun === void 0 ? void 0 : (_mun$feature = mun.feature) === null || _mun$feature === void 0 ? void 0 : (_mun$feature$attribut = _mun$feature.attributes["تصنيف البلدية"]) === null || _mun$feature$attribut === void 0 ? void 0 : _mun$feature$attribut.toUpperCase()) != "NULL" && (mun === null || mun === void 0 ? void 0 : (_mun$feature2 = mun.feature) === null || _mun$feature2 === void 0 ? void 0 : _mun$feature2.attributes["تصنيف البلدية"]) || mun_class);
              });
              results["Municipality_Boundary"].forEach(function (mun) {
                munLits.push(mun.feature.attributes["اسم البلدية"]);
              }.bind(this));
              results["UrbanAreaBoundary"].forEach(urban => {
                urbanList.push(urban.feature.attributes["نوع النطاق العمرانى"]);
              });
              if (!this.state.isPropetryCheck) {
                this.setState({
                  planDescription: "مرحلة التنمية العمرانية ك ( " + urbanList.join(" , ") + " ) بمدينة  ( " + munLits.join(" , ") + " ) المحددة ( " + submunList.join(" , ") + " )"
                });
                this.settoStore(this.state.polygons);
              }
            }
          }
        };
        if (cadResults !== null && cadResults !== void 0 && (_cadResults$data$4 = cadResults.data[0]) !== null && _cadResults$data$4 !== void 0 && _cadResults$data$4.shapeFeatures[0] && !this.state.isTadkekMesahy && !this.state.isPropetryCheck) {
          var _cadResults$data$5, _cadResults$data$5$sh, _cadResults$data$5$sh2;
          this.map.spatialReference = new esri.SpatialReference({
            wkid: (cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$5 = cadResults.data[0]) === null || _cadResults$data$5 === void 0 ? void 0 : (_cadResults$data$5$sh = _cadResults$data$5.shapeFeatures[0]) === null || _cadResults$data$5$sh === void 0 ? void 0 : (_cadResults$data$5$sh2 = _cadResults$data$5$sh.spatialReference) === null || _cadResults$data$5$sh2 === void 0 ? void 0 : _cadResults$data$5$sh2.wkid) || 32639
          });
        }
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["IdentifyTask"])(settings);
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "highlightBoundriesGraphicLayer");
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "editlengthGraphicLayer");
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "PacrelNoGraphicLayer");
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "addedParclGraphicLayer");
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "boundriesGraphicLayer");
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "boundriesDirection");
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "pictureGraphicLayer");
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "PacrelUnNamedGraphicLayer");
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "detailedGraphicLayer");
        var fullBoundryIndex = cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$6 = cadResults.data[0]) === null || _cadResults$data$6 === void 0 ? void 0 : (_cadResults$data$6$sh = _cadResults$data$6.shapeFeatures) === null || _cadResults$data$6$sh === void 0 ? void 0 : _cadResults$data$6$sh.findIndex(feature => feature.isFullBoundry);
        if (fullBoundryIndex > 0) {
          var _cadResults$data$7, _cadResults$data$8, _cadResults$data$8$sh, _cadResults$data$9, _cadResults$data$9$sh, _cadResults$data$10;
          let tempShapeFeature = JSON.parse(JSON.stringify(cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$7 = cadResults.data[0]) === null || _cadResults$data$7 === void 0 ? void 0 : _cadResults$data$7.shapeFeatures[fullBoundryIndex]));
          cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$8 = cadResults.data[0]) === null || _cadResults$data$8 === void 0 ? void 0 : (_cadResults$data$8$sh = _cadResults$data$8.shapeFeatures) === null || _cadResults$data$8$sh === void 0 ? void 0 : _cadResults$data$8$sh.splice(fullBoundryIndex, 1);
          (_cadResults$data$9 = cadResults.data[0]) === null || _cadResults$data$9 === void 0 ? void 0 : (_cadResults$data$9$sh = _cadResults$data$9.shapeFeatures) === null || _cadResults$data$9$sh === void 0 ? void 0 : _cadResults$data$9$sh.unshift(tempShapeFeature);
          if (cadResults !== null && cadResults !== void 0 && (_cadResults$data$10 = cadResults.data[0]) !== null && _cadResults$data$10 !== void 0 && _cadResults$data$10.cadFeatures) {
            var _cadResults$data$11, _cadResults$data$12, _cadResults$data$12$c, _cadResults$data$13, _cadResults$data$13$c;
            let tempCADFeature = JSON.parse(JSON.stringify(cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$11 = cadResults.data[0]) === null || _cadResults$data$11 === void 0 ? void 0 : _cadResults$data$11.cadFeatures[fullBoundryIndex]));
            cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$12 = cadResults.data[0]) === null || _cadResults$data$12 === void 0 ? void 0 : (_cadResults$data$12$c = _cadResults$data$12.cadFeatures) === null || _cadResults$data$12$c === void 0 ? void 0 : _cadResults$data$12$c.splice(fullBoundryIndex, 1);
            cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$13 = cadResults.data[0]) === null || _cadResults$data$13 === void 0 ? void 0 : (_cadResults$data$13$c = _cadResults$data$13.cadFeatures) === null || _cadResults$data$13$c === void 0 ? void 0 : _cadResults$data$13$c.unshift(tempCADFeature);
          }
        }
        var cadResponse = cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$14 = cadResults.data[0]) === null || _cadResults$data$14 === void 0 ? void 0 : _cadResults$data$14.shapeFeatures;
        var cadOutOfSakBoundriesResponse = cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$15 = cadResults.data[0]) === null || _cadResults$data$15 === void 0 ? void 0 : _cadResults$data$15.outOfSakBoundries;
        var cadHiddenOfSakBoundriesResponse = cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$16 = cadResults.data[0]) === null || _cadResults$data$16 === void 0 ? void 0 : _cadResults$data$16.hiddenOfSakBoundries;
        const {
          inputs
        } = this.props;
        //

        let requestType = mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData26 = mainObject.landData) === null || _mainObject$landData26 === void 0 ? void 0 : _mainObject$landData26.requestType;
        if (!isTadkekMesahy && cadResponse.length > 1 && (!(isKrokyUpdateContract || isUpdateContract || this.props.currentModule.record.workflow_id == 2028) || isUpdateContract && requestType == 2)) {
          cadResults.data = null;
          window.notifySystem("error", t("NOTVALIDCAD"));
          return;
        }
        if ((isKrokyUpdateContract || isUpdateContract || this.props.currentModule.record.workflow_id == 2028) && !isTadkekMesahy) {
          var _cadResults$data$17, _cadResults$data$18, _cadResults$data$18$s;
          this.state.isBoundry = _.find(cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$17 = cadResults.data[0]) === null || _cadResults$data$17 === void 0 ? void 0 : _cadResults$data$17.shapeFeatures, d => {
            return d.isFullBoundry;
          });
          if (!this.state.isBoundry && (cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$18 = cadResults.data[0]) === null || _cadResults$data$18 === void 0 ? void 0 : (_cadResults$data$18$s = _cadResults$data$18.shapeFeatures) === null || _cadResults$data$18$s === void 0 ? void 0 : _cadResults$data$18$s.length) > 1) {
            window.notifySystem("error", t("BOUNDRYNOTFOUND"));
            return;
          }
        }

        //this.state.cadFiles: cadResults.data[0]});

        var cadResponsePoints = _.chain(cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$19 = cadResults.data[0]) === null || _cadResults$data$19 === void 0 ? void 0 : _cadResults$data$19.shapeFeatures).map((polygon, key) => {
          return polygon.rings[0].map(point => {
            return new esri.geometry.Point(point[0], point[1], new esri.SpatialReference(polygon.spatialReference));
          });
        }).flatten(true).value();
        var cadResponseOutOfSakBoundriesPoints = _.chain(cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$20 = cadResults.data[0]) === null || _cadResults$data$20 === void 0 ? void 0 : _cadResults$data$20.outOfSakBoundries).map((polygon, key) => {
          return polygon.rings[0].map(point => {
            return new esri.geometry.Point(point[0], point[1], new esri.SpatialReference(polygon.spatialReference));
          });
        }).flatten(true).value();
        var cadResponseCopy = JSON.stringify(cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$21 = cadResults.data[0]) === null || _cadResults$data$21 === void 0 ? void 0 : _cadResults$data$21.shapeFeatures);
        var cadResponseOutOfSakBoundriesCopy = JSON.stringify(cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$22 = cadResults.data[0]) === null || _cadResults$data$22 === void 0 ? void 0 : _cadResults$data$22.outOfSakBoundries);
        var cadArcResponseCopy = JSON.stringify(cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$23 = cadResults.data[0]) === null || _cadResults$data$23 === void 0 ? void 0 : _cadResults$data$23.shapeFeatures);
        var unPolgyons = JSON.parse(cadArcResponseCopy);
        unPolgyons.forEach((polygon, key) => {
          polygon.rings[0] = _.filter(polygon.rings[0], point => {
            var _cadResults$data$24;
            return Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])({
              x: point[0],
              y: point[1]
            }, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$24 = cadResults.data[0]) === null || _cadResults$data$24 === void 0 ? void 0 : _cadResults$data$24.cadFeatures);
          });
        });
        var unprojectArcPolygons = _.chain(cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$25 = cadResults.data[0]) === null || _cadResults$data$25 === void 0 ? void 0 : _cadResults$data$25.shapeFeatures).map((polygon, key) => {
          return polygon.rings[0].map(point => {
            var _cadResults$data$26;
            if (Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])({
              x: point[0],
              y: point[1]
            }, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$26 = cadResults.data[0]) === null || _cadResults$data$26 === void 0 ? void 0 : _cadResults$data$26.cadFeatures)) {
              return new esri.geometry.Point(point[0], point[1], new esri.SpatialReference(polygon.spatialReference));
            } else return null;
          });
        }).flatten(true).value();
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["project"])(cadResponsePoints, 32639, points => {
          if (points) {
            var _cadResults$data$47;
            var plogs = _.chain(JSON.parse(cadResponseCopy)).map(d => {
              var _ref, _ref$splice;
              d.rings[0] = (_ref = Array.isArray(points[0]) && points[0] || points) === null || _ref === void 0 ? void 0 : (_ref$splice = _ref.splice(0, d.rings[0].length)) === null || _ref$splice === void 0 ? void 0 : _ref$splice.map(point => {
                return [point.x, point.y];
              });
              //d.spatialReference = new esri.SpatialReference({ wkid: 102100 });
              return d;
            }).value();
            var index = -1;
            let featuresLengthTemp = JSON.parse(cadResponseCopy).length;
            Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["getPolygons"])(JSON.parse(cadResponseCopy), (polygon_project, esriModules, elem, key) => {
              var _this$props$currentMo, _this$props$currentMo2, _this$props$currentMo3, _this$props$currentMo4, _mainObject$landData49, _mainObject$landData50, _mainObject$landData51, _mainObject$landData52, _JSON$parse;
              var polygon = new esri.geometry.Polygon(plogs[key]);
              //check if in urban area boundry
              var successWithinFun = res => {
                if (res.features.length > 0) {
                  var cache = [];
                  let eliminateCircularRecursive = function (key, value) {
                    if (typeof value === "object" && value !== null) {
                      if (cache.indexOf(value) !== -1) {
                        // Circular reference found, discard key
                        return;
                      }
                      // Store value in our collection
                      cache.push(value);
                    }
                    return value;
                  };
                  //data.datasets = JSON.stringify(data.datasets, eliminateCircularRecursive);

                  res.features = JSON.parse(JSON.stringify(res.features, eliminateCircularRecursive));
                  this.state.isWithinUrbanBoundry = res.features;
                }
                //stepItem.isWithinUrbanBoundry = false;
                else {
                  this.state.isWithinUrbanBoundry = false;
                  this.resetStore();
                  window.notifySystem("error", t("messages:IS_NOT_WITHIN_URBAN_AREA_BOUNDRY"));
                  return;
                }

                // store.dispatch({type:'Show_Loading_new',loading: false});
              };
              if (mapLayers !== null && mapLayers !== void 0 && mapLayers.length && ((_this$props$currentMo = this.props.currentModule) === null || _this$props$currentMo === void 0 ? void 0 : (_this$props$currentMo2 = _this$props$currentMo.record) === null || _this$props$currentMo2 === void 0 ? void 0 : _this$props$currentMo2.app_id) == 16) {
                var _$find, _mainObject$landData27, _mainObject$landData28, _mainObject$landData29, _mainObject$landData30, _mainObject$landData31, _mainObject$landData32, _mainObject$landData33, _mainObject$landData34, _mainObject$landData35, _mainObject$landData36, _mainObject$landData37;
                //"Municipality_Boundary"

                Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["checkOverlappingFeaturesWithLayer"])(window.mapUrl + "/" + ((_$find = _.find(mapLayers, layer => {
                  return layer.name.toLowerCase() == "municipality_boundary";
                })) === null || _$find === void 0 ? void 0 : _$find.id), polygon, "MUNICIPALITY_NAME = " + ((mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData27 = mainObject.landData) === null || _mainObject$landData27 === void 0 ? void 0 : (_mainObject$landData28 = _mainObject$landData27.landData) === null || _mainObject$landData28 === void 0 ? void 0 : _mainObject$landData28.municipality_id) || (mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData29 = mainObject.landData) === null || _mainObject$landData29 === void 0 ? void 0 : (_mainObject$landData30 = _mainObject$landData29.landData) === null || _mainObject$landData30 === void 0 ? void 0 : (_mainObject$landData31 = _mainObject$landData30.municipality) === null || _mainObject$landData31 === void 0 ? void 0 : _mainObject$landData31.code) || (mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData32 = mainObject.landData) === null || _mainObject$landData32 === void 0 ? void 0 : (_mainObject$landData33 = _mainObject$landData32.landData) === null || _mainObject$landData33 === void 0 ? void 0 : (_mainObject$landData34 = _mainObject$landData33.lands) === null || _mainObject$landData34 === void 0 ? void 0 : (_mainObject$landData35 = _mainObject$landData34.parcels) === null || _mainObject$landData35 === void 0 ? void 0 : (_mainObject$landData36 = _mainObject$landData35[0]) === null || _mainObject$landData36 === void 0 ? void 0 : (_mainObject$landData37 = _mainObject$landData36.attributes) === null || _mainObject$landData37 === void 0 ? void 0 : _mainObject$landData37.MUNICIPALITY_NAME_Code)), this.map).then(res => {
                  var _mainObject$landData38, _mainObject$landData39, _mainObject$landData40, _mainObject$landData41, _mainObject$landData42, _mainObject$landData43, _mainObject$landData44, _mainObject$landData45, _mainObject$landData46, _mainObject$landData47, _mainObject$landData48, _res$features$2, _res$features$2$attri;
                  let municipality = (mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData38 = mainObject.landData) === null || _mainObject$landData38 === void 0 ? void 0 : (_mainObject$landData39 = _mainObject$landData38.landData) === null || _mainObject$landData39 === void 0 ? void 0 : _mainObject$landData39.municipality_id) || (mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData40 = mainObject.landData) === null || _mainObject$landData40 === void 0 ? void 0 : (_mainObject$landData41 = _mainObject$landData40.landData) === null || _mainObject$landData41 === void 0 ? void 0 : (_mainObject$landData42 = _mainObject$landData41.municipality) === null || _mainObject$landData42 === void 0 ? void 0 : _mainObject$landData42.code) || (mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData43 = mainObject.landData) === null || _mainObject$landData43 === void 0 ? void 0 : (_mainObject$landData44 = _mainObject$landData43.landData) === null || _mainObject$landData44 === void 0 ? void 0 : (_mainObject$landData45 = _mainObject$landData44.lands) === null || _mainObject$landData45 === void 0 ? void 0 : (_mainObject$landData46 = _mainObject$landData45.parcels) === null || _mainObject$landData46 === void 0 ? void 0 : (_mainObject$landData47 = _mainObject$landData46[0]) === null || _mainObject$landData47 === void 0 ? void 0 : (_mainObject$landData48 = _mainObject$landData47.attributes) === null || _mainObject$landData48 === void 0 ? void 0 : _mainObject$landData48.MUNICIPALITY_NAME_Code);
                  if ((res === null || res === void 0 ? void 0 : (_res$features$2 = res.features[0]) === null || _res$features$2 === void 0 ? void 0 : (_res$features$2$attri = _res$features$2.attributes) === null || _res$features$2$attri === void 0 ? void 0 : _res$features$2$attri.MUNICIPALITY_NAME) == municipality) {
                    var _$find2;
                    Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["checkOverlappingFeaturesWithLayer"])(window.mapUrl + "/" + ((_$find2 = _.find(mapLayers, layer => {
                      return layer.name.toLowerCase() == "urbanareaboundary";
                    })) === null || _$find2 === void 0 ? void 0 : _$find2.id), polygon, undefined, this.map).then(successWithinFun, res => {
                      this.state.isWithinUrbanBoundry = false;
                      this.resetMsa7yData();
                      //this.resetStore();
                      window.notifySystem("error", t("messages:IS_NOT_WITHIN_URBAN_AREA_BOUNDRY"), 10);
                    });
                  } else {
                    this.resetMsa7yData();
                    window.notifySystem("error", t("خارج نطاق البلدية المختارة"), 10);
                  }
                }, res => {
                  //this.state.isWithinUrbanBoundry = false;
                  this.resetMsa7yData();
                  window.notifySystem("error", t("خارج نطاق البلدية المختارة"), 10);
                });

                // queryTask({
                //   url:
                //     window.mapUrl +
                //     "/" +
                //     _.find(mapLayers, (layer) => {
                //       return layer.name.toLowerCase() == "urbanareaboundary";
                //     })?.id,
                //   where: "1=1",
                //   outFields: ["OBJECTID", "REMARKS"],
                //   callbackResult: successWithinFun,
                //   callbackError: () => {
                //     //    store.dispatch({type:'Show_Loading_new',loading: false});
                //     this.state.isWithinUrbanBoundry = false;
                //   },
                //   preQuery: (query, Query) => {
                //     if (polygon) {
                //       query.geometry = dojo.clone(polygon);
                //       query.spatialRelationship = Query.SPATIAL_REL_WITHIN;
                //     }
                //   },
                // });
              }
              if (mapLayers !== null && mapLayers !== void 0 && mapLayers.length && ((_this$props$currentMo3 = this.props.currentModule) === null || _this$props$currentMo3 === void 0 ? void 0 : (_this$props$currentMo4 = _this$props$currentMo3.record) === null || _this$props$currentMo4 === void 0 ? void 0 : _this$props$currentMo4.app_id) == 27) {
                Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["getInfo"])().then(res => {
                  this.state.isUnPlannedParcelIntersect = false;
                  Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["intersectQueryTask"])({
                    outFields: ["SUBMISSIONNO"],
                    geometry: polygon,
                    url: _mapviewer_config_map__WEBPACK_IMPORTED_MODULE_20__["mapUrl"] + "/" + res["UnplannedParcels"],
                    preQuery: (query, Query) => {
                      query.spatialRelationship = Query.SPATIAL_REL_INTERSECTS;
                    },
                    callbackResult: res => {
                      debugger;
                      if (res.features.length) {
                        this.state.isUnPlannedParcelIntersect = " ( " + res.features.filter(x => x.attributes.SUBMISSIONNO).map(x => x.attributes.SUBMISSIONNO).join(" , ") + " )";
                        this.setState({
                          isUnPlannedParcelIntersect: this.state.isUnPlannedParcelIntersect
                        });
                      }
                    },
                    errorCallbackResult: res => {
                      debugger;
                    }
                  });
                });
              }
              const {
                input
              } = this.props;
              const {
                isView
              } = this.props;

              // const {
              //   landData: {
              //     landData: {
              //       lands: { parcels },
              //     },
              //   },
              // } = mainObject;
              let requestType = mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData49 = mainObject.landData) === null || _mainObject$landData49 === void 0 ? void 0 : _mainObject$landData49.requestType;
              let parcels = mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData50 = mainObject.landData) === null || _mainObject$landData50 === void 0 ? void 0 : (_mainObject$landData51 = _mainObject$landData50.landData) === null || _mainObject$landData51 === void 0 ? void 0 : (_mainObject$landData52 = _mainObject$landData51.lands) === null || _mainObject$landData52 === void 0 ? void 0 : _mainObject$landData52.parcels;
              if (this.InvokedToAdParcel) {
                this.state.polygons.splice(!polygon_project.isFullBoundry ? this.state.polygons.length : 0, 0, {
                  parcel_name: "",
                  area: -1,
                  data: [{
                    name: "north",
                    data: [],
                    totalLength: 0
                  }, {
                    name: "east",
                    data: [],
                    totalLength: 0
                  }, {
                    name: "main",
                    data: [],
                    totalLength: 0
                  }, {
                    name: "west",
                    data: [],
                    totalLength: 0
                  }, {
                    name: "south",
                    data: [],
                    totalLength: 0
                  }]
                });
              }
              let isFullBoundryIndex = (_JSON$parse = JSON.parse(cadResponseCopy)) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.findIndex(cadParcel => cadParcel === null || cadParcel === void 0 ? void 0 : cadParcel.isFullBoundry);

              // key =
              // isFullBoundryIndex > -1 &&
              //   (isKrokyUpdateContract ||
              //     isUpdateContract ||
              //     this.props.currentModule.record.workflow_id == 2028)
              //     ? this.state.polygons.length - 1
              //     : 0;
              if (polygon_project.isFullBoundry) {
                var _cadOutOfSakBoundries, _cadHiddenOfSakBoundr, _this$props$mainObjec, _this$props$mainObjec2, _this$props$mainObjec3, _this$props$mainObjec4;
                this.state.polygons[key].parcel_name = "حدود المعاملة";
                this.state.polygons[key].isFullBoundry = true;
                this.state.polygons[key].area = !isLoading && +cadResponse.sum("area").toFixed(2) - (+(cadOutOfSakBoundriesResponse === null || cadOutOfSakBoundriesResponse === void 0 ? void 0 : (_cadOutOfSakBoundries = cadOutOfSakBoundriesResponse.sum("area")) === null || _cadOutOfSakBoundries === void 0 ? void 0 : _cadOutOfSakBoundries.toFixed(2)) || 0) - (+(cadHiddenOfSakBoundriesResponse === null || cadHiddenOfSakBoundriesResponse === void 0 ? void 0 : (_cadHiddenOfSakBoundr = cadHiddenOfSakBoundriesResponse.sum("area")) === null || _cadHiddenOfSakBoundr === void 0 ? void 0 : _cadHiddenOfSakBoundr.toFixed(2)) || 0) || ((_this$props$mainObjec = this.props.mainObject) === null || _this$props$mainObjec === void 0 ? void 0 : (_this$props$mainObjec2 = _this$props$mainObjec.data_msa7y) === null || _this$props$mainObjec2 === void 0 ? void 0 : (_this$props$mainObjec3 = _this$props$mainObjec2.msa7yData) === null || _this$props$mainObjec3 === void 0 ? void 0 : (_this$props$mainObjec4 = _this$props$mainObjec3.cadDetails) === null || _this$props$mainObjec4 === void 0 ? void 0 : _this$props$mainObjec4.temp["area" + key]);
              } else {
                var _cadOutOfSakBoundries2, _cadHiddenOfSakBoundr2, _this$props$mainObjec5, _this$props$mainObjec6, _this$props$mainObjec7, _this$props$mainObjec8, _parcels, _parcels$attributes;
                this.state.polygons[key].area = !isLoading && (isFullBoundryIndex == -1 && elem.area - (+(cadOutOfSakBoundriesResponse === null || cadOutOfSakBoundriesResponse === void 0 ? void 0 : (_cadOutOfSakBoundries2 = cadOutOfSakBoundriesResponse.sum("area")) === null || _cadOutOfSakBoundries2 === void 0 ? void 0 : _cadOutOfSakBoundries2.toFixed(2)) || 0) - (+(cadHiddenOfSakBoundriesResponse === null || cadHiddenOfSakBoundriesResponse === void 0 ? void 0 : (_cadHiddenOfSakBoundr2 = cadHiddenOfSakBoundriesResponse.sum("area")) === null || _cadHiddenOfSakBoundr2 === void 0 ? void 0 : _cadHiddenOfSakBoundr2.toFixed(2)) || 0) || elem.area) || ((_this$props$mainObjec5 = this.props.mainObject) === null || _this$props$mainObjec5 === void 0 ? void 0 : (_this$props$mainObjec6 = _this$props$mainObjec5.data_msa7y) === null || _this$props$mainObjec6 === void 0 ? void 0 : (_this$props$mainObjec7 = _this$props$mainObjec6.msa7yData) === null || _this$props$mainObjec7 === void 0 ? void 0 : (_this$props$mainObjec8 = _this$props$mainObjec7.cadDetails) === null || _this$props$mainObjec8 === void 0 ? void 0 : _this$props$mainObjec8["area" + key]) || this.state.polygons[key].area > 0 && this.state.polygons[key].area || Math.abs(+elem.area.toFixed(2)) || "";
                if (this.state.isUpdateContract && !lodash_isEmpty__WEBPACK_IMPORTED_MODULE_10___default()(this.state.polygons[key].parcel_name)) {
                  this.state.polygons[key].parcel_name = lodash_isEmpty__WEBPACK_IMPORTED_MODULE_10___default()(this.state[`parcelSliceNo${key}`]) ? this.state[`parcel_name${key}`] : `${this.state[`parcelSliceNo${key}`]}/${this.state[`parcel_name${key}`]}`;

                  // if (this.state.polygons[key]?.position) {
                  //   redrawNames(
                  //     this.state.polygons[key],
                  //     this.map,
                  //     setParcelName([
                  //       this.state["parcel_name" + key],
                  //       this.state["parcelSliceNo" + key],
                  //     ]),
                  //     "PacrelNoGraphicLayer",
                  //     key
                  //   );
                  // }
                } else if ((this.state.isUpdateContract || this.state.isKrokyUpdateContract || this.state.isTadkekMesahy) && lodash_isEmpty__WEBPACK_IMPORTED_MODULE_10___default()(this.state.polygons[key].parcel_name)) {
                  this.state[`parcelSliceNo${key}`] = "";
                  this.state.polygons[key].parcel_name = this.state.isKrokyUpdateContract && !this.state.isTadkekMesahy ? `أرض رقم ${key}` : `أرض رقم ${key + 1}`;
                  this.state[`parcel_name${key}`] = this.state.polygons[key].parcel_name;
                  this.state[`parcel_name${key}`] = undefined;
                } else if (!this.state.isKrokyUpdateContract && !this.state.isUpdateContract) this.state.polygons[key].parcel_name = ((_parcels = parcels[isFullBoundryIndex > -1 ? key - 1 : key]) === null || _parcels === void 0 ? void 0 : (_parcels$attributes = _parcels.attributes) === null || _parcels$attributes === void 0 ? void 0 : _parcels$attributes.PARCEL_PLAN_NO) || "";
              }
              this.state.polygons[key].polygon_unprojected = unPolgyons[key];
              this.state.polygons[key].polygon_unprojected.polylines = [];
              this.state.polygons[key].notify = polygon_project.notify;
              this.state.polygons[key].polygon = polygon;
              this.state.polygons[key].min;
              this.state.polygons[key].max = 0;
              this.state.polygons[key].maxPointLineLen;
              this.state.polygons[key].minPointLineLen;
              this.state.polygons[key].minLineLen;
              if (polygon.rings.length > 0) {
                var arcLength = 0;
                var arcPoints = [];
                var arcLines = [];
                for (var j = 0, n = polygon.rings[0].length - 1; j < n; j++) {
                  var _cadResults$data$27, _cadResults$data$28, _cadResults$data$33, _cadResults$data$34, _cadResults$data$38, _cadResults$data$39, _cadResults$data$41, _cadResults$data$42, _cadResults$data$46;
                  var point1 = new esri.geometry.Point(polygon.rings[0][j][0], polygon.rings[0][j][1]);
                  var point2 = new esri.geometry.Point(polygon.rings[0][j + 1][0], polygon.rings[0][j + 1][1]);
                  var point1_project = new esri.geometry.Point(polygon_project.rings[0][j][0], polygon_project.rings[0][j][1]);
                  var point2_project = new esri.geometry.Point(polygon_project.rings[0][j + 1][0], polygon_project.rings[0][j + 1][1]);
                  var length = +esriModules.mathUtils.getLength(point1_project, point2_project);
                  //.toFixed(2);
                  //length = Number(parseFloat(length).toFixed(2));

                  if (point1.x > this.state.polygons[key].max) {
                    this.state.polygons[key].max = point1.x;
                    this.state.polygons[key].maxPoint = point1;
                  }
                  if (!this.state.polygons[key].min || point1.x < this.state.polygons[key].min) {
                    this.state.polygons[key].min = point1.x;
                    this.state.polygons[key].minPoint = point1;
                  }
                  if (point2.x > this.state.polygons[key].max) {
                    this.state.polygons[key].max = point2.x;
                    this.state.polygons[key].maxPoint = point2;
                  }
                  if (!this.state.polygons[key].min || point2.x < this.state.polygons[key].min) {
                    this.state.polygons[key].min = point2.x;
                    this.state.polygons[key].minPoint = point2;
                  }
                  var path = {
                    paths: [[polygon.rings[0][j], polygon.rings[0][j + 1]]],
                    text: length,
                    spatialReference: polygon.spatialReference
                  };
                  if (!(Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])(point1, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$27 = cadResults.data[0]) === null || _cadResults$data$27 === void 0 ? void 0 : _cadResults$data$27.cadFeatures) && Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])(point2, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$28 = cadResults.data[0]) === null || _cadResults$data$28 === void 0 ? void 0 : _cadResults$data$28.cadFeatures))) {
                    var _cadResults$data$29;
                    if (Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])(point2, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$29 = cadResults.data[0]) === null || _cadResults$data$29 === void 0 ? void 0 : _cadResults$data$29.cadFeatures)) {
                      var _cadResults$data$30, _cadResults$data$30$b;
                      arcLength += length;
                      arcPoints.push(point1);
                      path = new esriModules.Polyline(path);
                      path.centroid = path.getExtent().getCenter();
                      arcLines.push(new esriModules.Polyline(path));
                      path.text = arcLength || length;
                      if ((cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$30 = cadResults.data[0]) === null || _cadResults$data$30 === void 0 ? void 0 : (_cadResults$data$30$b = _cadResults$data$30.boundryFeaturesLen) === null || _cadResults$data$30$b === void 0 ? void 0 : _cadResults$data$30$b.length) > 0) {
                        var _cadResults$data$31, _cadResults$data$32;
                        var line = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["getLineLength"])(cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$31 = cadResults.data[0]) === null || _cadResults$data$31 === void 0 ? void 0 : _cadResults$data$31.boundryFeaturesLen, arcPoints[0], point2, (cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$32 = cadResults.data[0]) === null || _cadResults$data$32 === void 0 ? void 0 : _cadResults$data$32.isArc) || false);
                        if (line) path.text = line.length;
                      }
                      length = path.text;
                      path.lines = arcLines;
                      arcLines = [];
                      arcLength = 0;
                      this.state.polygons[key].data[2].data.push(JSON.parse(JSON.stringify(path)));
                      this.state.polygons[key].data[2].data[this.state.polygons[key].data[2].data.length - 1].centroid = path.getExtent().getCenter();
                    } else {
                      arcLength += length;
                      arcPoints.push(point1);
                      path = new esriModules.Polyline(path);
                      var polyline = new esriModules.Polyline(path);
                      path.centroid = polyline.getExtent().getCenter();
                      arcLines.push(new esriModules.Polyline(path));
                      path.hide = true;
                      // if (
                      //   this.state.isKrokyUpdateContract ||
                      //   this.state.isUpdateContract
                      // ) {
                      //   this.state.polygons[key].data[2].data.push(
                      //     JSON.parse(JSON.stringify(path))
                      //   );
                      //   this.state.polygons[key].data[2].data[
                      //     this.state.polygons[key].data[2].data.length - 1
                      //   ].centroid = path.getExtent().getCenter();
                      // } else {
                      //   path.hide = true;
                      // }
                    }
                  }
                  if (Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])(point1, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$33 = cadResults.data[0]) === null || _cadResults$data$33 === void 0 ? void 0 : _cadResults$data$33.cadFeatures) && Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])(point2, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$34 = cadResults.data[0]) === null || _cadResults$data$34 === void 0 ? void 0 : _cadResults$data$34.cadFeatures)) {
                    var _cadResults$data$35, _cadResults$data$35$b;
                    if ((cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$35 = cadResults.data[0]) === null || _cadResults$data$35 === void 0 ? void 0 : (_cadResults$data$35$b = _cadResults$data$35.boundryFeaturesLen) === null || _cadResults$data$35$b === void 0 ? void 0 : _cadResults$data$35$b.length) > 0) {
                      var _cadResults$data$36, _cadResults$data$37;
                      var line = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["getLineLength"])(cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$36 = cadResults.data[0]) === null || _cadResults$data$36 === void 0 ? void 0 : _cadResults$data$36.boundryFeaturesLen, point1, point2, (cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$37 = cadResults.data[0]) === null || _cadResults$data$37 === void 0 ? void 0 : _cadResults$data$37.isArc) || false);
                      if (line) path.text = line.length;
                      length = path.text;
                    }
                    this.state.polygons[key].data[2].data.push(JSON.parse(JSON.stringify(path)));
                    this.state.polygons[key].polygon_unprojected.polylines.push(path);
                  }
                  var polyline = new esriModules.Polyline(path);
                  if (!this.state.polygons[key].minLineLen || this.state.polygons[key].minLineLen > length) this.state.polygons[key].minLineLen = length;
                  var pt = polyline.getExtent().getCenter();
                  if (!(Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])(point1, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$38 = cadResults.data[0]) === null || _cadResults$data$38 === void 0 ? void 0 : _cadResults$data$38.cadFeatures) && Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])(point2, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$39 = cadResults.data[0]) === null || _cadResults$data$39 === void 0 ? void 0 : _cadResults$data$39.cadFeatures))) {
                    var _cadResults$data$40;
                    if (Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])(point2, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$40 = cadResults.data[0]) === null || _cadResults$data$40 === void 0 ? void 0 : _cadResults$data$40.cadFeatures)) {
                      if (arcPoints.length) pt = arcPoints[Math.floor(arcPoints.length / 2)];
                    }
                  }
                  if (Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])(point1, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$41 = cadResults.data[0]) === null || _cadResults$data$41 === void 0 ? void 0 : _cadResults$data$41.cadFeatures) && Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])(point2, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$42 = cadResults.data[0]) === null || _cadResults$data$42 === void 0 ? void 0 : _cadResults$data$42.cadFeatures)) {
                    this.state.polygons[key].data[2].data[this.state.polygons[key].data[2].data.length - 1].centroid = pt;
                  }
                  Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["addGraphicToLayer"])(polyline, this.map, "boundriesGraphicLayer", null, null, null, response => {
                    var _this$props, _this$props$currentMo5, _this$props2, _this$props2$currentM, _this$props2$currentM2;
                    let app_id = ((_this$props = this.props) === null || _this$props === void 0 ? void 0 : (_this$props$currentMo5 = _this$props.currentModule) === null || _this$props$currentMo5 === void 0 ? void 0 : _this$props$currentMo5.app_id) || ((_this$props2 = this.props) === null || _this$props2 === void 0 ? void 0 : (_this$props2$currentM = _this$props2.currentModule) === null || _this$props2$currentM === void 0 ? void 0 : (_this$props2$currentM2 = _this$props2$currentM.record) === null || _this$props2$currentM2 === void 0 ? void 0 : _this$props2$currentM2.app_id);
                    if ([14, 8].indexOf(app_id) != -1 || [14, 8].indexOf(app_id) != -1) {
                      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["resizeMap"])(this.map, app_id == 8 && 10 || this.state["zoomRatio"]);
                    } else {
                      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["zoomToLayer"])("boundriesGraphicLayer", this.map, this.state["zoomRatio"]);
                    }
                  });
                  if (pt.length) {
                    pt.x = pt[0];
                    pt.y = pt[1];
                  }
                  var ang;
                  if (!isBoundry) {
                    ang = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["computeLineAngle"])(polygon.rings[0][j], polygon.rings[0][j + 1], polygon.getExtent().getCenter());
                  }
                  var attr = {
                    text: length,
                    angle: ang
                  };

                  // because there were similarity between points in fraction part 123.4567 , 123.4512
                  if (!(pointsLength.indexOf(pt.x.toFixed(4) + "," + pt.y.toFixed(4)) > -1 && !polygon_project.isFullBoundry)) {
                    var _cadResults$data$43, _cadResults$data$44, _cadResults$data$45;
                    if (Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])(point1, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$43 = cadResults.data[0]) === null || _cadResults$data$43 === void 0 ? void 0 : _cadResults$data$43.cadFeatures) && Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])(point2, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$44 = cadResults.data[0]) === null || _cadResults$data$44 === void 0 ? void 0 : _cadResults$data$44.cadFeatures)) {
                      pointsLength.push(pt.x.toFixed(4) + "," + pt.y.toFixed(4));
                      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["addParcelNo"])(pt, this.map, "" + parseFloat(length.toFixed(2)) + "", "editlengthGraphicLayer", lineLengthFont, null, ang, polygon_project.isFullBoundry ? Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["getLengthOffset"])(pt, this.state.polygons[key]) : null, attr);
                    } else if (Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])(point2, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$45 = cadResults.data[0]) === null || _cadResults$data$45 === void 0 ? void 0 : _cadResults$data$45.cadFeatures)) {
                      //
                      if (arcPoints.length) {
                        pt = arcPoints[Math.floor(arcPoints.length / 2)];
                        //pt.spatialReference.wkid = 102100;
                      }
                      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["addParcelNo"])(pt, this.map, "" + parseFloat(length.toFixed(2)) + "", "editlengthGraphicLayer", lineLengthFont, null, ang, polygon_project.isFullBoundry ? Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["getLengthOffset"])(pt, this.state.polygons[key]) : null, attr);
                    }
                  }
                  if (Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])(point2, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$46 = cadResults.data[0]) === null || _cadResults$data$46 === void 0 ? void 0 : _cadResults$data$46.cadFeatures)) {
                    points = [];
                    arcPoints.forEach(point => {
                      points.push(esri.geometry.toScreenPoint(this.map.extent, this.map.width, this.map.height, new esri.geometry.Point(point[0], point[1], new esri.SpatialReference({
                        wkid: polygon.spatialReference
                      }))));
                    });
                    //
                    arcPoints = [];
                  }
                }
                if (outRange) {
                  this.state.outRange = true;
                }
                if (notify) {
                  //
                  // isConfirmed = false;
                  // hasNotify = true;
                  this.state.isConfirmed = false;
                  this.state.hasNotify = true;
                  if (!this.state.isTadkekMesahy) {
                    Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["addGraphicToLayer"])(polygon, this.map, "addedParclGraphicLayer", null, null);
                  }
                } else {
                  if (!this.state.isTadkekMesahy) {
                    Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["addGraphicToLayer"])(polygon, this.map, "addedParclGraphicLayer", null, null, true);
                  }
                }
              }
              if (this.state.isTadkekMesahy && !this.state.polygons[key].isFullBoundry) {
                this.state.polygons[key].position = this.state.polygons[key].polygon.getCentroid();
                Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["redrawNames"])(this.state.polygons[key], this.map, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["setParcelName"])([this.state["parcel_name" + key], this.state["parcelSliceNo" + key]]), "PacrelUnNamedGraphicLayer", key);
              }
              if (this.state.isTadkekMesahy && featuresLengthTemp == 2 && key == 1) {
                //this.state.polygons = [{ ...this.state.polygons[1] }];
              }
            });
            var cadifArcResponsePoints = _.chain(cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$47 = cadResults.data[0]) === null || _cadResults$data$47 === void 0 ? void 0 : _cadResults$data$47.shapeFeatures).map((polygon, key) => {
              return polygon.rings[0].map(point => {
                var _cadResults$data$48;
                if (Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["isPointOrArc"])({
                  x: point[0],
                  y: point[1]
                }, key, cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$48 = cadResults.data[0]) === null || _cadResults$data$48 === void 0 ? void 0 : _cadResults$data$48.cadFeatures)) {
                  return new esri.geometry.Point(point[0], point[1], new esri.SpatialReference(polygon.spatialReference));
                } else return null;
              });
            }).flatten(true).value();
            cadifArcResponsePoints = cadifArcResponsePoints.filter(n => {
              return n != null;
            });
            Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["project"])(cadifArcResponsePoints, 4326, points => {
              if (points) {
                var polygons_unprojected = _.chain(unPolgyons).map(d => {
                  d.rings[0] = points === null || points === void 0 ? void 0 : points.splice(0, d.rings[0].length);
                  d.spatialReference = new esri.SpatialReference({
                    wkid: 4326
                  });
                  return d;
                }).value();
                Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["getPolygons"])(polygons_unprojected, (polygon_WGS84, esriModules, elem, key) => {
                  if (this.state.polygons[key]) {
                    var _this$state$polygons$, _this$state$polygons$2, _this$state$polygons$3;
                    (_this$state$polygons$ = this.state.polygons[key]) === null || _this$state$polygons$ === void 0 ? void 0 : (_this$state$polygons$2 = _this$state$polygons$.polygon_unprojected) === null || _this$state$polygons$2 === void 0 ? void 0 : (_this$state$polygons$3 = _this$state$polygons$2.rings) === null || _this$state$polygons$3 === void 0 ? void 0 : _this$state$polygons$3.forEach((rings, index) => {
                      this.state.polygons[key].polygon_unprojected.rings[index] = polygon_WGS84.rings[index];
                    });
                  }
                });
              }
              Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["project"])(cadResponseOutOfSakBoundriesPoints, 32639, points => {
                if (points) {
                  var plogs = _.chain(JSON.parse(cadResponseOutOfSakBoundriesCopy)).map(d => {
                    var _ref2, _ref2$splice;
                    d.rings[0] = (_ref2 = Array.isArray(points[0]) && points[0] || points) === null || _ref2 === void 0 ? void 0 : (_ref2$splice = _ref2.splice(0, d.rings[0].length)) === null || _ref2$splice === void 0 ? void 0 : _ref2$splice.map(point => {
                      return [point.x, point.y];
                    });
                    //d.spatialReference = new esri.SpatialReference({ wkid: 102100 });
                    return d;
                  }).value();
                  Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["getPolygons"])(JSON.parse(cadResponseOutOfSakBoundriesCopy), (polygon_project, esriModules, elem, key) => {
                    var polygon = new esri.geometry.Polygon(plogs[key]);
                    if (!this.state.isTadkekMesahy) {
                      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["addGraphicToLayer"])(polygon, this.map, "addedParclGraphicLayer", null, null);
                    }
                  });
                }
              });
              if (this.InvokedToAdParcel) {
                this.getSuggestLine();
              }
            });

            //this.state.this.state.polygons : _.sortBy(this.state.polygons, (d) => { return d.polygon && !d.polygon.isFullBoundry }) });
          }
        }, true);
        var details = [];
        //draw details
        cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$49 = cadResults.data[0]) === null || _cadResults$data$49 === void 0 ? void 0 : (_cadResults$data$49$d = _cadResults$data$49.details) === null || _cadResults$data$49$d === void 0 ? void 0 : _cadResults$data$49$d.forEach((appart, appartNumber) => {
          var polyline = new esri.geometry.Polyline(appart);
          details.push(polyline);
        });
        var detailsCopy = JSON.parse(JSON.stringify(details));
        if (details && details.length > 0 && this.InvokedToAdParcel) {
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["project"])(details, 32639, details_Projected => {
            if (details_Projected) {
              (Array.isArray(details_Projected[0]) && details_Projected[0] || details_Projected).forEach((parcel, index) => {
                //parcel.spatialReference = new esri.SpatialReference({ wkid: 102100 });

                if (parcel.getExtent()) {
                  var pt = parcel.getExtent().getCenter();
                  Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["addGraphicToLayer"])(parcel, this.map, "detailedGraphicLayer", Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["getColorFromCadIndex"])(detailsCopy[index].color), null, null, response => {
                    var _this$props3, _this$props3$currentM, _this$props4, _this$props4$currentM, _this$props4$currentM2;
                    let app_id = ((_this$props3 = this.props) === null || _this$props3 === void 0 ? void 0 : (_this$props3$currentM = _this$props3.currentModule) === null || _this$props3$currentM === void 0 ? void 0 : _this$props3$currentM.app_id) || ((_this$props4 = this.props) === null || _this$props4 === void 0 ? void 0 : (_this$props4$currentM = _this$props4.currentModule) === null || _this$props4$currentM === void 0 ? void 0 : (_this$props4$currentM2 = _this$props4$currentM.record) === null || _this$props4$currentM2 === void 0 ? void 0 : _this$props4$currentM2.app_id);
                    if ([14, 8].indexOf(app_id) != -1 || [14, 8].indexOf(app_id) != -1) {
                      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["resizeMap"])(this.map, app_id == 8 && 10 || this.state["zoomRatio"]);
                    } else {
                      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["zoomToLayer"])("detailedGraphicLayer", this.map, this.state["zoomRatio"]);
                    }
                  });
                }
              });

              // if (details) {
              //     zoomToLayer("detailedGraphicLayer", this.map, this.state["zoomRatio"]);
              // }
              // else
              //     zoomToLayer("boundriesGraphicLayer", this.map, this.state["zoomRatio"]);
            }
          }, true);
        }
        var annotations = [];
        cadResults === null || cadResults === void 0 ? void 0 : (_cadResults$data$50 = cadResults.data[0]) === null || _cadResults$data$50 === void 0 ? void 0 : (_cadResults$data$50$a = _cadResults$data$50.annotations) === null || _cadResults$data$50$a === void 0 ? void 0 : _cadResults$data$50$a.forEach(annotation => {
          var point = new esri.geometry.Point(annotation.shape);
          point.text = annotation.text;
          point.angle = annotation.angle;
          annotations.push(point);
        });
        var annotationsCopy = JSON.parse(JSON.stringify(annotations));
        if (annotations && annotations.length > 0 && this.InvokedToAdParcel) {
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["project"])(annotations, 32639, annotations_Projected => {
            if (annotations_Projected) {
              (Array.isArray(annotations_Projected[0]) && annotations_Projected[0] || annotations_Projected).forEach((annotation, index) => {
                //annotation.spatialReference = new esri.SpatialReference({ wkid: 102100 });

                var text = annotationsCopy[index].text;
                if (annotationsCopy[index].text.indexOf("شارع") > -1) {
                  var extractNmber = annotationsCopy[index].text.match(/[\d\.]+/);
                  if (extractNmber && extractNmber.length > 0) {
                    extractNmber = extractNmber[0];
                    annotationsCopy[index].text = annotationsCopy[index].text.replace(extractNmber, extractNmber.split("").join(""));
                  }
                  text = annotationsCopy[index].text;
                }
                if (Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["HasArabicCharacters"])(annotationsCopy[index].text)) text = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["reverse"])(annotationsCopy[index].text);
                if (annotationsCopy[index].text.indexOf("شارع") > -1) {
                  Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["addParcelNo"])(annotation, this.map, text, "detailedGraphicLayer", annotationLength, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["getColorFromCadIndex"])(annotationsCopy[index].color), 360 - (annotationsCopy[index].angle || 0), null, null, true);
                } else {
                  Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["addParcelNo"])(annotation, this.map, text, "detailedGraphicLayer", annotationLength, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["getColorFromCadIndex"])(annotationsCopy[index].color), 360 - (annotationsCopy[index].angle || 0), null, null);
                }
              });
            }
          }, true);
        }

        //cadResults.data = this.state.polygons;

        //this.state.demSaveDraft = false;
        this.state.demSaveDraft = false;
        if (!this.state.hasNotify && isLoading) {
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "addedParclGraphicLayer");
          if (!hideDrag) {
            this.getSuggestLine();
          } else {
            //this.state.isConfirmed = false;
            this.state.isConfirmed = false;
          }
          this.state.polygons.forEach((elem, key) => {
            if (!this.state.isTadkekMesahy) {
              Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["addGraphicToLayer"])(elem.polygon, this.map, "addedParclGraphicLayer", null, null, true);
            }
          });
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["zoomToIdentifyParcel"])(this.map);
        }
      } //else {
      //   window.notifySystem('warning', t('خارج نطاق البلدية الرئيسية'))
      //   return;
      // }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "clearInputs", () => {
      const {
        inputs
      } = this.props;
      this.state.polygons.forEach((polygon, index) => {
        this.state["westBoundries" + index] = [];
        this.state["northBoundries" + index] = [];
        this.state["eastBoundries" + index] = [];
        this.state["southBoundries" + index] = [];
        inputs.north.forEach((input, key) => {
          this.state[input.name + index] = "";
        });
        inputs.east.forEach((input, key) => {
          this.state[input.name + index] = "";
        });
        inputs.west.forEach((input, key) => {
          this.state[input.name + index] = "";
        });
        inputs.south.forEach((input, key) => {
          this.state[input.name + index] = "";
        });
        this.state["area" + index] = "";
        this.state["area_text" + index] = "";
        this.state["parcelSliceNo" + index] = "";
        this.state["parcel_name" + index] = "";
        this.state["duplixType" + index] = "";
        this.state["parcel_name" + index] = "";
        if (this.state.isUpdateContract) {
          polygon.survayParcelCutter = [{
            direction: "الشطفة",
            NORTH_EAST_DIRECTION: "",
            NORTH_WEST_DIRECTION: "",
            SOUTH_EAST_DIRECTION: "",
            SOUTH_WEST_DIRECTION: ""
          }];
          this.state[`have_electric_room${index}`] = false;
          this.state[`electric_room_area${index}`] = "";
          this.state[`electric_room_place${index}`] = "";
        }
      });
      this.state["have_electric_room"] = false;
      this.state["electric_room_area"] = "";
      //this.state["electric_room_place"] = "";

      this.state.polygons = [];
      this.state.pointsLength = [];
      this.state.cadFiles = {};
      this.state.layerParcels = [];
      this.state.planDescription = "";
      this.state.activeKey = "1";
      this.state.isWithinUrbanBoundry = true;
      this.state.isUnPlannedParcelIntersect = false;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "resetMsa7yData", () => {
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["resetMapData"])(this.map);
      this.resetStore();
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "checkOverlayFeatures", (boundry, parcels) => {
      let found = false;
      parcels.forEach(parcel => {
        if (Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["CheckShapeOverlapWithBoundry"])(boundry[0], parcel.geometry)) {
          found = true;
        }
      });
      return found;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "reApplyTadkekMsa7yData", mainObject => {
      var _mainObject$data_msa, _mainObject$data_msa$, _mainObject$landData53, _mainObject$landData54, _mainObject$landData55, _mainObject$landData56;
      let cadDetails = mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$data_msa = mainObject.data_msa7y) === null || _mainObject$data_msa === void 0 ? void 0 : (_mainObject$data_msa$ = _mainObject$data_msa.msa7yData) === null || _mainObject$data_msa$ === void 0 ? void 0 : _mainObject$data_msa$.cadDetails;
      let props = this.props;
      const {
        data_msa7y: {
          msa7yData: {
            cadDetails: {
              suggestionsParcels,
              temp
            }
          }
        }
      } = mainObject;
      let requestType = mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData53 = mainObject.landData) === null || _mainObject$landData53 === void 0 ? void 0 : _mainObject$landData53.requestType;
      let parcels = mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData54 = mainObject.landData) === null || _mainObject$landData54 === void 0 ? void 0 : (_mainObject$landData55 = _mainObject$landData54.landData) === null || _mainObject$landData55 === void 0 ? void 0 : (_mainObject$landData56 = _mainObject$landData55.lands) === null || _mainObject$landData56 === void 0 ? void 0 : _mainObject$landData56.parcels;
      const {
        inputs
      } = props;
      if (cadDetails) {
        var _props$currentModule, _props$currentModule2, _props$currentModule3, _props$currentModule4, _props$currentModule5, _props$currentModule6, _cadDetails$temp, _props$currentModule7, _props$currentModule8, _props$currentModule9, _props$currentModule10, _props$currentModule11, _props$currentModule12, _props$currentModule13, _props$currentModule14, _props$currentModule15, _props$currentModule16, _props$currentModule17, _props$currentModule18, _props$currentModule19, _props$currentModule20, _props$currentModule21, _props$currentModule22, _cadDetails$temp2, _cadDetails$temp3, _cadDetails$temp4, _cadDetails$temp5, _cadDetails$temp6, _cadDetails$temp7, _cadDetails$temp8;
        suggestionsParcels.forEach((element, index) => {
          let landDataParcel = parcels.find(r => r.geometry && new esri.geometry.Polygon(element.polygon).contains(new esri.geometry.Polygon(r.geometry).getExtent().getCenter()));
          if (landDataParcel) {
            var _element$area;
            if (element.parcel_name != "حدود المعاملة") {
              var _landDataParcel$parce, _landDataParcel$parce2, _landDataParcel$parce3, _landDataParcel$parce4, _landDataParcel$parce5, _landDataParcel$parce6;
              element.survayParcelCutter = [{
                direction: "الشطفة",
                NORTH_EAST_DIRECTION: (landDataParcel === null || landDataParcel === void 0 ? void 0 : (_landDataParcel$parce = landDataParcel.parcelShatfa) === null || _landDataParcel$parce === void 0 ? void 0 : _landDataParcel$parce.SHATFA_NORTH_EAST_DIRECTION) || "",
                NORTH_WEST_DIRECTION: (landDataParcel === null || landDataParcel === void 0 ? void 0 : (_landDataParcel$parce2 = landDataParcel.parcelShatfa) === null || _landDataParcel$parce2 === void 0 ? void 0 : _landDataParcel$parce2.SHATFA_NORTH_WEST_DIRECTION) || "",
                SOUTH_EAST_DIRECTION: (landDataParcel === null || landDataParcel === void 0 ? void 0 : (_landDataParcel$parce3 = landDataParcel.parcelShatfa) === null || _landDataParcel$parce3 === void 0 ? void 0 : _landDataParcel$parce3.SHATFA_SOUTH_EAST_DIRECTION) || "",
                SOUTH_WEST_DIRECTION: (landDataParcel === null || landDataParcel === void 0 ? void 0 : (_landDataParcel$parce4 = landDataParcel.parcelShatfa) === null || _landDataParcel$parce4 === void 0 ? void 0 : _landDataParcel$parce4.SHATFA_SOUTH_WEST_DIRECTION) || ""
              }];
              this.state["electric_room_area" + index] = (landDataParcel === null || landDataParcel === void 0 ? void 0 : (_landDataParcel$parce5 = landDataParcel.parcelElectric) === null || _landDataParcel$parce5 === void 0 ? void 0 : _landDataParcel$parce5.electric_room_area) || "";
              this.state["electric_room_place" + index] = (landDataParcel === null || landDataParcel === void 0 ? void 0 : (_landDataParcel$parce6 = landDataParcel.parcelElectric) === null || _landDataParcel$parce6 === void 0 ? void 0 : _landDataParcel$parce6.electric_room_place) || "";
            }
            element.attributes = {
              ...landDataParcel.attributes
            };
            // element.attributes.PARCEL_PLAN_NO = element.parcel_name;
            element.attributes.PARCEL_AREA = ((_element$area = +element.area) === null || _element$area === void 0 ? void 0 : _element$area.toFixed(2)) || "0";
            // element.parcelData = { ...landDataParcel.parcelData };
          }
          inputs.north.forEach((input, key) => {
            this.state[input.name + index] = temp[input.name + index] || "";
          });
          inputs.east.forEach((input, key) => {
            this.state[input.name + index] = temp[input.name + index] || "";
          });
          inputs.west.forEach((input, key) => {
            this.state[input.name + index] = temp[input.name + index] || "";
          });
          inputs.south.forEach((input, key) => {
            this.state[input.name + index] = temp[input.name + index] || "";
          });
          this.state["parcelSliceNo" + index] = requestType != 2 ? temp["parcelSliceNo" + index] || "" : "";
          this.state["parcel_name" + index] = element.parcel_name || temp["parcelName" + index] || "";
          this.state["area_text" + index] = temp["area_text" + index] || "";
        });
        this.recalculateBoundries(suggestionsParcels, obj => {
          Object.keys(obj).forEach(key => {
            this.state[key] = obj[key];
          });
        });
        let obj = {
          viewNumbersOnly: Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["checkImportedMainObject"])(props) != undefined && true || false,
          zoomRatio: [2028, 2029, 2191].indexOf((props === null || props === void 0 ? void 0 : (_props$currentModule = props.currentModule) === null || _props$currentModule === void 0 ? void 0 : _props$currentModule.workflow_id) || (props === null || props === void 0 ? void 0 : (_props$currentModule2 = props.currentModule) === null || _props$currentModule2 === void 0 ? void 0 : (_props$currentModule3 = _props$currentModule2.record) === null || _props$currentModule3 === void 0 ? void 0 : _props$currentModule3.workflow_id)) != -1 || (props === null || props === void 0 ? void 0 : (_props$currentModule4 = props.currentModule) === null || _props$currentModule4 === void 0 ? void 0 : _props$currentModule4.app_id) == 14 || (props === null || props === void 0 ? void 0 : (_props$currentModule5 = props.currentModule) === null || _props$currentModule5 === void 0 ? void 0 : (_props$currentModule6 = _props$currentModule5.record) === null || _props$currentModule6 === void 0 ? void 0 : _props$currentModule6.app_id) == 14 ? 10 : 25,
          isConfirmed: true,
          outRange: null,
          hasNotify: false,
          pointsLength: [],
          annotationLength: 17,
          polygons: suggestionsParcels || [],
          demSaveDraft: false,
          cadFiles: {},
          layerParcels: [],
          planDescription: (cadDetails === null || cadDetails === void 0 ? void 0 : cadDetails.planDescription) || "",
          activeKey: "1",
          isWithinUrbanBoundry: (cadDetails === null || cadDetails === void 0 ? void 0 : cadDetails.isWithinUrbanBoundry) || null,
          isUnPlannedParcelIntersect: (cadDetails === null || cadDetails === void 0 ? void 0 : cadDetails.isUnPlannedParcelIntersect) || false,
          cadResults: (cadDetails === null || cadDetails === void 0 ? void 0 : cadDetails.temp) && (cadDetails === null || cadDetails === void 0 ? void 0 : (_cadDetails$temp = cadDetails.temp) === null || _cadDetails$temp === void 0 ? void 0 : _cadDetails$temp.cadResults) || undefined,
          isKrokyUpdateContract: ((props === null || props === void 0 ? void 0 : (_props$currentModule7 = props.currentModule) === null || _props$currentModule7 === void 0 ? void 0 : _props$currentModule7.app_id) || (props === null || props === void 0 ? void 0 : (_props$currentModule8 = props.currentModule) === null || _props$currentModule8 === void 0 ? void 0 : (_props$currentModule9 = _props$currentModule8.record) === null || _props$currentModule9 === void 0 ? void 0 : _props$currentModule9.app_id)) == 8 || false,
          isTadkekMesahy: [29].indexOf((props === null || props === void 0 ? void 0 : (_props$currentModule10 = props.currentModule) === null || _props$currentModule10 === void 0 ? void 0 : _props$currentModule10.app_id) || (props === null || props === void 0 ? void 0 : (_props$currentModule11 = props.currentModule) === null || _props$currentModule11 === void 0 ? void 0 : (_props$currentModule12 = _props$currentModule11.record) === null || _props$currentModule12 === void 0 ? void 0 : _props$currentModule12.app_id)) != -1,
          isTadkekMesahyModule: (props === null || props === void 0 ? void 0 : (_props$currentModule13 = props.currentModule) === null || _props$currentModule13 === void 0 ? void 0 : _props$currentModule13.id) != 114,
          isFarz: ((props === null || props === void 0 ? void 0 : (_props$currentModule14 = props.currentModule) === null || _props$currentModule14 === void 0 ? void 0 : _props$currentModule14.app_id) || (props === null || props === void 0 ? void 0 : (_props$currentModule15 = props.currentModule) === null || _props$currentModule15 === void 0 ? void 0 : (_props$currentModule16 = _props$currentModule15.record) === null || _props$currentModule16 === void 0 ? void 0 : _props$currentModule16.app_id)) == 1 || false,
          isUpdateContract: ((props === null || props === void 0 ? void 0 : (_props$currentModule17 = props.currentModule) === null || _props$currentModule17 === void 0 ? void 0 : _props$currentModule17.app_id) || (props === null || props === void 0 ? void 0 : (_props$currentModule18 = props.currentModule) === null || _props$currentModule18 === void 0 ? void 0 : (_props$currentModule19 = _props$currentModule18.record) === null || _props$currentModule19 === void 0 ? void 0 : _props$currentModule19.app_id)) == 14 || false,
          isPlan: ((props === null || props === void 0 ? void 0 : (_props$currentModule20 = props.currentModule) === null || _props$currentModule20 === void 0 ? void 0 : _props$currentModule20.app_id) || (props === null || props === void 0 ? void 0 : (_props$currentModule21 = props.currentModule) === null || _props$currentModule21 === void 0 ? void 0 : (_props$currentModule22 = _props$currentModule21.record) === null || _props$currentModule22 === void 0 ? void 0 : _props$currentModule22.app_id)) == 16 || false,
          notify: (cadDetails === null || cadDetails === void 0 ? void 0 : cadDetails.temp) && (cadDetails === null || cadDetails === void 0 ? void 0 : (_cadDetails$temp2 = cadDetails.temp) === null || _cadDetails$temp2 === void 0 ? void 0 : _cadDetails$temp2.notify) || false,
          hideDrag: (cadDetails === null || cadDetails === void 0 ? void 0 : cadDetails.temp) && (cadDetails === null || cadDetails === void 0 ? void 0 : (_cadDetails$temp3 = cadDetails.temp) === null || _cadDetails$temp3 === void 0 ? void 0 : _cadDetails$temp3.hideDrag) || false,
          lineLengthFont: 25,
          parcelNumberFont: 25,
          isBoundry: false,
          mun: (cadDetails === null || cadDetails === void 0 ? void 0 : cadDetails.mun) || {},
          muns: [],
          have_electric_room: (cadDetails === null || cadDetails === void 0 ? void 0 : cadDetails.temp) && (cadDetails === null || cadDetails === void 0 ? void 0 : (_cadDetails$temp4 = cadDetails.temp) === null || _cadDetails$temp4 === void 0 ? void 0 : _cadDetails$temp4.have_electric_room) || false,
          electric_room_area: (cadDetails === null || cadDetails === void 0 ? void 0 : cadDetails.temp) && (cadDetails === null || cadDetails === void 0 ? void 0 : (_cadDetails$temp5 = cadDetails.temp) === null || _cadDetails$temp5 === void 0 ? void 0 : _cadDetails$temp5.electric_room_area) || 0,
          electric_room_place: (cadDetails === null || cadDetails === void 0 ? void 0 : cadDetails.temp) && (cadDetails === null || cadDetails === void 0 ? void 0 : (_cadDetails$temp6 = cadDetails.temp) === null || _cadDetails$temp6 === void 0 ? void 0 : _cadDetails$temp6.electric_room_place) || 0,
          reqType: [1949, 2048].indexOf(props.currentModule.record.workflow_id) != -1 && "duplex" || ""
        };
        if (cadDetails !== null && cadDetails !== void 0 && cadDetails.temp && (cadDetails !== null && cadDetails !== void 0 && (_cadDetails$temp7 = cadDetails.temp) !== null && _cadDetails$temp7 !== void 0 && _cadDetails$temp7.isKrokyUpdateContract || cadDetails !== null && cadDetails !== void 0 && (_cadDetails$temp8 = cadDetails.temp) !== null && _cadDetails$temp8 !== void 0 && _cadDetails$temp8.isPlan)) {
          obj["survayParcelCutter"] = (cadDetails === null || cadDetails === void 0 ? void 0 : cadDetails.survayParcelCutter) || [{
            direction: "الشطفة",
            NORTH_EAST_DIRECTION: "",
            NORTH_WEST_DIRECTION: "",
            SOUTH_EAST_DIRECTION: "",
            SOUTH_WEST_DIRECTION: ""
          }];
        }
        if (obj.isTadkekMesahy) {
          if (obj.polygons) {
            obj.polygons.forEach((polygon, index) => {
              obj[`parcel_name${index}`] = polygon.parcel_name;
            });
          }
        }
        if (obj.isUpdateContract && obj.polygons.length > 0) {
          obj.polygons.forEach((polygon, index) => {
            obj[`have_electric_room${index}`] = polygon.have_electric_room || false;
            obj[`electric_room_area${index}`] = polygon.electric_room_area || "";
            obj[`electric_room_place${index}`] = polygon.electric_room_place;
          });
        }
        this.setState({
          ...obj
        }, () => {
          this.settoStore(obj.polygons);
        });
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "loadParcelsFromLandData", () => {
      var _this$state, _this$state2, _this$state2$cadResul, _this$state2$cadResul2, _this$state2$cadResul3, _this$state3, _this$state3$polygons, _mainObject$data_msa2, _mainObject$data_msa3, _mainObject$data_msa4, _mainObject$data_msa5;
      let mainObject = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["selectMainObject"])(this.props);
      if (!this.state.polygons.length && !((_this$state = this.state) !== null && _this$state !== void 0 && _this$state.cadResults)) {
        var _mainObject$landData57, _mainObject$landData58, _mainObject$landData59;
        //this.state.isUpdateContract = true;
        this.state.cadResults = {
          data: [{
            shapeFeatures: mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData57 = mainObject.landData) === null || _mainObject$landData57 === void 0 ? void 0 : (_mainObject$landData58 = _mainObject$landData57.landData) === null || _mainObject$landData58 === void 0 ? void 0 : (_mainObject$landData59 = _mainObject$landData58.lands) === null || _mainObject$landData59 === void 0 ? void 0 : _mainObject$landData59.parcels.map((polygon, index) => {
              return {
                ...polygon,
                index
              };
            })
          }]
        };
        this.state.cadResults.data[0].shapeFeatures.forEach(elem => {
          var _elem$attributes, _elem$attributes2, _elem$attributes3, _elem$parcelData, _elem$parcelData$nort, _elem$parcelData2, _elem$parcelData3, _elem$parcelData3$nor, _elem$parcelData3$nor2, _elem$parcelData4, _elem$parcelData5, _elem$parcelData5$eas, _elem$parcelData6, _elem$parcelData7, _elem$parcelData7$eas, _elem$parcelData7$eas2, _elem$parcelData8, _elem$parcelData9, _elem$parcelData9$wes, _elem$parcelData10, _elem$parcelData11, _elem$parcelData11$we, _elem$parcelData11$we2, _elem$parcelData12, _elem$parcelData13, _elem$parcelData13$so, _elem$parcelData14, _elem$parcelData15, _elem$parcelData15$so, _elem$parcelData15$so2, _elem$parcelData16;
          this.state[`parcel_name${elem.index}`] = elem === null || elem === void 0 ? void 0 : (_elem$attributes = elem.attributes) === null || _elem$attributes === void 0 ? void 0 : _elem$attributes.PARCEL_PLAN_NO;
          this.state.polygons.splice(this.state.polygons.length, 0, {
            polygon: elem,
            parcel_name: elem === null || elem === void 0 ? void 0 : (_elem$attributes2 = elem.attributes) === null || _elem$attributes2 === void 0 ? void 0 : _elem$attributes2.PARCEL_PLAN_NO,
            area: elem === null || elem === void 0 ? void 0 : (_elem$attributes3 = elem.attributes) === null || _elem$attributes3 === void 0 ? void 0 : _elem$attributes3.PARCEL_AREA,
            data: [{
              name: "north",
              data: [{
                lineDirection: 1,
                text: +(elem === null || elem === void 0 ? void 0 : (_elem$parcelData = elem.parcelData) === null || _elem$parcelData === void 0 ? void 0 : (_elem$parcelData$nort = _elem$parcelData.north_length) === null || _elem$parcelData$nort === void 0 ? void 0 : _elem$parcelData$nort.inputValue) || +(elem === null || elem === void 0 ? void 0 : (_elem$parcelData2 = elem.parcelData) === null || _elem$parcelData2 === void 0 ? void 0 : _elem$parcelData2.north_length)
              }],
              totalLength: (elem === null || elem === void 0 ? void 0 : (_elem$parcelData3 = elem.parcelData) === null || _elem$parcelData3 === void 0 ? void 0 : (_elem$parcelData3$nor = _elem$parcelData3.north_length) === null || _elem$parcelData3$nor === void 0 ? void 0 : (_elem$parcelData3$nor2 = _elem$parcelData3$nor.inputValue) === null || _elem$parcelData3$nor2 === void 0 ? void 0 : _elem$parcelData3$nor2.toString()) || +(elem === null || elem === void 0 ? void 0 : (_elem$parcelData4 = elem.parcelData) === null || _elem$parcelData4 === void 0 ? void 0 : _elem$parcelData4.north_length)
            }, {
              name: "east",
              data: [{
                lineDirection: 2,
                text: +(elem === null || elem === void 0 ? void 0 : (_elem$parcelData5 = elem.parcelData) === null || _elem$parcelData5 === void 0 ? void 0 : (_elem$parcelData5$eas = _elem$parcelData5.east_length) === null || _elem$parcelData5$eas === void 0 ? void 0 : _elem$parcelData5$eas.inputValue) || +(elem === null || elem === void 0 ? void 0 : (_elem$parcelData6 = elem.parcelData) === null || _elem$parcelData6 === void 0 ? void 0 : _elem$parcelData6.east_length)
              }],
              totalLength: (elem === null || elem === void 0 ? void 0 : (_elem$parcelData7 = elem.parcelData) === null || _elem$parcelData7 === void 0 ? void 0 : (_elem$parcelData7$eas = _elem$parcelData7.east_length) === null || _elem$parcelData7$eas === void 0 ? void 0 : (_elem$parcelData7$eas2 = _elem$parcelData7$eas.inputValue) === null || _elem$parcelData7$eas2 === void 0 ? void 0 : _elem$parcelData7$eas2.toString()) || +(elem === null || elem === void 0 ? void 0 : (_elem$parcelData8 = elem.parcelData) === null || _elem$parcelData8 === void 0 ? void 0 : _elem$parcelData8.east_length)
            }, {
              name: "main",
              data: [],
              totalLength: "0.00"
            }, {
              name: "west",
              data: [{
                lineDirection: 4,
                text: +(elem === null || elem === void 0 ? void 0 : (_elem$parcelData9 = elem.parcelData) === null || _elem$parcelData9 === void 0 ? void 0 : (_elem$parcelData9$wes = _elem$parcelData9.west_length) === null || _elem$parcelData9$wes === void 0 ? void 0 : _elem$parcelData9$wes.inputValue) || +(elem === null || elem === void 0 ? void 0 : (_elem$parcelData10 = elem.parcelData) === null || _elem$parcelData10 === void 0 ? void 0 : _elem$parcelData10.west_length)
              }],
              totalLength: (elem === null || elem === void 0 ? void 0 : (_elem$parcelData11 = elem.parcelData) === null || _elem$parcelData11 === void 0 ? void 0 : (_elem$parcelData11$we = _elem$parcelData11.west_length) === null || _elem$parcelData11$we === void 0 ? void 0 : (_elem$parcelData11$we2 = _elem$parcelData11$we.inputValue) === null || _elem$parcelData11$we2 === void 0 ? void 0 : _elem$parcelData11$we2.toString()) || (elem === null || elem === void 0 ? void 0 : (_elem$parcelData12 = elem.parcelData) === null || _elem$parcelData12 === void 0 ? void 0 : _elem$parcelData12.west_length)
            }, {
              name: "south",
              data: [{
                lineDirection: 3,
                text: +(elem === null || elem === void 0 ? void 0 : (_elem$parcelData13 = elem.parcelData) === null || _elem$parcelData13 === void 0 ? void 0 : (_elem$parcelData13$so = _elem$parcelData13.south_length) === null || _elem$parcelData13$so === void 0 ? void 0 : _elem$parcelData13$so.inputValue) || +(elem === null || elem === void 0 ? void 0 : (_elem$parcelData14 = elem.parcelData) === null || _elem$parcelData14 === void 0 ? void 0 : _elem$parcelData14.south_length)
              }],
              totalLength: (elem === null || elem === void 0 ? void 0 : (_elem$parcelData15 = elem.parcelData) === null || _elem$parcelData15 === void 0 ? void 0 : (_elem$parcelData15$so = _elem$parcelData15.south_length) === null || _elem$parcelData15$so === void 0 ? void 0 : (_elem$parcelData15$so2 = _elem$parcelData15$so.inputValue) === null || _elem$parcelData15$so2 === void 0 ? void 0 : _elem$parcelData15$so2.toString()) || +(elem === null || elem === void 0 ? void 0 : (_elem$parcelData16 = elem.parcelData) === null || _elem$parcelData16 === void 0 ? void 0 : _elem$parcelData16.south_length)
            }],
            north_Desc: elem === null || elem === void 0 ? void 0 : elem.parcelData.north_desc.toString(),
            north_length_text: "",
            east_Desc: elem === null || elem === void 0 ? void 0 : elem.parcelData.east_desc.toString(),
            east_length_text: "",
            west_Desc: elem === null || elem === void 0 ? void 0 : elem.parcelData.west_desc.toString(),
            west_length_text: "",
            south_Desc: elem === null || elem === void 0 ? void 0 : elem.parcelData.south_desc.toString(),
            south_length_text: "",
            electric_room_area: "",
            electric_room_place: "",
            have_electric_room: false,
            survayParcelCutter: [{
              direction: "الشطفة",
              NORTH_EAST_DIRECTION: "",
              NORTH_WEST_DIRECTION: "",
              SOUTH_EAST_DIRECTION: "",
              SOUTH_WEST_DIRECTION: ""
            }]
          });
        });
      } else if ((_this$state2 = this.state) !== null && _this$state2 !== void 0 && (_this$state2$cadResul = _this$state2.cadResults) !== null && _this$state2$cadResul !== void 0 && (_this$state2$cadResul2 = _this$state2$cadResul.data[0]) !== null && _this$state2$cadResul2 !== void 0 && (_this$state2$cadResul3 = _this$state2$cadResul2.cadFeatures) !== null && _this$state2$cadResul3 !== void 0 && _this$state2$cadResul3.length && (_this$state3 = this.state) !== null && _this$state3 !== void 0 && (_this$state3$polygons = _this$state3.polygons) !== null && _this$state3$polygons !== void 0 && _this$state3$polygons.length && !(mainObject !== null && mainObject !== void 0 && (_mainObject$data_msa2 = mainObject.data_msa7y) !== null && _mainObject$data_msa2 !== void 0 && (_mainObject$data_msa3 = _mainObject$data_msa2.msa7yData) !== null && _mainObject$data_msa3 !== void 0 && (_mainObject$data_msa4 = _mainObject$data_msa3.mapviewer) !== null && _mainObject$data_msa4 !== void 0 && (_mainObject$data_msa5 = _mainObject$data_msa4.mapGraphics) !== null && _mainObject$data_msa5 !== void 0 && _mainObject$data_msa5.length)) {
        this.buildCADDetails(true);
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "duplixTypeChange", (selectedType, polygon, key, evt) => {
      polygon["duplixType"] = selectedType;
      this.state["duplixType" + key] = selectedType;
      var minLength = 0;
      polygon.data.forEach((val, key) => {
        if ((minLength > parseFloat(val.totalLength) || minLength == 0) && val.name != "main") {
          minLength = val.totalLength;
        }
      });
      if (selectedType == "splited") {
        if (minLength < 11.5) {
          polygon.cantSplitedOrMarged = true;
          polygon.errorInDuplixType = true;
          polygon.errorMsgForDuplixType = "DUPLIXSPLITEDERRORMESSAGE";
        } else {
          polygon.cantSplitedOrMarged = false;
          polygon.errorInDuplixType = false;
          polygon.errorMsgForDuplixType = "";
        }
      } else if (selectedType == "marged") {
        if (minLength < 9.5) {
          polygon.cantSplitedOrMarged = true;
          polygon.errorInDuplixType = true;
          polygon.errorMsgForDuplixType = "DUPLIXMARGEDERRORMESSAGE";
        } else {
          polygon.cantSplitedOrMarged = false;
          polygon.errorInDuplixType = false;
          polygon.errorMsgForDuplixType = "";
        }
      } else {
        polygon.errorInDuplixType = false;
        polygon.errorMsgForDuplixType = "";
      }
      if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_10___default()(polygon.errorMsgForDuplixType)) window.notifySystem("error", `messages:${polygon.errorMsgForDuplixType}`);
      this.state.polygons[key] = polygon;
      this.settoStore(this.state.polygons);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "onInputTextChange", (polygon, key, evt) => {
      polygon[evt.target.name] = evt.target.value;
      console.log(polygon);
      this.state[evt.target.name + key] = evt.target.value;
      this.state.polygons[key] = polygon;
      this.settoStore(this.state.polygons);
    });
    // onParcelTextChange = (polygon, key, evt) => {
    //   this.state[evt.target.name + key] = evt.target.value;
    //   polygon.parcel_name = isEmpty(this.state[`parcelSliceNo${key}`])
    //     ? this.state[`parcel_name${key}`]
    //     : `${this.state[`parcelSliceNo${key}`]}/${
    //         this.state[`parcel_name${key}`]
    //       }`;
    //   this.state.polygons[key] = polygon;
    //   this.settoStore(this.state.polygons);
    // };
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "onParcelTextChange", (polygon, key, evt) => {
      this.state[evt.target.name + key] = evt.target.value;
      polygon.parcel_name = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["setParcelName"])([this.state[`parcel_name${key}`], this.state["parcelSliceNo" + key]]);
      polygon.parcelNameRight = this.state[`parcel_name${key}`];
      polygon.parcelNameLeft = this.state["parcelSliceNo" + key];
      this.state.polygons[key] = polygon;
      if (this.state.isTadkekMesahy) {
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "PacrelUnNamedGraphicLayer");
        this.state.polygons.filter(x => !x.isFullBoundry).forEach((polygon, key) => {
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["redrawNames"])(polygon, this.map, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["setParcelName"])([this.state[`parcel_name${key}`], this.state["parcelSliceNo" + key]]), "PacrelUnNamedGraphicLayer", key);
        });
      } else {
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["redrawNames"])(this.state.polygons[key], this.map, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["setParcelName"])([this.state[`parcel_name${key}`], this.state["parcelSliceNo" + key]]), "PacrelUnNamedGraphicLayer", key);
      }
      this.settoStore(this.state.polygons);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "onChange", activeKey => {
      if (this.state.polygons[+activeKey - 1].data) {
        this.setState({
          activeKey,
          ["westBoundries" + (+activeKey - 1)]: this.state.polygons[+activeKey - 1].data[3].data.map((item, i) => {
            return {
              id: `item-${"west_" + i}`,
              content: item.text,
              data: item
            };
          }),
          ["northBoundries" + (+activeKey - 1)]: this.state.polygons[+activeKey - 1].data[0].data.map((item, i) => {
            return {
              id: `item-${"north_" + i}`,
              content: item.text,
              data: item
            };
          }),
          ["eastBoundries" + (+activeKey - 1)]: this.state.polygons[+activeKey - 1].data[1].data.map((item, i) => {
            return {
              id: `item-${"east_" + i}`,
              content: item.text,
              data: item
            };
          }),
          ["southBoundries" + (+activeKey - 1)]: this.state.polygons[+activeKey - 1].data[4].data.map((item, i) => {
            return {
              id: `item-${"south_" + i}`,
              content: item.text,
              data: item
            };
          })
        });
      } else {
        this.setState({
          activeKey
        });
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "onmouseover", item => {
      var polyline = new esri.geometry.Polyline(item);
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["highlightFeature"])(polyline, this.map, {
        layerName: "highlightBoundriesGraphicLayer",
        fillColor: item.color
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "onmouseleave", () => {
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "highlightBoundriesGraphicLayer");
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "onElectricInputChange", (stateName, evt) => {
      this.state[stateName] = evt.target.type == "checkbox" ? evt.target.checked : evt.target.value;
      this.settoStore(this.state.polygons);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "openPopup", (scope, element) => {
      var _element$data$, _element$data$2, _element$data$3, _element$data$4;
      var fields = this.parcelDataFields;
      this.props.setMain("Popup", {
        popup: {
          type: "create",
          childProps: {
            fields,
            initialValues: element.parcelData && {
              ...element.parcelData
            } || {
              north_length: element === null || element === void 0 ? void 0 : (_element$data$ = element.data[0]) === null || _element$data$ === void 0 ? void 0 : _element$data$.totalLength,
              north_desc: element.north_Desc,
              east_length: element === null || element === void 0 ? void 0 : (_element$data$2 = element.data[1]) === null || _element$data$2 === void 0 ? void 0 : _element$data$2.totalLength,
              east_desc: element.east_Desc,
              west_length: element === null || element === void 0 ? void 0 : (_element$data$3 = element.data[3]) === null || _element$data$3 === void 0 ? void 0 : _element$data$3.totalLength,
              west_desc: element.west_Desc,
              south_length: element === null || element === void 0 ? void 0 : (_element$data$4 = element.data[4]) === null || _element$data$4 === void 0 ? void 0 : _element$data$4.totalLength,
              south_desc: element.south_Desc
            },
            ok(values) {
              element.data[0].totalLength = values.north_length;
              element.data[1].totalLength = values.east_length;
              element.data[3].totalLength = values.west_length;
              element.data[4].totalLength = values.south_length;
              element.north_Desc = values.north_desc;
              element.east_Desc = values.east_desc;
              element.west_Desc = values.west_desc;
              element.south_Desc = values.south_desc;
              element.parcelData = {
                south_length: values.south_length,
                south_desc: values.south_desc,
                north_length: values.north_length,
                north_desc: values.north_desc,
                east_desc: values.east_desc,
                east_length: values.east_length,
                west_desc: values.west_desc,
                west_length: values.west_length
              };
              scope.settoStore(scope.state.polygons);
              return Promise.resolve(true);
            }
          }
        }
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7___default()(this, "remove", item => {
      this.state.polygons.pop(item);
      this.settoStore(this.state.polygons);
    });
    this.parcel_fields_headers = ["الإتجاه", "شمال / شرق", "شمال / غرب", "جنوب / شرق", "جنوب / غرب"];
    this.parcel_fields = [{
      name: "direction",
      editable: false
    }, {
      name: "NORTH_EAST_DIRECTION",
      editable: true
    }, {
      name: "NORTH_WEST_DIRECTION",
      editable: true
    }, {
      name: "SOUTH_EAST_DIRECTION",
      editable: true
    }, {
      name: "SOUTH_WEST_DIRECTION",
      editable: true
    }];
    this.polygon_fields_headers = ["رقم الأرض", "المساحة (م۲)", "رقم المخطط", "رقم البلك", "الحي", "رمز الإستخدام", "عدد الوحدات"];
    this.neighbors = ((_this$props$mainObjec9 = this.props.mainObject) === null || _this$props$mainObjec9 === void 0 ? void 0 : (_this$props$mainObjec10 = _this$props$mainObjec9.landData) === null || _this$props$mainObjec10 === void 0 ? void 0 : (_this$props$mainObjec11 = _this$props$mainObjec10.landData) === null || _this$props$mainObjec11 === void 0 ? void 0 : (_this$props$mainObjec12 = _this$props$mainObjec11.lands) === null || _this$props$mainObjec12 === void 0 ? void 0 : (_this$props$mainObjec13 = _this$props$mainObjec12.temp) === null || _this$props$mainObjec13 === void 0 ? void 0 : _this$props$mainObjec13.parcelDis) || [];
    this.neighbors = this.neighbors && this.neighbors.filter(f => {
      var _this$props$mainObjec14, _this$props$mainObjec15, _this$props$mainObjec16, _this$props$mainObjec17, _this$props$mainObjec18;
      return !((_this$props$mainObjec14 = this.props.mainObject) !== null && _this$props$mainObjec14 !== void 0 && (_this$props$mainObjec15 = _this$props$mainObjec14.landData) !== null && _this$props$mainObjec15 !== void 0 && (_this$props$mainObjec16 = _this$props$mainObjec15.landData) !== null && _this$props$mainObjec16 !== void 0 && (_this$props$mainObjec17 = _this$props$mainObjec16.lands) !== null && _this$props$mainObjec17 !== void 0 && (_this$props$mainObjec18 = _this$props$mainObjec17.parcels) !== null && _this$props$mainObjec18 !== void 0 && _this$props$mainObjec18.find(p => p.attributes.PARCEL_PLAN_NO == f.attributes.PARCEL_PLAN_NO && p.attributes.PLAN_NO == f.attributes.PLAN_NO));
    });
    this.polygon_fields = [{
      name: "PARCEL_PLAN_NO",
      editable: false,
      type: "text"
    }, {
      name: "PARCEL_AREA",
      editable: !this.props.isView && true || false,
      type: "number"
    }, {
      name: "PLAN_NO",
      editable: !this.props.isView && true || false,
      type: "text"
    }, {
      name: "PARCEL_BLOCK_NO",
      editable: !this.props.isView && true || false,
      type: "text"
    }, {
      name: "DISTRICT_NAME",
      editable: !this.props.isView && true || false,
      type: "text"
    },
    // {
    //   name: "SUBDIVISION_TYPE",
    //   editable: (!this.props.isView && true) || false,
    //   type: "select",
    // },
    // {
    //   name: "SUBDIVISION_DESCRIPTION",
    //   editable: (!this.props.isView && true) || false,
    //   type: "text",
    // },
    {
      name: "USING_SYMBOL",
      editable: false
    }, {
      name: "UNITS_NUMBER",
      editable: false
    }];
    this.parcelDataFields = {};
    if (([22, 23].indexOf(_props.currentModule.id) != -1 || [1928].indexOf(_props.currentModule.record.workflow_id) != -1) && _props.is_parcel_type) {
      this.parcelDataFields["parcel_type"] = {
        label: "عبارة عن",
        placeholder: "من فضلك اخل نوع الأرض",
        type: "text",
        name: "parcel_type",
        required: true
        // label: "عبارة عن",
        // placeholder: "من فضلك اخل نوع الأرض",
        // type: "input",
        // field: "select",
        // className: "select_flex",
        // name: "parcel_type",
        // data: [
        //   { label: "أرض فضاء", value: "أرض فضاء" },
        //   { label: "مبنى سكني", value: "مبنى سكني" },
        //   { label: "ورشة", value: "ورشة" },
        //   { label: "أخرى", value: "أخرى" },
        // ],
        // required: true,
      };
    }
    this.parcelDataFields["north_length"] = {
      label: "طول الحد الشمالي (م)",
      placeholder: "من فضلك ادخل طول الحد الشمالي (م)",
      field: "inputNumber",
      name: "north_length",
      required: true,
      disabled: true
    };
    this.parcelDataFields["north_desc"] = {
      label: "وصف الحد الشمالي",
      placeholder: "من فضلك ادخل وصف الحد الشمالي",
      type: "text",
      name: "north_desc",
      maxLength: 200,
      required: true
    };
    this.parcelDataFields["south_length"] = {
      label: "طول الحد الجنوبي (م)",
      placeholder: "من فضلك ادخل طول الحد الجنوبي (م)",
      field: "inputNumber",
      name: "south_length",
      required: true,
      disabled: true
    };
    this.parcelDataFields["south_desc"] = {
      label: "وصف الحد الجنوبي",
      placeholder: "من فضلك ادخل وصف الحد الجنوبي",
      type: "text",
      name: "south_desc",
      maxLength: 200,
      required: true
    }, this.parcelDataFields["east_length"] = {
      label: "طول الحد الشرقي (م)",
      placeholder: "من فضلك ادخل طول الحد الشرقي (م)",
      field: "inputNumber",
      name: "east_length",
      required: true,
      disabled: true
    };
    this.parcelDataFields["east_desc"] = {
      label: "وصف الحد الشرقي",
      placeholder: "من فضلك ادخل وصف الحد الشرقي",
      type: "text",
      name: "east_desc",
      maxLength: 200,
      required: true
    };
    this.parcelDataFields["west_length"] = {
      label: "طول الحد الغربي (م)",
      placeholder: "من فضلك ادخل طول الحد الغربي (م)",
      field: "inputNumber",
      name: "west_length",
      required: true,
      disabled: true
    };
    this.parcelDataFields["west_desc"] = {
      label: "وصف الحد الغربي",
      placeholder: "من فضلك ادخل وصف الحد الغربي",
      type: "text",
      name: "west_desc",
      maxLength: 200,
      required: true
    };
    this.InvokedToAdParcel = false;
    let _cadDetails = this.props.input.value || ((_selectMainObject = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["selectMainObject"])(_props)) === null || _selectMainObject === void 0 ? void 0 : (_selectMainObject$dat = _selectMainObject.data_msa7y) === null || _selectMainObject$dat === void 0 ? void 0 : (_selectMainObject$dat2 = _selectMainObject$dat.msa7yData) === null || _selectMainObject$dat2 === void 0 ? void 0 : _selectMainObject$dat2.cadDetails);
    if (_cadDetails) {
      var _this$props5, _this$props5$currentM, _this$props6, _this$props6$currentM, _this$props6$currentM2, _this$props7, _this$props7$currentM, _this$props8, _this$props8$currentM, _this$props8$currentM2, _cadDetails$temp9, _props$currentModule23, _props$currentModule24, _props$currentModule25, _props$currentModule26, _props$currentModule27, _props$currentModule28, _props$currentModule29, _props$currentModule30, _props$currentModule31, _props$currentModule32, _props$currentModule33, _props$currentModule34, _props$currentModule35, _props$currentModule36, _props$currentModule37, _props$currentModule38, _props$currentModule39, _props$currentModule40, _props$currentModule41, _cadDetails$temp10, _cadDetails$temp11, _cadDetails$temp12, _cadDetails$temp13, _cadDetails$temp14, _cadDetails$temp15, _cadDetails$temp16, _this$state4;
      const {
        input
      } = _props;
      this.state = {
        viewNumbersOnly: Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["checkImportedMainObject"])(_props) && true || false,
        zoomRatio: [2028, 2029, 2191].indexOf(((_this$props5 = this.props) === null || _this$props5 === void 0 ? void 0 : (_this$props5$currentM = _this$props5.currentModule) === null || _this$props5$currentM === void 0 ? void 0 : _this$props5$currentM.workflow_id) || ((_this$props6 = this.props) === null || _this$props6 === void 0 ? void 0 : (_this$props6$currentM = _this$props6.currentModule) === null || _this$props6$currentM === void 0 ? void 0 : (_this$props6$currentM2 = _this$props6$currentM.record) === null || _this$props6$currentM2 === void 0 ? void 0 : _this$props6$currentM2.workflow_id)) != -1 || ((_this$props7 = this.props) === null || _this$props7 === void 0 ? void 0 : (_this$props7$currentM = _this$props7.currentModule) === null || _this$props7$currentM === void 0 ? void 0 : _this$props7$currentM.app_id) == 14 || ((_this$props8 = this.props) === null || _this$props8 === void 0 ? void 0 : (_this$props8$currentM = _this$props8.currentModule) === null || _this$props8$currentM === void 0 ? void 0 : (_this$props8$currentM2 = _this$props8$currentM.record) === null || _this$props8$currentM2 === void 0 ? void 0 : _this$props8$currentM2.app_id) == 14 ? 10 : 25,
        isConfirmed: true,
        outRange: null,
        hasNotify: false,
        pointsLength: [],
        annotationLength: 17,
        polygons: _cadDetails !== null && _cadDetails !== void 0 && _cadDetails.suggestionsParcels && _cadDetails !== null && _cadDetails !== void 0 && _cadDetails.suggestionsParcels[0] ? _cadDetails === null || _cadDetails === void 0 ? void 0 : _cadDetails.suggestionsParcels.sort((a, b) => a.parcel_name.indexOf("/") == -1 && b.parcel_name.indexOf("/") == -1 && (+a.parcel_name > +b.parcel_name ? 1 : -1)) : [],
        demSaveDraft: false,
        cadFiles: {},
        layerParcels: [],
        planDescription: (_cadDetails === null || _cadDetails === void 0 ? void 0 : _cadDetails.planDescription) || "",
        activeKey: "1",
        isWithinUrbanBoundry: (_cadDetails === null || _cadDetails === void 0 ? void 0 : _cadDetails.isWithinUrbanBoundry) || null,
        isUnPlannedParcelIntersect: (_cadDetails === null || _cadDetails === void 0 ? void 0 : _cadDetails.isUnPlannedParcelIntersect) || false,
        cadResults: (_cadDetails === null || _cadDetails === void 0 ? void 0 : _cadDetails.temp) && (_cadDetails === null || _cadDetails === void 0 ? void 0 : (_cadDetails$temp9 = _cadDetails.temp) === null || _cadDetails$temp9 === void 0 ? void 0 : _cadDetails$temp9.cadResults) || undefined,
        isKrokyUpdateContract: ((_props === null || _props === void 0 ? void 0 : (_props$currentModule23 = _props.currentModule) === null || _props$currentModule23 === void 0 ? void 0 : _props$currentModule23.app_id) || (_props === null || _props === void 0 ? void 0 : (_props$currentModule24 = _props.currentModule) === null || _props$currentModule24 === void 0 ? void 0 : (_props$currentModule25 = _props$currentModule24.record) === null || _props$currentModule25 === void 0 ? void 0 : _props$currentModule25.app_id)) == 8 || false,
        isTadkekMesahy: [29].indexOf((_props === null || _props === void 0 ? void 0 : (_props$currentModule26 = _props.currentModule) === null || _props$currentModule26 === void 0 ? void 0 : _props$currentModule26.app_id) || (_props === null || _props === void 0 ? void 0 : (_props$currentModule27 = _props.currentModule) === null || _props$currentModule27 === void 0 ? void 0 : (_props$currentModule28 = _props$currentModule27.record) === null || _props$currentModule28 === void 0 ? void 0 : _props$currentModule28.app_id)) != -1,
        isPropetryCheck: [27].indexOf((_props === null || _props === void 0 ? void 0 : (_props$currentModule29 = _props.currentModule) === null || _props$currentModule29 === void 0 ? void 0 : _props$currentModule29.app_id) || (_props === null || _props === void 0 ? void 0 : (_props$currentModule30 = _props.currentModule) === null || _props$currentModule30 === void 0 ? void 0 : (_props$currentModule31 = _props$currentModule30.record) === null || _props$currentModule31 === void 0 ? void 0 : _props$currentModule31.app_id)) != -1,
        isTadkekMesahyModule: (_props === null || _props === void 0 ? void 0 : (_props$currentModule32 = _props.currentModule) === null || _props$currentModule32 === void 0 ? void 0 : _props$currentModule32.id) != 114,
        isFarz: ((_props === null || _props === void 0 ? void 0 : (_props$currentModule33 = _props.currentModule) === null || _props$currentModule33 === void 0 ? void 0 : _props$currentModule33.app_id) || (_props === null || _props === void 0 ? void 0 : (_props$currentModule34 = _props.currentModule) === null || _props$currentModule34 === void 0 ? void 0 : (_props$currentModule35 = _props$currentModule34.record) === null || _props$currentModule35 === void 0 ? void 0 : _props$currentModule35.app_id)) == 1 || false,
        isUpdateContract: ((_props === null || _props === void 0 ? void 0 : (_props$currentModule36 = _props.currentModule) === null || _props$currentModule36 === void 0 ? void 0 : _props$currentModule36.app_id) || (_props === null || _props === void 0 ? void 0 : (_props$currentModule37 = _props.currentModule) === null || _props$currentModule37 === void 0 ? void 0 : (_props$currentModule38 = _props$currentModule37.record) === null || _props$currentModule38 === void 0 ? void 0 : _props$currentModule38.app_id)) == 14 || false,
        isPlan: ((_props === null || _props === void 0 ? void 0 : (_props$currentModule39 = _props.currentModule) === null || _props$currentModule39 === void 0 ? void 0 : _props$currentModule39.app_id) || (_props === null || _props === void 0 ? void 0 : (_props$currentModule40 = _props.currentModule) === null || _props$currentModule40 === void 0 ? void 0 : (_props$currentModule41 = _props$currentModule40.record) === null || _props$currentModule41 === void 0 ? void 0 : _props$currentModule41.app_id)) == 16 || false,
        notify: (_cadDetails === null || _cadDetails === void 0 ? void 0 : _cadDetails.temp) && (_cadDetails === null || _cadDetails === void 0 ? void 0 : (_cadDetails$temp10 = _cadDetails.temp) === null || _cadDetails$temp10 === void 0 ? void 0 : _cadDetails$temp10.notify) || false,
        hideDrag: (_cadDetails === null || _cadDetails === void 0 ? void 0 : _cadDetails.temp) && (_cadDetails === null || _cadDetails === void 0 ? void 0 : (_cadDetails$temp11 = _cadDetails.temp) === null || _cadDetails$temp11 === void 0 ? void 0 : _cadDetails$temp11.hideDrag) || false,
        lineLengthFont: 25,
        parcelNumberFont: 25,
        isBoundry: false,
        mun: (_cadDetails === null || _cadDetails === void 0 ? void 0 : _cadDetails.mun) || {},
        muns: [],
        have_electric_room: (_cadDetails === null || _cadDetails === void 0 ? void 0 : _cadDetails.temp) && (_cadDetails === null || _cadDetails === void 0 ? void 0 : (_cadDetails$temp12 = _cadDetails.temp) === null || _cadDetails$temp12 === void 0 ? void 0 : _cadDetails$temp12.have_electric_room) || false,
        electric_room_area: (_cadDetails === null || _cadDetails === void 0 ? void 0 : _cadDetails.temp) && (_cadDetails === null || _cadDetails === void 0 ? void 0 : (_cadDetails$temp13 = _cadDetails.temp) === null || _cadDetails$temp13 === void 0 ? void 0 : _cadDetails$temp13.electric_room_area) || 0,
        electric_room_place: (_cadDetails === null || _cadDetails === void 0 ? void 0 : _cadDetails.temp) && (_cadDetails === null || _cadDetails === void 0 ? void 0 : (_cadDetails$temp14 = _cadDetails.temp) === null || _cadDetails$temp14 === void 0 ? void 0 : _cadDetails$temp14.electric_room_place) || 0,
        reqType: [1949, 2048].indexOf(this.props.currentModule.record.workflow_id) != -1 && "duplex" || ""
      };
      if (_cadDetails !== null && _cadDetails !== void 0 && _cadDetails.temp && (_cadDetails !== null && _cadDetails !== void 0 && (_cadDetails$temp15 = _cadDetails.temp) !== null && _cadDetails$temp15 !== void 0 && _cadDetails$temp15.isKrokyUpdateContract || _cadDetails !== null && _cadDetails !== void 0 && (_cadDetails$temp16 = _cadDetails.temp) !== null && _cadDetails$temp16 !== void 0 && _cadDetails$temp16.isPlan)) {
        this.state["survayParcelCutter"] = (_cadDetails === null || _cadDetails === void 0 ? void 0 : _cadDetails.survayParcelCutter) || [{
          direction: "الشطفة",
          NORTH_EAST_DIRECTION: "",
          NORTH_WEST_DIRECTION: "",
          SOUTH_EAST_DIRECTION: "",
          SOUTH_WEST_DIRECTION: ""
        }];
      }
      if (this.state.isTadkekMesahy) {
        if (this.state.polygons) {
          this.state.polygons.forEach((polygon, index) => {
            this.state[`parcel_name${index}`] = polygon.parcel_name;
          });
        }
      }
      if ((_this$state4 = this.state) !== null && _this$state4 !== void 0 && _this$state4.isUpdateContract && this.state.polygons.length > 0) {
        this.state.polygons.forEach((polygon, index) => {
          this.state[`have_electric_room${index}`] = polygon.have_electric_room || false;
          this.state[`electric_room_area${index}`] = polygon.electric_room_area || "";
          this.state[`electric_room_place${index}`] = polygon.electric_room_place;
        });
      }
    } else {
      var _this$props9, _this$props9$currentM, _this$props10, _this$props10$current, _this$props10$current2, _this$props11, _this$props11$current, _this$props12, _this$props12$current, _this$props12$current2, _props$currentModule42, _props$currentModule43, _props$currentModule44, _props$currentModule45, _props$currentModule46, _props$currentModule47, _props$currentModule48, _props$currentModule49, _props$currentModule50, _props$currentModule51, _props$currentModule52, _props$currentModule53, _props$currentModule54, _props$currentModule55, _props$currentModule56, _props$currentModule57, _props$currentModule58, _props$currentModule59;
      this.state = {
        viewNumbersOnly: Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["checkImportedMainObject"])(_props) && true || false,
        zoomRatio: [2028, 2029, 2191].indexOf(((_this$props9 = this.props) === null || _this$props9 === void 0 ? void 0 : (_this$props9$currentM = _this$props9.currentModule) === null || _this$props9$currentM === void 0 ? void 0 : _this$props9$currentM.workflow_id) || ((_this$props10 = this.props) === null || _this$props10 === void 0 ? void 0 : (_this$props10$current = _this$props10.currentModule) === null || _this$props10$current === void 0 ? void 0 : (_this$props10$current2 = _this$props10$current.record) === null || _this$props10$current2 === void 0 ? void 0 : _this$props10$current2.workflow_id)) != -1 || ((_this$props11 = this.props) === null || _this$props11 === void 0 ? void 0 : (_this$props11$current = _this$props11.currentModule) === null || _this$props11$current === void 0 ? void 0 : _this$props11$current.app_id) == 14 || ((_this$props12 = this.props) === null || _this$props12 === void 0 ? void 0 : (_this$props12$current = _this$props12.currentModule) === null || _this$props12$current === void 0 ? void 0 : (_this$props12$current2 = _this$props12$current.record) === null || _this$props12$current2 === void 0 ? void 0 : _this$props12$current2.app_id) == 14 ? 10 : 25,
        isConfirmed: true,
        outRange: null,
        hasNotify: false,
        pointsLength: [],
        annotationLength: 17,
        polygons: [],
        survayParcelCutter: [{
          direction: "الشطفة",
          NORTH_EAST_DIRECTION: "",
          NORTH_WEST_DIRECTION: "",
          SOUTH_EAST_DIRECTION: "",
          SOUTH_WEST_DIRECTION: ""
        }],
        demSaveDraft: false,
        cadFiles: {},
        layerParcels: [],
        planDescription: "",
        activeKey: "1",
        isWithinUrbanBoundry: null,
        cadResults: undefined,
        isKrokyUpdateContract: ((_props === null || _props === void 0 ? void 0 : (_props$currentModule42 = _props.currentModule) === null || _props$currentModule42 === void 0 ? void 0 : _props$currentModule42.app_id) || (_props === null || _props === void 0 ? void 0 : (_props$currentModule43 = _props.currentModule) === null || _props$currentModule43 === void 0 ? void 0 : (_props$currentModule44 = _props$currentModule43.record) === null || _props$currentModule44 === void 0 ? void 0 : _props$currentModule44.app_id)) == 8 || false,
        isTadkekMesahy: [29].indexOf((_props === null || _props === void 0 ? void 0 : (_props$currentModule45 = _props.currentModule) === null || _props$currentModule45 === void 0 ? void 0 : _props$currentModule45.app_id) || (_props === null || _props === void 0 ? void 0 : (_props$currentModule46 = _props.currentModule) === null || _props$currentModule46 === void 0 ? void 0 : (_props$currentModule47 = _props$currentModule46.record) === null || _props$currentModule47 === void 0 ? void 0 : _props$currentModule47.app_id)) != -1,
        isPropetryCheck: [27].indexOf((_props === null || _props === void 0 ? void 0 : (_props$currentModule48 = _props.currentModule) === null || _props$currentModule48 === void 0 ? void 0 : _props$currentModule48.app_id) || (_props === null || _props === void 0 ? void 0 : (_props$currentModule49 = _props.currentModule) === null || _props$currentModule49 === void 0 ? void 0 : (_props$currentModule50 = _props$currentModule49.record) === null || _props$currentModule50 === void 0 ? void 0 : _props$currentModule50.app_id)) != -1,
        isFarz: ((_props === null || _props === void 0 ? void 0 : (_props$currentModule51 = _props.currentModule) === null || _props$currentModule51 === void 0 ? void 0 : _props$currentModule51.app_id) || (_props === null || _props === void 0 ? void 0 : (_props$currentModule52 = _props.currentModule) === null || _props$currentModule52 === void 0 ? void 0 : (_props$currentModule53 = _props$currentModule52.record) === null || _props$currentModule53 === void 0 ? void 0 : _props$currentModule53.app_id)) == 1 || false,
        isUpdateContract: ((_props === null || _props === void 0 ? void 0 : (_props$currentModule54 = _props.currentModule) === null || _props$currentModule54 === void 0 ? void 0 : _props$currentModule54.app_id) || (_props === null || _props === void 0 ? void 0 : (_props$currentModule55 = _props.currentModule) === null || _props$currentModule55 === void 0 ? void 0 : (_props$currentModule56 = _props$currentModule55.record) === null || _props$currentModule56 === void 0 ? void 0 : _props$currentModule56.app_id)) == 14 || false,
        isPlan: ((_props === null || _props === void 0 ? void 0 : (_props$currentModule57 = _props.currentModule) === null || _props$currentModule57 === void 0 ? void 0 : _props$currentModule57.app_id) || (_props === null || _props === void 0 ? void 0 : (_props$currentModule58 = _props.currentModule) === null || _props$currentModule58 === void 0 ? void 0 : (_props$currentModule59 = _props$currentModule58.record) === null || _props$currentModule59 === void 0 ? void 0 : _props$currentModule59.app_id)) == 16 || false,
        notify: false,
        hideDrag: false,
        lineLengthFont: 25,
        parcelNumberFont: 25,
        isBoundry: false,
        mun: {},
        muns: [],
        have_electric_room: false,
        electric_room_area: 0,
        electric_room_place: 0,
        reqType: [1949, 2048].indexOf(this.props.currentModule.record.workflow_id) != -1 && "duplex" || ""
      };
    }
    Object(_helpers_apiMethods__WEBPACK_IMPORTED_MODULE_13__["fetchData"])(`${workFlowUrl}/api/Municipality`).then(response => {
      this.state.muns = response.results;
    });
    if (_cadDetails !== null && _cadDetails !== void 0 && _cadDetails.temp) {
      var _selectMainObject2, _selectMainObject2$la, _selectMainObject3, _selectMainObject3$la, _selectMainObject3$la2, _selectMainObject3$la3;
      // const {
      //   landData: {
      //     requestType,
      //     landData: {
      //       lands: { parcels },
      //     },
      //   },
      // } = 
      let requestType = (_selectMainObject2 = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["selectMainObject"])(_props)) === null || _selectMainObject2 === void 0 ? void 0 : (_selectMainObject2$la = _selectMainObject2.landData) === null || _selectMainObject2$la === void 0 ? void 0 : _selectMainObject2$la.requestType;
      let parcels = (_selectMainObject3 = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["selectMainObject"])(_props)) === null || _selectMainObject3 === void 0 ? void 0 : (_selectMainObject3$la = _selectMainObject3.landData) === null || _selectMainObject3$la === void 0 ? void 0 : (_selectMainObject3$la2 = _selectMainObject3$la.landData) === null || _selectMainObject3$la2 === void 0 ? void 0 : (_selectMainObject3$la3 = _selectMainObject3$la2.lands) === null || _selectMainObject3$la3 === void 0 ? void 0 : _selectMainObject3$la3.parcels;
      const {
        inputs
      } = _props;
      const {
        suggestionsParcels,
        temp
      } = _cadDetails;
      suggestionsParcels.forEach((element, index) => {
        let landDataParcel = parcels.find(r => {
          var _esri$geometry$Polygo, _esri$geometry$Polygo2;
          return r.geometry ? new esri.geometry.Polygon(element.polygon).contains((_esri$geometry$Polygo = new esri.geometry.Polygon(r === null || r === void 0 ? void 0 : r.geometry)) === null || _esri$geometry$Polygo === void 0 ? void 0 : (_esri$geometry$Polygo2 = _esri$geometry$Polygo.getExtent()) === null || _esri$geometry$Polygo2 === void 0 ? void 0 : _esri$geometry$Polygo2.getCenter()) : false;
        });
        if (landDataParcel) {
          if (this.state.isUpdateContract) {
            if (element.parcel_name != "حدود المعاملة") {
              var _landDataParcel$parce7, _landDataParcel$parce8, _landDataParcel$parce9, _landDataParcel$parce10, _landDataParcel$parce11, _landDataParcel$parce12;
              // element.data[0].data = [
              //   {
              //     ...element.data[0].data[0],
              //     text: +landDataParcel.parcelData.north_length,
              //   },
              // ];
              // element.data[0].totalLength =
              //   +landDataParcel.parcelData.north_length;
              // element.data[1].data = [
              //   {
              //     ...element.data[1].data[0],
              //     text: +landDataParcel.parcelData.east_length,
              //   },
              // ];
              // element.data[1].totalLength =
              //   +landDataParcel.parcelData.east_length;
              // element.data[3].data = [
              //   {
              //     ...element.data[3].data[0],
              //     text: +landDataParcel.parcelData.west_length,
              //   },
              // ];
              // element.data[3].totalLength =
              //   +landDataParcel.parcelData.west_length;
              // element.data[4].data = [
              //   {
              //     ...element.data[4].data[0],
              //     text: +landDataParcel.parcelData.south_length,
              //   },
              // ];
              // element.data[4].totalLength =
              //   +landDataParcel.parcelData.south_length;
              element.survayParcelCutter = [{
                direction: "الشطفة",
                NORTH_EAST_DIRECTION: (landDataParcel === null || landDataParcel === void 0 ? void 0 : (_landDataParcel$parce7 = landDataParcel.parcelShatfa) === null || _landDataParcel$parce7 === void 0 ? void 0 : _landDataParcel$parce7.SHATFA_NORTH_EAST_DIRECTION) || "",
                NORTH_WEST_DIRECTION: (landDataParcel === null || landDataParcel === void 0 ? void 0 : (_landDataParcel$parce8 = landDataParcel.parcelShatfa) === null || _landDataParcel$parce8 === void 0 ? void 0 : _landDataParcel$parce8.SHATFA_NORTH_WEST_DIRECTION) || "",
                SOUTH_EAST_DIRECTION: (landDataParcel === null || landDataParcel === void 0 ? void 0 : (_landDataParcel$parce9 = landDataParcel.parcelShatfa) === null || _landDataParcel$parce9 === void 0 ? void 0 : _landDataParcel$parce9.SHATFA_SOUTH_EAST_DIRECTION) || "",
                SOUTH_WEST_DIRECTION: (landDataParcel === null || landDataParcel === void 0 ? void 0 : (_landDataParcel$parce10 = landDataParcel.parcelShatfa) === null || _landDataParcel$parce10 === void 0 ? void 0 : _landDataParcel$parce10.SHATFA_SOUTH_WEST_DIRECTION) || ""
              }];
              this.state["electric_room_area" + index] = (landDataParcel === null || landDataParcel === void 0 ? void 0 : (_landDataParcel$parce11 = landDataParcel.parcelElectric) === null || _landDataParcel$parce11 === void 0 ? void 0 : _landDataParcel$parce11.electric_room_area) || "";
              this.state["electric_room_place" + index] = (landDataParcel === null || landDataParcel === void 0 ? void 0 : (_landDataParcel$parce12 = landDataParcel.parcelElectric) === null || _landDataParcel$parce12 === void 0 ? void 0 : _landDataParcel$parce12.electric_room_place) || "";
            }
          } else if (this.state.isFarz && !element.attributes) {
            var _element$area2, _element$data$5, _element$data$6, _element$data$7, _element$data$8;
            element.attributes = {
              ...landDataParcel.attributes
            };
            // element.attributes.PARCEL_PLAN_NO = element.parcel_name;
            element.attributes.PARCEL_AREA = ((_element$area2 = +element.area) === null || _element$area2 === void 0 ? void 0 : _element$area2.toFixed(2)) || "0";
            element.parcelData = {
              north_length: element === null || element === void 0 ? void 0 : (_element$data$5 = element.data[0]) === null || _element$data$5 === void 0 ? void 0 : _element$data$5.totalLength,
              north_desc: element.north_Desc,
              east_length: element === null || element === void 0 ? void 0 : (_element$data$6 = element.data[1]) === null || _element$data$6 === void 0 ? void 0 : _element$data$6.totalLength,
              east_desc: element.east_Desc,
              west_length: element === null || element === void 0 ? void 0 : (_element$data$7 = element.data[3]) === null || _element$data$7 === void 0 ? void 0 : _element$data$7.totalLength,
              west_desc: element.west_Desc,
              south_length: element === null || element === void 0 ? void 0 : (_element$data$8 = element.data[4]) === null || _element$data$8 === void 0 ? void 0 : _element$data$8.totalLength,
              south_desc: element.south_Desc
            };
          }
        }
        inputs.north.forEach((input, key) => {
          this.state[input.name + index] = temp[input.name + index] || "";
        });
        inputs.east.forEach((input, key) => {
          this.state[input.name + index] = temp[input.name + index] || "";
        });
        inputs.west.forEach((input, key) => {
          this.state[input.name + index] = temp[input.name + index] || "";
        });
        inputs.south.forEach((input, key) => {
          this.state[input.name + index] = temp[input.name + index] || "";
        });
        this.state["parcelSliceNo" + index] = requestType != 2 ? temp["parcelSliceNo" + index] || "" : "";
        this.state["parcel_name" + index] = element.parcel_name || temp["parcelName" + index] || "";
        this.state["area_text" + index] = temp["area_text" + index] || "";
      });
      this.recalculateBoundries(suggestionsParcels, obj => {
        Object.keys(obj).forEach(key => {
          this.state[key] = obj[key];
        });
      });
    }
    this.isLoaded = true;
    this.toLoadLines = true;
    //this.setState({});
  }
  saveEdit(id, name, i, polygonKey) {
    if (this.state.isUpdateContract) {
      this.state.polygons[polygonKey]["survayParcelCutter"][0][name] = this["edit_" + name + i + `${!isNaN(polygonKey) ? polygonKey : ""}`];
      this.setState({
        [name + "_isEdit_" + i + `${!isNaN(polygonKey) ? polygonKey : ""}`]: false
      }, () => {
        this.settoStore(this.state.polygons);
      });
    } else {
      if (["DISTRICT_NAME", "PARCEL_BLOCK_NO"].indexOf(name) == -1) {
        this.setState({
          [name + "_isEdit_" + i + `${!isNaN(polygonKey) ? polygonKey : ""}`]: false
          //karim for whaheed
          /*[`survayParcelCutter${!isNaN(polygonKey) ? polygonKey : ""}`]:
            this[
              "edit_" + name + i + `${!isNaN(polygonKey) ? polygonKey : ""}`
            ],*/
        }, () => {
          this.settoStore(this.state.polygons);
        });
      } else {
        this.state.polygons[i].attributes[name] = this["edit_" + name + i + `${!isNaN(polygonKey) ? polygonKey : ""}`];
        this.setState({
          [name + "_isEdit_" + i + `${!isNaN(polygonKey) ? polygonKey : ""}`]: false
        }, () => {
          this.settoStore(this.state.polygons);
        });
      }
    }
  }
  shouldComponentUpdate(nextProps, nextState) {
    var _nextProps$input, _this$props$input;
    if (!lodash_isEqual__WEBPACK_IMPORTED_MODULE_11___default()((_nextProps$input = nextProps.input) === null || _nextProps$input === void 0 ? void 0 : _nextProps$input.value, (_this$props$input = this.props.input) === null || _this$props$input === void 0 ? void 0 : _this$props$input.value) || !lodash_isEqual__WEBPACK_IMPORTED_MODULE_11___default()(nextProps.lang, this.props.lang) || !lodash_isEqual__WEBPACK_IMPORTED_MODULE_11___default()(nextProps.forceUpdate, this.props.forceUpdate)) ;
    {
      return true;
    }
    return false;
  }
  settoStore(polygons) {
    var _input$value, _input$value2, _input$value3, _input$value3$temp, _input$value4, _input$value5, _input$value6, _input$value6$temp, _input$value7, _input$value8, _input$value9, _input$value9$temp, _input$value10, _input$value11, _input$value12, _input$value12$temp, _input$value13, _input$value14, _input$value15, _input$value15$temp;
    const {
      mun
    } = this.state;
    const {
      input,
      inputs
    } = this.props;
    console.log("pooooollllllyyyyygggggooooonnnnnnss", polygons);
    var obj = {};
    polygons.forEach((element, key) => {
      obj["westBoundries" + key] = this.state["westBoundries" + key];
      obj["southBoundries" + key] = this.state["southBoundries" + key];
      obj["northBoundries" + key] = this.state["northBoundries" + key];
      obj["eastBoundries" + key] = this.state["eastBoundries" + key];
      inputs.north.forEach((input, index) => {
        obj[input.name + key] = this.state[input.name + key];
      });
      inputs.east.forEach((input, index) => {
        obj[input.name + key] = this.state[input.name + key];
      });
      inputs.west.forEach((input, index) => {
        obj[input.name + key] = this.state[input.name + key];
      });
      inputs.south.forEach((input, index) => {
        obj[input.name + key] = this.state[input.name + key];
      });
      obj["area" + key] = this.state["area" + key];
      obj["parcelSliceNo" + key] = this.state["parcelSliceNo" + key];
      obj["area_text" + key] = this.state["area_text" + key];
      obj["parcelName" + key] = this.state["parcel_name" + key];
      obj["duplixType" + key] = this.state["duplixType" + key] || 1;
      if (this.state.isUpdateContract) {
        if (!element.survayParcelCutter) {
          element.survayParcelCutter = [{
            direction: "الشطفة",
            NORTH_EAST_DIRECTION: "",
            NORTH_WEST_DIRECTION: "",
            SOUTH_EAST_DIRECTION: "",
            SOUTH_WEST_DIRECTION: ""
          }];
        }
        element.have_electric_room = this.state[`have_electric_room${key}`] || false;
        element.electric_room_area = this.state[`electric_room_area${key}`] || "";
        element.electric_room_place = this.state[`electric_room_place${key}`] || "";
      }
    });
    if (this.state.isKrokyUpdateContract || this.state.isPlan) {
      obj["have_electric_room"] = this.state["have_electric_room"];
      obj["electric_room_area"] = this.state["electric_room_area"];
    }
    var inputChanged = {
      suggestionsParcels: polygons,
      planDescription: this.state.planDescription,
      isWithinUrbanBoundry: this.state.isWithinUrbanBoundry,
      isUnPlannedParcelIntersect: this.state.isUnPlannedParcelIntersect,
      mun: mun,
      temp: {
        cadResults: (input === null || input === void 0 ? void 0 : (_input$value = input.value) === null || _input$value === void 0 ? void 0 : _input$value.cadData) || (input === null || input === void 0 ? void 0 : (_input$value2 = input.value) === null || _input$value2 === void 0 ? void 0 : _input$value2.temp) && (input === null || input === void 0 ? void 0 : (_input$value3 = input.value) === null || _input$value3 === void 0 ? void 0 : (_input$value3$temp = _input$value3.temp) === null || _input$value3$temp === void 0 ? void 0 : _input$value3$temp.cadResults) || this.state.cadResults || undefined,
        isKrokyUpdateContract: (input === null || input === void 0 ? void 0 : (_input$value4 = input.value) === null || _input$value4 === void 0 ? void 0 : _input$value4.isKrokyUpdateContract) || (input === null || input === void 0 ? void 0 : (_input$value5 = input.value) === null || _input$value5 === void 0 ? void 0 : _input$value5.temp) && (input === null || input === void 0 ? void 0 : (_input$value6 = input.value) === null || _input$value6 === void 0 ? void 0 : (_input$value6$temp = _input$value6.temp) === null || _input$value6$temp === void 0 ? void 0 : _input$value6$temp.isKrokyUpdateContract) || this.state.isKrokyUpdateContract || false,
        isUpdateContract: this.state.isUpdateContract || false,
        isPlan: (input === null || input === void 0 ? void 0 : (_input$value7 = input.value) === null || _input$value7 === void 0 ? void 0 : _input$value7.isPlan) || (input === null || input === void 0 ? void 0 : (_input$value8 = input.value) === null || _input$value8 === void 0 ? void 0 : _input$value8.temp) && (input === null || input === void 0 ? void 0 : (_input$value9 = input.value) === null || _input$value9 === void 0 ? void 0 : (_input$value9$temp = _input$value9.temp) === null || _input$value9$temp === void 0 ? void 0 : _input$value9$temp.isPlan) || this.state.isPlan || false,
        notify: (input === null || input === void 0 ? void 0 : (_input$value10 = input.value) === null || _input$value10 === void 0 ? void 0 : _input$value10.notify) || (input === null || input === void 0 ? void 0 : (_input$value11 = input.value) === null || _input$value11 === void 0 ? void 0 : _input$value11.temp) && (input === null || input === void 0 ? void 0 : (_input$value12 = input.value) === null || _input$value12 === void 0 ? void 0 : (_input$value12$temp = _input$value12.temp) === null || _input$value12$temp === void 0 ? void 0 : _input$value12$temp.notify) || this.state.notify || false,
        hideDrag: (input === null || input === void 0 ? void 0 : (_input$value13 = input.value) === null || _input$value13 === void 0 ? void 0 : _input$value13.hideDrag) || (input === null || input === void 0 ? void 0 : (_input$value14 = input.value) === null || _input$value14 === void 0 ? void 0 : _input$value14.temp) && (input === null || input === void 0 ? void 0 : (_input$value15 = input.value) === null || _input$value15 === void 0 ? void 0 : (_input$value15$temp = _input$value15.temp) === null || _input$value15$temp === void 0 ? void 0 : _input$value15$temp.hideDrag) || this.state.hideDrag || false,
        ...obj
      }
    };
    if (this.state.isKrokyUpdateContract || this.state.isPlan) {
      inputChanged["survayParcelCutter"] = this.state.survayParcelCutter;
    }
    input.onChange({
      ...inputChanged
    });
    this.setState({
      polygons: polygons,
      ...obj
    });
  }
  resetStore() {
    const {
      mun
    } = this.state;
    const {
      input,
      inputs
    } = this.props;
    var obj = {};
    this.state.polygons.forEach((element, key) => {
      obj["westBoundries" + key] = "";
      obj["southBoundries" + key] = "";
      obj["northBoundries" + key] = "";
      obj["eastBoundries" + key] = "";
      inputs.north.forEach((input, index) => {
        obj[input.name + key] = "";
      });
      inputs.east.forEach((input, index) => {
        obj[input.name + key] = "";
      });
      inputs.west.forEach((input, index) => {
        obj[input.name + key] = "";
      });
      inputs.south.forEach((input, index) => {
        obj[input.name + key] = "";
      });
      obj["area" + key] = "";
      obj["parcelSliceNo" + key] = "";
      obj["area_text" + key] = "";
      obj["parcelName" + key] = "";
      obj["duplixType" + key] = "";
    });
    if (this.state.isKrokyUpdateContract || this.state.isPlan) {
      obj["have_electric_room"] = false;
      obj["electric_room_area"] = "";
    }
    var polygons = [];
    this.setState({
      polygons: polygons,
      ...obj
    });
    var inputChanged = {
      suggestionsParcels: polygons,
      planDescription: "",
      isWithinUrbanBoundry: false,
      isUnPlannedParcelIntersect: false,
      mun: mun,
      temp: {
        //map: this.map,
        cadResults: undefined,
        isKrokyUpdateContract: this.state.isKrokyUpdateContract || false,
        isUpdateContract: this.state.isUpdateContract || false,
        isPlan: this.state.isPlan || false,
        notify: false,
        hideDrag: false,
        ...obj
      }
    };
    if (this.state.isKrokyUpdateContract || this.state.isPlan) {
      inputChanged["survayParcelCutter"] = [{
        direction: "الشطفة",
        NORTH_EAST_DIRECTION: "",
        NORTH_WEST_DIRECTION: "",
        SOUTH_EAST_DIRECTION: "",
        SOUTH_WEST_DIRECTION: ""
      }];
    } else if (this.state.isUpdateContract) {
      inputChanged["suggestionsParcels"].forEach((parcel, index) => {
        parcel.survayParcelCutter = [{
          direction: "الشطفة",
          NORTH_EAST_DIRECTION: "",
          NORTH_WEST_DIRECTION: "",
          SOUTH_EAST_DIRECTION: "",
          SOUTH_WEST_DIRECTION: ""
        }];
        polygon.have_electric_room = false;
        polygon.electric_room_area = "";
        polygon.electric_room_place = "";
      });
    }
    this.props.input.onChange({
      ...inputChanged
    });
  }
  componentDidUpdate() {
    var _input$value16, _mainObject$data_msa6, _mainObject$data_msa7, _mainObject$data_msa8, _mainObject$data_msa9, _mainObject$data_msa15, _mainObject$data_msa16, _mainObject$data_msa17, _mainObject$data_msa18;
    const {
      input
    } = this.props;
    let mainObject = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["selectMainObject"])(this.props);
    if (input !== null && input !== void 0 && input.value && (input === null || input === void 0 ? void 0 : input.value) != "" && input !== null && input !== void 0 && (_input$value16 = input.value) !== null && _input$value16 !== void 0 && _input$value16.justInvoked) {
      var _input$value17, _this$props$currentMo6, _this$props$currentMo7, _input$value18, _input$value19, _input$value20, _input$value21, _input$value22;
      this.InvokedToAdParcel = true;
      input.value.justInvoked = false;
      this.isLoaded = false;
      this.map = Object(_main_helpers_functions_filters_state__WEBPACK_IMPORTED_MODULE_14__["getMap"])();
      this.toLoadLines = true;
      this.state.cadResults = (input === null || input === void 0 ? void 0 : (_input$value17 = input.value) === null || _input$value17 === void 0 ? void 0 : _input$value17.cadData) || undefined;
      this.state.isTadkekMesahy = (this.props.currentModule.app_id || ((_this$props$currentMo6 = this.props.currentModule) === null || _this$props$currentMo6 === void 0 ? void 0 : (_this$props$currentMo7 = _this$props$currentMo6.record) === null || _this$props$currentMo7 === void 0 ? void 0 : _this$props$currentMo7.app_id)) == 29;
      this.state.isTadkekMesahyModule = this.props.currentModule.id != 114;
      this.state.isKrokyUpdateContract = (input === null || input === void 0 ? void 0 : (_input$value18 = input.value) === null || _input$value18 === void 0 ? void 0 : _input$value18.isKrokyUpdateContract) || false;
      this.state.isUpdateContract = (input === null || input === void 0 ? void 0 : (_input$value19 = input.value) === null || _input$value19 === void 0 ? void 0 : _input$value19.isUpdateContract) || false;
      this.state.isPlan = (input === null || input === void 0 ? void 0 : (_input$value20 = input.value) === null || _input$value20 === void 0 ? void 0 : _input$value20.isPlan) || false;
      this.state.notify = (input === null || input === void 0 ? void 0 : (_input$value21 = input.value) === null || _input$value21 === void 0 ? void 0 : _input$value21.notify) || false;
      this.state.hideDrag = (input === null || input === void 0 ? void 0 : (_input$value22 = input.value) === null || _input$value22 === void 0 ? void 0 : _input$value22.hideDrag) || false;
      this.clearInputs();
      if (this.state.isKrokyUpdateContract || this.state.isPlan) {
        this.state.survayParcelCutter = [{
          direction: "الشطفة",
          NORTH_EAST_DIRECTION: "",
          NORTH_WEST_DIRECTION: "",
          SOUTH_EAST_DIRECTION: "",
          SOUTH_WEST_DIRECTION: ""
        }];
      }
      if (this.state.cadResults) setTimeout(() => {
        if (this.state.isTadkekMesahy) {
          var _this$state$cadResult, _this$state$cadResult2, _this$state$cadResult3, _this$state$cadResult4, _this$state$cadResult5, _this$state$cadResult6, _this$state$cadResult7, _this$state$cadResult8;
          if (((_this$state$cadResult = this.state.cadResults) === null || _this$state$cadResult === void 0 ? void 0 : (_this$state$cadResult2 = _this$state$cadResult.data[0]) === null || _this$state$cadResult2 === void 0 ? void 0 : (_this$state$cadResult3 = _this$state$cadResult2.shapeFeatures) === null || _this$state$cadResult3 === void 0 ? void 0 : (_this$state$cadResult4 = _this$state$cadResult3.filter(x => !x.isFullBoundry)) === null || _this$state$cadResult4 === void 0 ? void 0 : _this$state$cadResult4.length) == 0) {
            window.notifySystem("error", "( boundry لا يحتوى على طبقة ) الكاد المرفوع غير مطابق للمواصفات");
          } else if (((_this$state$cadResult5 = this.state.cadResults) === null || _this$state$cadResult5 === void 0 ? void 0 : (_this$state$cadResult6 = _this$state$cadResult5.data[0]) === null || _this$state$cadResult6 === void 0 ? void 0 : (_this$state$cadResult7 = _this$state$cadResult6.shapeFeatures) === null || _this$state$cadResult7 === void 0 ? void 0 : (_this$state$cadResult8 = _this$state$cadResult7.filter(x => !x.isFullBoundry)) === null || _this$state$cadResult8 === void 0 ? void 0 : _this$state$cadResult8.length) != mainObject.landData.landData.lands.parcels.length) {
            window.notifySystem("error", "عدد الأراضي المرفوعة لا يتوافق مع عدد الأراضي المختارة");
          } else {
            var _this$state$cadResult9, _this$state$cadResult10, _this$state$cadResult11;
            /*else if (!this.state.cadResults?.data[0]?.shapeFeatures?.find((x) => x.isFullBoundry)) {
            window.notifySystem(
              "error",
              "( full_boundry لا يحتوى على طبقة ) الكاد المرفوع غير مطابق للمواصفات"
            );
            }*/
            if (!this.checkOverlayFeatures((_this$state$cadResult9 = this.state.cadResults) === null || _this$state$cadResult9 === void 0 ? void 0 : (_this$state$cadResult10 = _this$state$cadResult9.data[0]) === null || _this$state$cadResult10 === void 0 ? void 0 : (_this$state$cadResult11 = _this$state$cadResult10.shapeFeatures) === null || _this$state$cadResult11 === void 0 ? void 0 : _this$state$cadResult11.filter(x => !x.isFullBoundry), mainObject.landData.landData.lands.parcels)) {
              window.notifySystem("error", "الرفع المساحي لا يتقاطع مع حدود الأراضي المختارة");
            } else {
              this.buildCADDetails(false);
            }
          }
        } else {
          this.buildCADDetails(false);
        }
      });else {
        var _this$props13, _this$props13$current, _this$props14, _this$props14$current, _this$props$mainObjec19, _this$props$mainObjec20, _this$props$mainObjec21;
        this.resetMsa7yData();
        if ((((_this$props13 = this.props) === null || _this$props13 === void 0 ? void 0 : (_this$props13$current = _this$props13.currentModule) === null || _this$props13$current === void 0 ? void 0 : _this$props13$current.record.app_id) == 14 || ((_this$props14 = this.props) === null || _this$props14 === void 0 ? void 0 : (_this$props14$current = _this$props14.currentModule) === null || _this$props14$current === void 0 ? void 0 : _this$props14$current.app_id) == 14) && ((_this$props$mainObjec19 = this.props.mainObject) === null || _this$props$mainObjec19 === void 0 ? void 0 : (_this$props$mainObjec20 = _this$props$mainObjec19.waseka) === null || _this$props$mainObjec20 === void 0 ? void 0 : (_this$props$mainObjec21 = _this$props$mainObjec20.waseka) === null || _this$props$mainObjec21 === void 0 ? void 0 : _this$props$mainObjec21.sakType) == "4") {
          this.loadParcelsFromLandData();
          this.settoStore(this.state.polygons);
        }
      }
    } else if (this.isLoaded && window.mapInfo && !(mainObject !== null && mainObject !== void 0 && (_mainObject$data_msa6 = mainObject.data_msa7y) !== null && _mainObject$data_msa6 !== void 0 && (_mainObject$data_msa7 = _mainObject$data_msa6.msa7yData) !== null && _mainObject$data_msa7 !== void 0 && (_mainObject$data_msa8 = _mainObject$data_msa7.mapviewer) !== null && _mainObject$data_msa8 !== void 0 && (_mainObject$data_msa9 = _mainObject$data_msa8.mapGraphics) !== null && _mainObject$data_msa9 !== void 0 && _mainObject$data_msa9.length)) {
      this.map = Object(_main_helpers_functions_filters_state__WEBPACK_IMPORTED_MODULE_14__["getMap"])();
      if (this.state.isPropetryCheck) {
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["zoomToLayer"])("boundriesGraphicLayer", this.map, this.state["zoomRatio"]);
      }
      if (Object(_main_helpers_functions_filters_state__WEBPACK_IMPORTED_MODULE_14__["getIsMapLoaded"])()) {
        var _mainObject$data_msa10, _mainObject$data_msa11, _mainObject$data_msa12, _mainObject$data_msa13, _mainObject$data_msa14, _this$props15, _this$props15$current, _this$props16, _this$props16$current, _this$props$mainObjec22, _this$props$mainObjec23, _this$props$mainObjec24, _mainObject$landData60, _mainObject$landData61, _mainObject$landData62;
        Object(_main_helpers_functions_filters_state__WEBPACK_IMPORTED_MODULE_14__["setIsMapLoaded"])(false);
        this.toLoadLines = true;
        this.InvokedToAdParcel = !((_mainObject$data_msa10 = mainObject.data_msa7y) !== null && _mainObject$data_msa10 !== void 0 && (_mainObject$data_msa11 = _mainObject$data_msa10.msa7yData) !== null && _mainObject$data_msa11 !== void 0 && (_mainObject$data_msa12 = _mainObject$data_msa11.cadDetails) !== null && _mainObject$data_msa12 !== void 0 && (_mainObject$data_msa13 = _mainObject$data_msa12.suggestionsParcels) !== null && _mainObject$data_msa13 !== void 0 && (_mainObject$data_msa14 = _mainObject$data_msa13.filter(r => !r.isFullBoundry && r.data.filter(e => +e.totalLength == 0).length > 0)) !== null && _mainObject$data_msa14 !== void 0 && _mainObject$data_msa14.length) ? false : true;
        if (this.InvokedToAdParcel) {
          this.getSuggestLine();
        }
        if ((((_this$props15 = this.props) === null || _this$props15 === void 0 ? void 0 : (_this$props15$current = _this$props15.currentModule) === null || _this$props15$current === void 0 ? void 0 : _this$props15$current.record.app_id) == 14 || ((_this$props16 = this.props) === null || _this$props16 === void 0 ? void 0 : (_this$props16$current = _this$props16.currentModule) === null || _this$props16$current === void 0 ? void 0 : _this$props16$current.app_id) == 14) && ((_this$props$mainObjec22 = this.props.mainObject) === null || _this$props$mainObjec22 === void 0 ? void 0 : (_this$props$mainObjec23 = _this$props$mainObjec22.waseka) === null || _this$props$mainObjec23 === void 0 ? void 0 : (_this$props$mainObjec24 = _this$props$mainObjec23.waseka) === null || _this$props$mainObjec24 === void 0 ? void 0 : _this$props$mainObjec24.sakType) == "4" && (mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData60 = mainObject.landData) === null || _mainObject$landData60 === void 0 ? void 0 : (_mainObject$landData61 = _mainObject$landData60.landData) === null || _mainObject$landData61 === void 0 ? void 0 : (_mainObject$landData62 = _mainObject$landData61.lands) === null || _mainObject$landData62 === void 0 ? void 0 : _mainObject$landData62.parcels.length) == 1) {
          this.loadParcelsFromLandData();
        }
        // else {
        //   setTimeout(() => {
        //     this.buildCADDetails(true);
        //   });
        // }
        this.isLoaded = false;
      }
    } else if (this.isLoaded && window.mapInfo && mainObject !== null && mainObject !== void 0 && (_mainObject$data_msa15 = mainObject.data_msa7y) !== null && _mainObject$data_msa15 !== void 0 && (_mainObject$data_msa16 = _mainObject$data_msa15.msa7yData) !== null && _mainObject$data_msa16 !== void 0 && (_mainObject$data_msa17 = _mainObject$data_msa16.mapviewer) !== null && _mainObject$data_msa17 !== void 0 && (_mainObject$data_msa18 = _mainObject$data_msa17.mapGraphics) !== null && _mainObject$data_msa18 !== void 0 && _mainObject$data_msa18.length) {
      this.map = Object(_main_helpers_functions_filters_state__WEBPACK_IMPORTED_MODULE_14__["getMap"])();
      if (this.state.isPropetryCheck) {
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["zoomToLayer"])("boundriesGraphicLayer", this.map, this.state["zoomRatio"]);
      }
      if (Object(_main_helpers_functions_filters_state__WEBPACK_IMPORTED_MODULE_14__["getIsMapLoaded"])()) {
        var _this$props17, _this$props17$current, _this$props18, _this$props18$current, _this$props$mainObjec25, _this$props$mainObjec26, _this$props$mainObjec27, _mainObject$landData63, _mainObject$landData64, _mainObject$landData65;
        setTimeout(() => {
          if (this.state.isTadkekMesahy) {
            Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "ParcelPlanNoGraphicLayer");
            this.neighbors.forEach(f => {
              f.geometry = new esri.geometry.Polygon(f.geometry);
              Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["addParcelNo"])(f.geometry.getExtent().getCenter(), this.map, f.attributes.PARCEL_PLAN_NO + "", "ParcelPlanNoGraphicLayer", 20, [0, 0, 0]);
            });
          }
        }, 100);
        Object(_main_helpers_functions_filters_state__WEBPACK_IMPORTED_MODULE_14__["setIsMapLoaded"])(false);
        if ((((_this$props17 = this.props) === null || _this$props17 === void 0 ? void 0 : (_this$props17$current = _this$props17.currentModule) === null || _this$props17$current === void 0 ? void 0 : _this$props17$current.record.app_id) == 14 || ((_this$props18 = this.props) === null || _this$props18 === void 0 ? void 0 : (_this$props18$current = _this$props18.currentModule) === null || _this$props18$current === void 0 ? void 0 : _this$props18$current.app_id) == 14) && ((_this$props$mainObjec25 = this.props.mainObject) === null || _this$props$mainObjec25 === void 0 ? void 0 : (_this$props$mainObjec26 = _this$props$mainObjec25.waseka) === null || _this$props$mainObjec26 === void 0 ? void 0 : (_this$props$mainObjec27 = _this$props$mainObjec26.waseka) === null || _this$props$mainObjec27 === void 0 ? void 0 : _this$props$mainObjec27.sakType) == "4" && (mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData63 = mainObject.landData) === null || _mainObject$landData63 === void 0 ? void 0 : (_mainObject$landData64 = _mainObject$landData63.landData) === null || _mainObject$landData64 === void 0 ? void 0 : (_mainObject$landData65 = _mainObject$landData64.lands) === null || _mainObject$landData65 === void 0 ? void 0 : _mainObject$landData65.parcels.length) == 1) {
          this.loadParcelsFromLandData();
        } else {
          this.settoStore(this.state.polygons);
        }
        this.isLoaded = false;
      }
    } else {
      if (!this.isLoaded && input.value.isApplyTadkekMsa7yData) {
        input.value.isApplyTadkekMsa7yData = false;
        this.reApplyTadkekMsa7yData(mainObject);
      } else if (!this.isLoaded && input.value.isReset) {
        this.resetMsa7yData();
      }
    }
    return false;
  }
  render() {
    var _this$props$currentMo8, _this$props$currentMo9, _this$props$currentMo10, _this$props$currentMo11, _this$props$currentMo12, _this$props$currentMo13, _mainObject$landData66, _mainObject$landData67, _mainObject$landData68, _mainObject$landData69, _mainObject$landData70, _mainObject$landData71;
    const {
      planDescription,
      survayParcelCutter,
      isKrokyUpdateContract,
      isPlan,
      isUpdateContract,
      reqType,
      viewNumbersOnly,
      isTadkekMesahy,
      isFarz,
      isPropetryCheck
    } = this.state;
    if (isTadkekMesahy) {
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["clearGraphicFromLayer"])(this.map, "addedParclGraphicLayer");
    }
    let mainObject = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["selectMainObject"])(this.props);
    const {
      isView,
      inputs
    } = this.props;
    let isFinishStepContractUpdate = ((_this$props$currentMo8 = this.props.currentModule) === null || _this$props$currentMo8 === void 0 ? void 0 : _this$props$currentMo8.id) == 118 && ((_this$props$currentMo9 = this.props.currentModule) === null || _this$props$currentMo9 === void 0 ? void 0 : (_this$props$currentMo10 = _this$props$currentMo9.record) === null || _this$props$currentMo10 === void 0 ? void 0 : _this$props$currentMo10.app_id) == 14 || ((_this$props$currentMo11 = this.props.currentModule) === null || _this$props$currentMo11 === void 0 ? void 0 : _this$props$currentMo11.id) == 119 && ((_this$props$currentMo12 = this.props.currentModule) === null || _this$props$currentMo12 === void 0 ? void 0 : (_this$props$currentMo13 = _this$props$currentMo12.record) === null || _this$props$currentMo13 === void 0 ? void 0 : _this$props$currentMo13.app_id) == 27;

    // const {
    //   landData: {
    //     landData: {
    //       area,
    //       lands: { parcels },
    //     },
    //   },
    // } = mainObject;
    let requestType = mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData66 = mainObject.landData) === null || _mainObject$landData66 === void 0 ? void 0 : _mainObject$landData66.requestType;
    let parcels = mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData67 = mainObject.landData) === null || _mainObject$landData67 === void 0 ? void 0 : (_mainObject$landData68 = _mainObject$landData67.landData) === null || _mainObject$landData68 === void 0 ? void 0 : (_mainObject$landData69 = _mainObject$landData68.lands) === null || _mainObject$landData69 === void 0 ? void 0 : _mainObject$landData69.parcels;
    let area = mainObject === null || mainObject === void 0 ? void 0 : (_mainObject$landData70 = mainObject.landData) === null || _mainObject$landData70 === void 0 ? void 0 : (_mainObject$landData71 = _mainObject$landData70.landData) === null || _mainObject$landData71 === void 0 ? void 0 : _mainObject$landData71.area;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, isFinishStepContractUpdate ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_12___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("table", {
      className: "table table-bordered no-margin",
      style: {
        marginTop: "23px"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("thead", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("tr", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("th", null, "\u0631\u0642\u0645 \u0642\u0637\u0639\u0629 \u0627\u0644\u0623\u0631\u0636"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("th", null, "\u0648\u0635\u0641 \u0627\u0644\u062D\u062F\u0648\u062F"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("tbody", null, this.state.polygons.map((parcel, index) => {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("tr", {
        key: index
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("td", null, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(parcel.parcel_name)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("td", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("b", null, "\u0627\u0644\u062D\u062F \u0627\u0644\u0634\u0645\u0627\u0644\u064A :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", {
        dangerouslySetInnerHTML: {
          __html: `طوله <b>${Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(parcel.data[0].totalLength)}</b> م ويحدها ${Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(parcel.north_Desc)}`
        }
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("b", null, "\u0627\u0644\u062D\u062F \u0627\u0644\u0634\u0631\u0642\u064A :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", {
        dangerouslySetInnerHTML: {
          __html: `طوله <b>${Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(parcel.data[1].totalLength)}</b> م ويحدها ${Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(parcel.east_Desc)}`
        }
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("b", null, "\u0627\u0644\u062D\u062F \u0627\u0644\u062C\u0646\u0648\u0628\u064A :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", {
        dangerouslySetInnerHTML: {
          __html: `طوله <b>${Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(parcel.data[4].totalLength)}</b> م ويحدها ${Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(parcel.south_Desc)}`
        }
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("b", null, "\u0627\u0644\u062D\u062F \u0627\u0644\u063A\u0631\u0628\u064A :"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("br", null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", {
        dangerouslySetInnerHTML: {
          __html: `طوله <b>${Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(parcel.data[3].totalLength)}</b> م ويحدها ${Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(parcel.west_Desc)}`
        }
      })));
    })))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_12___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
      style: {
        marginTop: "50px"
      }
    }, !isKrokyUpdateContract && !isUpdateContract && !this.state.isTadkekMesahy && !isFarz && planDescription != "" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("p", {
      style: {
        textAlign: "right",
        fontSize: "18px"
      }
    }, planDescription)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, this.state.isUnPlannedParcelIntersect && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, "\u0627\u0644\u0623\u0631\u0636 \u0627\u0644\u0645\u0631\u0641\u0648\u0639\u0629 \u062A\u062A\u0642\u0627\u0637\u0639 \u0645\u0639 \u0623\u062D\u062F \u0627\u0644\u0623\u0631\u0627\u0636\u064A \u0641\u064A \u0637\u0628\u0642\u0629 \u0627\u0644\u0623\u0631\u0627\u0636\u064A \u0627\u0644\u062E\u0627\u0645 \u0628\u0631\u0642\u0645 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629 ", this.state.isUnPlannedParcelIntersect), !isView && this.state.polygons && this.state.polygons.length > 0 && this.state.polygons[0].area != -1 && (!isFarz && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(antd_lib_tabs__WEBPACK_IMPORTED_MODULE_9___default.a, {
      style: {
        marginTop: "30px"
      },
      tabPosition: "top",
      type: "card",
      activeKey: this.state.activeKey,
      onChange: this.onChange
    }, this.state.polygons.map((polygon, key) => {
      var _parcels$key, _parcels$key$attribut, _parcels2, _parcels2$attributes, _parcels$key2, _parcels$key2$attribu, _polygon$data$0$total, _polygon$data$1$total, _polygon$data$3$total, _polygon$data$4$total, _polygon$survayParcel, _polygon$survayParcel2;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(TabPane, {
        tab: Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(polygon.parcel_name),
        key: key + 1
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
        key: key,
        style: {
          pointerEvents: this.state.isTadkekMesahyModule && this.state.isTadkekMesahy || this.props.isDisabled ? "none" : "auto"
        }
      }, !isKrokyUpdateContract && !isUpdateContract && !this.state.isTadkekMesahy && !isFarz && (polygon.area || parseFloat((parcels === null || parcels === void 0 ? void 0 : (_parcels$key = parcels[key]) === null || _parcels$key === void 0 ? void 0 : (_parcels$key$attribut = _parcels$key.attributes) === null || _parcels$key$attribut === void 0 ? void 0 : _parcels$key$attribut.PARCEL_AREA) || 0)) > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_12___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, "\u0627\u0644\u0645\u0633\u0627\u062D\u0629 \u0627\u0644\u0643\u0644\u064A\u0629 \u0644\u0644\u0623\u0631\u0636 \u062D\u0633\u0628 \u0627\u0644\u0637\u0628\u064A\u0639\u0629 :", " ", Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])((+polygon.area).toFixed(2)), " ", "\u0645", Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(2)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, "\u0645\u0633\u0627\u062D\u0629 \u0627\u0644\u0623\u0631\u0636 \u062D\u0633\u0628 \u0648\u062B\u064A\u0642\u0629 \u0627\u0644\u0645\u0644\u0643\u064A\u0629 :", " ", Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(isKrokyUpdateContract ? polygon.parcel_name != "حدود المعاملة" ? parseFloat((parcels === null || parcels === void 0 ? void 0 : (_parcels2 = parcels[key - 1]) === null || _parcels2 === void 0 ? void 0 : (_parcels2$attributes = _parcels2.attributes) === null || _parcels2$attributes === void 0 ? void 0 : _parcels2$attributes.PARCEL_AREA) || 0).toFixed(2) : area : parseFloat((parcels === null || parcels === void 0 ? void 0 : (_parcels$key2 = parcels[key]) === null || _parcels$key2 === void 0 ? void 0 : (_parcels$key2$attribu = _parcels$key2.attributes) === null || _parcels$key2$attribu === void 0 ? void 0 : _parcels$key2$attribu.PARCEL_AREA) || 0).toFixed(2)), " ", "\u0645", Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(2))), (isKrokyUpdateContract || isUpdateContract || this.state.isTadkekMesahy || isFarz) && polygon.area > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_12___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, "\u0627\u0644\u0645\u0633\u0627\u062D\u0629 \u0627\u0644\u0643\u0644\u064A\u0629 :", " ", Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])((+polygon.cad_area || +polygon.area).toFixed(2)), " ", "\u0645", Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(2))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_21__["DragDropContext"], {
        onDragEnd: this.onDragEnd
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
        style: itemContainerNorth
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("p", {
        style: {
          textAlign: "center",
          fontSize: "18px"
        }
      }, "\u0627\u0644\u0634\u0645\u0627\u0644"), inputs.north.map((input, index) => {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("input", {
          name: input.name,
          type: input.type || "text",
          className: "ant-input",
          placeholder: input.placeholder,
          required: "required",
          value: polygon[input.name],
          onChange: this.onInputTextChange.bind(this, polygon, key)
        });
      }), !viewNumbersOnly && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_21__["Droppable"], {
        droppableId: "droppable_North"
      }, (provided, snapshot) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
        ref: provided.innerRef,
        style: getListStyle(snapshot.isDraggingOver)
      }, this.state["northBoundries" + key] && this.state["northBoundries" + key].map((item, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_21__["Draggable"], {
        key: item.id,
        draggableId: item.id,
        index: index
      }, (provided, snapshot) => {
        var _item$content;
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_6___default()({
          ref: provided.innerRef
        }, provided.draggableProps, provided.dragHandleProps, {
          style: getItemStyle(snapshot.isDragging, provided.draggableProps.style),
          onMouseOver: this.onmouseover.bind(this, item.data),
          onMouseLeave: this.onmouseleave.bind(this)
        }), Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(item.content && ((_item$content = +item.content) === null || _item$content === void 0 ? void 0 : _item$content.toFixed(2))));
      })), provided.placeholder)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("p", {
        style: {
          float: "left",
          textAlign: "left",
          fontSize: "20px"
        }
      }, "\u0637\u0648\u0644 \u0627\u0644\u062D\u062F :", " ", Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(polygon.data[0].totalLength && ((_polygon$data$0$total = +polygon.data[0].totalLength) === null || _polygon$data$0$total === void 0 ? void 0 : _polygon$data$0$total.toFixed(2))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
        style: {
          display: "flex"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
        style: itemContainerEast
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("p", {
        style: {
          textAlign: "center",
          fontSize: "18px"
        }
      }, "\u0627\u0644\u0634\u0631\u0642"), inputs.east.map((input, index) => {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("input", {
          name: input.name,
          type: input.type || "text",
          className: "ant-input",
          placeholder: input.placeholder,
          required: "required",
          value: polygon[input.name],
          onChange: this.onInputTextChange.bind(this, polygon, key)
        });
      }), !viewNumbersOnly && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_21__["Droppable"], {
        droppableId: "droppable_East"
      }, (provided, snapshot) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
        ref: provided.innerRef,
        style: getListStyle(snapshot.isDraggingOver)
      }, this.state["eastBoundries" + key] && this.state["eastBoundries" + key].map((item, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_21__["Draggable"], {
        key: item.id,
        draggableId: item.id,
        index: index
      }, (provided, snapshot) => {
        var _item$content2;
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_6___default()({
          ref: provided.innerRef
        }, provided.draggableProps, provided.dragHandleProps, {
          style: getItemStyle(snapshot.isDragging, provided.draggableProps.style),
          onMouseOver: this.onmouseover.bind(this, item.data),
          onMouseLeave: this.onmouseleave.bind(this)
        }), Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(item.content && ((_item$content2 = +item.content) === null || _item$content2 === void 0 ? void 0 : _item$content2.toFixed(2))));
      })), provided.placeholder)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("p", {
        style: {
          float: "left",
          textAlign: "left",
          fontSize: "20px"
        }
      }, "\u0637\u0648\u0644 \u0627\u0644\u062D\u062F :", " ", Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(polygon.data[1].totalLength && ((_polygon$data$1$total = +polygon.data[1].totalLength) === null || _polygon$data$1$total === void 0 ? void 0 : _polygon$data$1$total.toFixed(2))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
        style: itemContainerEmpty
      }, " "), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
        style: itemContainerWest
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("p", {
        style: {
          textAlign: "center",
          fontSize: "18px"
        }
      }, "\u0627\u0644\u063A\u0631\u0628"), inputs.west.map((input, index) => {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("input", {
          name: input.name,
          type: input.type || "text",
          className: "ant-input",
          placeholder: input.placeholder,
          required: "required",
          value: polygon[input.name],
          onChange: this.onInputTextChange.bind(this, polygon, key)
        });
      }), !viewNumbersOnly && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_21__["Droppable"], {
        droppableId: "droppable_West"
      }, (provided, snapshot) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
        ref: provided.innerRef,
        style: getListStyle(snapshot.isDraggingOver)
      }, this.state["westBoundries" + key] && this.state["westBoundries" + key].map((item, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_21__["Draggable"], {
        key: item.id,
        draggableId: item.id,
        index: index
      }, (provided, snapshot) => {
        var _item$content3;
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_6___default()({
          ref: provided.innerRef
        }, provided.draggableProps, provided.dragHandleProps, {
          style: getItemStyle(snapshot.isDragging, provided.draggableProps.style),
          onMouseOver: this.onmouseover.bind(this, item.data),
          onMouseLeave: this.onmouseleave.bind(this)
        }), Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(item.content && ((_item$content3 = +item.content) === null || _item$content3 === void 0 ? void 0 : _item$content3.toFixed(2))));
      })), provided.placeholder)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("p", {
        style: {
          float: "left",
          textAlign: "left",
          fontSize: "20px"
        }
      }, "\u0637\u0648\u0644 \u0627\u0644\u062D\u062F :", " ", Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(polygon.data[3].totalLength && ((_polygon$data$3$total = +polygon.data[3].totalLength) === null || _polygon$data$3$total === void 0 ? void 0 : _polygon$data$3$total.toFixed(2)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
        style: itemContainerSouth
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("p", {
        style: {
          textAlign: "center",
          fontSize: "18px"
        }
      }, "\u0627\u0644\u062C\u0646\u0648\u0628"), inputs.south.map((input, index) => {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("input", {
          name: input.name,
          type: input.type || "text",
          className: "ant-input",
          placeholder: input.placeholder,
          required: "required",
          value: polygon[input.name],
          onChange: this.onInputTextChange.bind(this, polygon, key)
        });
      }), !viewNumbersOnly && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_21__["Droppable"], {
        droppableId: "droppable_South"
      }, (provided, snapshot) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
        ref: provided.innerRef,
        style: getListStyle(snapshot.isDraggingOver)
      }, this.state["southBoundries" + key] && this.state["southBoundries" + key].map((item, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(react_beautiful_dnd__WEBPACK_IMPORTED_MODULE_21__["Draggable"], {
        key: item.id,
        draggableId: item.id,
        index: index
      }, (provided, snapshot) => {
        var _item$content4;
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_6___default()({
          ref: provided.innerRef
        }, provided.draggableProps, provided.dragHandleProps, {
          style: getItemStyle(snapshot.isDragging, provided.draggableProps.style),
          onMouseOver: this.onmouseover.bind(this, item.data),
          onMouseLeave: this.onmouseleave.bind(this)
        }), Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(item.content && ((_item$content4 = +item.content) === null || _item$content4 === void 0 ? void 0 : _item$content4.toFixed(2))));
      })), provided.placeholder)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("p", {
        style: {
          float: "left",
          textAlign: "left",
          fontSize: "20px"
        }
      }, "\u0637\u0648\u0644 \u0627\u0644\u062D\u062F :", " ", Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(polygon.data[4].totalLength && ((_polygon$data$4$total = +polygon.data[4].totalLength) === null || _polygon$data$4$total === void 0 ? void 0 : _polygon$data$4$total.toFixed(2))))))), polygon.parcel_name != "حدود المعاملة" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(antd_lib_row__WEBPACK_IMPORTED_MODULE_1___default.a, {
        gutter: [24, 16]
      }, (isUpdateContract || isFarz || this.state.isTadkekMesahy) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
        style: {
          pointerEvents: this.state.isTadkekMesahyModule && this.state.isTadkekMesahy ? "none" : "auto"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(antd_lib_col__WEBPACK_IMPORTED_MODULE_3___default.a, {
        span: (isFarz || isUpdateContract) && 9 || 4
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a, {
        getPopupContainer: trigger => trigger.parentNode,
        name: "parcel_name",
        onChange: val => {
          this.onParcelTextChange(polygon, key, {
            target: {
              value: val,
              name: "parcel_name"
            }
          });
        },
        placeholder: "\u0631\u0642\u0645 \u0642\u0637\u0639\u0629 \u0627\u0644\u0627\u0631\u0636",
        value: this.state[`parcel_name${key}`],
        disabled: viewNumbersOnly
      }, parcels === null || parcels === void 0 ? void 0 : parcels.map((e, i) => {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(Option, {
          key: e.attributes.PARCEL_SPATIAL_ID,
          value: e.attributes.PARCEL_PLAN_NO
        }, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["localizeNumber"])(e.attributes.PARCEL_PLAN_NO));
      }))))), isKrokyUpdateContract && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(antd_lib_row__WEBPACK_IMPORTED_MODULE_1___default.a, {
        gutter: [24, 16]
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(antd_lib_col__WEBPACK_IMPORTED_MODULE_3___default.a, {
        span: 9
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("input", {
        name: "area",
        type: "text",
        className: "form-control",
        placeholder: "\u0627\u0644\u0645\u0633\u0627\u062D\u0629 (\u0645\u06F2)",
        required: "required",
        value: this.state[`area${key}`],
        onChange: this.onInputTextChange.bind(this, polygon, key)
      }))), (isFarz || isUpdateContract) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
        className: "col-xs-12"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, !polygon.isFullBoundry && ((_polygon$survayParcel = polygon.survayParcelCutter) === null || _polygon$survayParcel === void 0 ? void 0 : _polygon$survayParcel.length) > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
        style: {
          marginTop: "20px"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("h1", {
        className: "titleSelectedParcel"
      }, "\u0627\u0644\u0634\u0637\u0641\u0627\u062A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("table", {
        className: "table table-bordered",
        style: {
          marginTop: "1%"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("thead", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("tr", null, this.parcel_fields_headers.map((field_header, k) => {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("th", null, field_header);
      }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("tbody", null, (_polygon$survayParcel2 = polygon.survayParcelCutter) === null || _polygon$survayParcel2 === void 0 ? void 0 : _polygon$survayParcel2.map((e, i) => {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("tr", {
          key: i
        }, this.parcel_fields.map((field, k) => {
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("td", {
            key: k
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, field.editable ? !this.state[field.name + "_isEdit_" + i + `${key}`] ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", null, e[field.name] || ""), this.showEditBtn(field.name, e[field.name]) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("button", {
            className: "btn",
            style: {
              marginRight: e[field.name] ? "20px" : "0px"
            },
            onClick: event => {
              this.enableEdit(field.name, i, key);
            }
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("i", {
            className: "fas fa-edit"
          })))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", {
            style: {
              display: "grid",
              gridTemplateColumns: "1fr auto"
            }
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("input", {
            key: i,
            className: "form-control",
            type: "number",
            step: "any",
            name: `${field.name + i + `${key}`}`,
            value: e[field.name],
            onChange: event => {
              this.myChangeHandler(field.name, i, e, key, event);
            }
          }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("button", {
            className: "btn",
            style: {
              marginRight: "20px"
            },
            onClick: event => {
              this.saveEdit(0, field.name, i, key);
            }
          }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("i", {
            className: "fa fa-floppy-o"
          }))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", null, e[field.name] || ""))));
        }));
      }))))), (isFarz || isUpdateContract) && polygon.parcel_name != "حدود المعاملة" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, !viewNumbersOnly && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("input", {
        type: "checkbox",
        style: {
          width: "20px",
          height: "20px",
          margin: "3px"
        },
        checked: !viewNumbersOnly && this.state[`have_electric_room${key}`] || true,
        disabled: viewNumbersOnly,
        onChange: evt => {
          this.state[`electric_room_area${key}`] = "";
          this.onElectricInputChange(`have_electric_room${key}`, evt);
        }
      }), "\u062A\u0634\u0645\u0644 \u063A\u0631\u0641\u0629 \u0627\u0644\u0643\u0647\u0631\u0628\u0627\u0621"), (!viewNumbersOnly && this.state[`have_electric_room${key}`] || true) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("input", {
        className: "form-control",
        type: "number",
        step: "any",
        name: `electric_room_area${key}`,
        value: this.state[`electric_room_area${key}`],
        placeholder: "\u0645\u0633\u0627\u062D\u0629 \u063A\u0631\u0641\u0629 \u0627\u0644\u0643\u0647\u0631\u0628\u0627\u0621",
        onChange: this.onElectricInputChange.bind(this, `electric_room_area${key}`),
        disabled: viewNumbersOnly
      })), (!viewNumbersOnly && this.state[`have_electric_room${key}`] || true) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("input", {
        className: "form-control",
        type: "text",
        step: "any",
        name: `electric_room_place${key}`,
        value: this.state[`electric_room_place${key}`],
        placeholder: "\u0645\u0643\u0627\u0646 \u063A\u0631\u0641\u0629 \u0627\u0644\u0643\u0647\u0631\u0628\u0627\u0621",
        onChange: this.onElectricInputChange.bind(this, `electric_room_place${key}`),
        disabled: viewNumbersOnly
      })))));
    })) || /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("h1", {
      className: "titleSelectedParcel"
    }, "\u0627\u0644\u0623\u0631\u0627\u0636\u064A \u0627\u0644\u0645\u062E\u062A\u0627\u0631\u0629"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("table", {
      className: "table table-bordered",
      style: {
        marginTop: "1%"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("thead", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("tr", null, this.polygon_fields_headers.map((field_header, k) => {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("th", null, field_header);
    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("th", null, " \u062E\u064A\u0627\u0631\u0627\u062A"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("tbody", null, this.state.polygons.map((e, i) => {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("tr", {
        key: i
      }, this.polygon_fields.map((field, k) => {
        var _field$options;
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("td", {
          key: k
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, field.editable ? !this.state[field.name + "_isEdit_" + i] ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", null, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["localizeNumber"])(e.attributes[field.name] || "")), this.showEditBtn(field.name, e.attributes[field.name]) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("button", {
          className: "btn",
          style: {
            marginRight: e.attributes[field.name] ? "20px" : "0px"
          },
          onClick: this.enableEdit.bind(this, field.name, i)
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("i", {
          className: "fas fa-edit"
        })))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", {
          style: {
            display: "grid",
            gridTemplateColumns: "1fr auto"
          }
        }, field.type != "select" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("input", {
          key: i,
          className: "form-control",
          type: field.type,
          step: "any",
          value: e.attributes[field.name],
          onChange: event => {
            this.myChangeHandler(field.name, i, e, undefined, event);
          }
        }), field.type == "select" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a, {
          value: e.attributes[field.name],
          onChange: this.selectOnchange.bind(this, field.name, i, e),
          placeholder: "\u0646\u0648\u0639 \u0627\u0644\u062A\u0642\u0633\u064A\u0645",
          optionFilterProp: "children",
          filterOption: (input, option) => {
            var _convertToEnglish, _convertToEnglish$toL;
            return ((_convertToEnglish = convertToEnglish(option.props.children)) === null || _convertToEnglish === void 0 ? void 0 : (_convertToEnglish$toL = _convertToEnglish.toLowerCase()) === null || _convertToEnglish$toL === void 0 ? void 0 : _convertToEnglish$toL.indexOf(input.toLowerCase())) >= 0;
          }
        }, field === null || field === void 0 ? void 0 : (_field$options = field.options) === null || _field$options === void 0 ? void 0 : _field$options.map((e, i) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement(Option, {
          key: i,
          value: e.name
        }, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["convertToArabic"])(e.name)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("button", {
          className: "btn",
          style: {
            marginRight: "20px"
          },
          onClick: this.saveEdit.bind(this, e.attributes.PARCEL_SPATIAL_ID, field.name, i)
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("i", {
          className: "fa fa-floppy-o"
        }))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", null, Object(_common_common_func__WEBPACK_IMPORTED_MODULE_18__["localizeNumber"])(e.attributes[field.name] || "")))));
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("td", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("button", {
        className: "btn follow",
        style: {
          margin: "0px 5px"
        },
        onClick: () => {
          this.openPopup(this, e);
        }
      }, "\u062D\u062F\u0648\u062F \u0648 \u0623\u0628\u0639\u0627\u062F \u0627\u0644\u0623\u0631\u0636"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("button", {
        className: "btn btn-danger",
        onClick: this.remove.bind(this, e)
      }, "\u062D\u0630\u0641")));
    }))))), (isKrokyUpdateContract || isPlan || isPropetryCheck) && this.state.polygons && this.state.polygons.length > 0 && this.state.polygons[0].area != -1 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
      style: {
        gridColumn: "1/3"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, (survayParcelCutter === null || survayParcelCutter === void 0 ? void 0 : survayParcelCutter.length) > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
      style: {
        marginTop: "20px"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("h1", {
      className: "titleSelectedParcel"
    }, "\u0627\u0644\u0634\u0637\u0641\u0627\u062A"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("table", {
      className: "table table-bordered",
      style: {
        marginTop: "1%"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("thead", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("tr", null, this.parcel_fields_headers.map((field_header, k) => {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("th", null, field_header);
    }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("tbody", null, survayParcelCutter === null || survayParcelCutter === void 0 ? void 0 : survayParcelCutter.map((e, i) => {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("tr", {
        key: i
      }, this.parcel_fields.map((field, k) => {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("td", {
          key: k
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, field.editable ? !this.state[field.name + "_isEdit_" + i] ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", null, e[field.name] || ""), this.showEditBtn(field.name, e[field.name]) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", null, !this.props.isDisabled && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("button", {
          className: "btn",
          style: {
            marginRight: e[field.name] ? "20px" : "0px"
          },
          onClick: event => {
            this.enableEdit(field.name, i);
          }
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("i", {
          className: "fas fa-edit"
        })))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", {
          style: {
            display: "grid",
            gridTemplateColumns: "1fr auto"
          }
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("input", {
          key: i,
          className: "form-control",
          type: "number",
          step: "any",
          name: `${field.name + i}`,
          value: e[field.name],
          onChange: event => {
            this.myChangeHandler(field.name, i, e, undefined, event);
          }
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("button", {
          className: "btn",
          style: {
            marginRight: "20px"
          },
          onClick: event => {
            this.saveEdit(0, field.name, i);
          }
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("i", {
          className: "fa fa-floppy-o"
        }))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("span", null, e[field.name] || ""))));
      }));
    }))))), (isKrokyUpdateContract || isPlan || isPropetryCheck) && this.state.polygons && this.state.polygons.length > 0 && this.state.polygons[0].area != -1 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", {
      style: {
        pointerEvents: this.props.isDisabled ? "none" : "auto"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("input", {
      type: "checkbox",
      style: {
        width: "20px",
        height: "20px",
        margin: "3px"
      },
      checked: this.state["have_electric_room"],
      onChange: evt => {
        this.state[`electric_room_area`] = "";
        this.onElectricInputChange(`have_electric_room`, evt);
      }
    }), "\u062A\u0634\u0645\u0644 \u063A\u0631\u0641\u0629 \u0627\u0644\u0643\u0647\u0631\u0628\u0627\u0621"), this.state["have_electric_room"] && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement("input", {
      className: "form-control",
      type: "number",
      step: "any",
      name: "electric_room_area",
      value: this.state["electric_room_area"],
      placeholder: "\u0645\u0633\u0627\u062D\u0629 \u063A\u0631\u0641\u0629 \u0627\u0644\u0643\u0647\u0631\u0628\u0627\u0621",
      onChange: this.onElectricInputChange.bind(this, "electric_room_area")
    })))))));
  }
}
/* harmony default export */ __webpack_exports__["default"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_25__["connect"])(_mapping__WEBPACK_IMPORTED_MODULE_24__["mapStateToProps"], _mapping__WEBPACK_IMPORTED_MODULE_24__["mapDispatchToProps"])(Object(react_i18next__WEBPACK_IMPORTED_MODULE_16__["translate"])("cadData")(cadDataComponent)));

/***/ }),

/***/ "./src/app/components/inputs/fields/label/index.js":
/*!*********************************************************!*\
  !*** ./src/app/components/inputs/fields/label/index.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/get */ "./node_modules/lodash/get.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _typeofData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./typeofData */ "./src/app/components/inputs/fields/label/typeofData/index.js");
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");
/* harmony import */ var _mapping__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./mapping */ "./src/app/components/inputs/fields/label/mapping.js");
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-redux */ "./node_modules/react-redux/es/index.js");






class labelComponent extends react__WEBPACK_IMPORTED_MODULE_1__["Component"] {
  componentDidMount() {
    const {
      init_data
    } = this.props;
    if (init_data) {
      init_data(this.props);
    }
  }
  render() {
    const {
      className,
      input: {
        value
      },
      type,
      data = {},
      t
    } = this.props;
    let initialVal = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(data, value, value);
    const Val = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(_typeofData__WEBPACK_IMPORTED_MODULE_2__, type, () => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("label", null, initialVal));
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Val, {
      className,
      data: value,
      t: t
    });
  }
}
/* harmony default export */ __webpack_exports__["default"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_5__["connect"])(_mapping__WEBPACK_IMPORTED_MODULE_4__["mapStateToProps"], _mapping__WEBPACK_IMPORTED_MODULE_4__["mapDispatchToProps"])(Object(react_i18next__WEBPACK_IMPORTED_MODULE_3__["translate"])('labels')(labelComponent)));

/***/ }),

/***/ "./src/app/components/inputs/fields/label/mapping.js":
/*!***********************************************************!*\
  !*** ./src/app/components/inputs/fields/label/mapping.js ***!
  \***********************************************************/
/*! exports provided: mapStateToProps, mapDispatchToProps */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapStateToProps", function() { return mapStateToProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapDispatchToProps", function() { return mapDispatchToProps; });
/* harmony import */ var redux_form__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux-form */ "./node_modules/redux-form/es/index.js");

const mapStateToProps = ({
  wizard: {
    mainObject
  },
  selectors = {},
  mainApp,
  mapViewer,
  ...state
}, {
  moduleName,
  path,
  value_key,
  ...props
}) => {
  return {
    mainObject: {
      ...mainObject
    }
  };
};
const mapDispatchToProps = (dispatch, {
  moduleName
}) => {
  return {
    getValues(name = 'stepForm') {
      return Object(redux_form__WEBPACK_IMPORTED_MODULE_0__["formValueSelector"])('name');
    }
  };
};

/***/ }),

/***/ "./src/app/components/inputs/fields/label/typeofData/boolean.js":
/*!**********************************************************************!*\
  !*** ./src/app/components/inputs/fields/label/typeofData/boolean.js ***!
  \**********************************************************************/
/*! exports provided: boolean */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "boolean", function() { return boolean; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

class boolean extends react__WEBPACK_IMPORTED_MODULE_0__["Component"] {
  render() {
    const {
      data,
      t
    } = this.props;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, data ? t('Yes') : t('No'));
  }
}

/***/ }),

/***/ "./src/app/components/inputs/fields/label/typeofData/date.js":
/*!*******************************************************************!*\
  !*** ./src/app/components/inputs/fields/label/typeofData/date.js ***!
  \*******************************************************************/
/*! exports provided: date */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "date", function() { return date; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);


class date extends react__WEBPACK_IMPORTED_MODULE_0__["Component"] {
  render() {
    const {
      data
    } = this.props;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, moment__WEBPACK_IMPORTED_MODULE_1___default()(data));
  }
}

/***/ }),

/***/ "./src/app/components/inputs/fields/label/typeofData/index.js":
/*!********************************************************************!*\
  !*** ./src/app/components/inputs/fields/label/typeofData/index.js ***!
  \********************************************************************/
/*! exports provided: object, string, date, number, list, boolean */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _object__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./object */ "./src/app/components/inputs/fields/label/typeofData/object.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "object", function() { return _object__WEBPACK_IMPORTED_MODULE_0__["object"]; });

/* harmony import */ var _string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./string */ "./src/app/components/inputs/fields/label/typeofData/string.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "string", function() { return _string__WEBPACK_IMPORTED_MODULE_1__["string"]; });

/* harmony import */ var _date__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./date */ "./src/app/components/inputs/fields/label/typeofData/date.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "date", function() { return _date__WEBPACK_IMPORTED_MODULE_2__["date"]; });

/* harmony import */ var _number__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./number */ "./src/app/components/inputs/fields/label/typeofData/number.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "number", function() { return _number__WEBPACK_IMPORTED_MODULE_3__["number"]; });

/* harmony import */ var _list__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./list */ "./src/app/components/inputs/fields/label/typeofData/list.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "list", function() { return _list__WEBPACK_IMPORTED_MODULE_4__["list"]; });

/* harmony import */ var _boolean__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./boolean */ "./src/app/components/inputs/fields/label/typeofData/boolean.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "boolean", function() { return _boolean__WEBPACK_IMPORTED_MODULE_5__["boolean"]; });








/***/ }),

/***/ "./src/app/components/inputs/fields/label/typeofData/number.js":
/*!*********************************************************************!*\
  !*** ./src/app/components/inputs/fields/label/typeofData/number.js ***!
  \*********************************************************************/
/*! exports provided: number */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "number", function() { return number; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

class number extends react__WEBPACK_IMPORTED_MODULE_0__["Component"] {
  render() {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, this.props.data && (+this.props.data).toFixed(2));
  }
}

/***/ }),

/***/ "./src/app/components/inputs/fields/label/typeofData/object.js":
/*!*********************************************************************!*\
  !*** ./src/app/components/inputs/fields/label/typeofData/object.js ***!
  \*********************************************************************/
/*! exports provided: object */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "object", function() { return object; });
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/isEmpty */ "./node_modules/lodash/isEmpty.js");
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/get */ "./node_modules/lodash/get.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _helpers_fieldValues__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../helpers/fieldValues */ "./src/app/helpers/fieldValues/index.js");




class object extends react__WEBPACK_IMPORTED_MODULE_2__["Component"] {
  render() {
    const {
      data,
      t
    } = this.props;
    let files = data && data.length ? data.filter(singleData => lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(singleData, 'uid', null) ? singleData : null) : null;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, !lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0___default()(files) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", null, Object(_helpers_fieldValues__WEBPACK_IMPORTED_MODULE_3__["fileUploader"])(data)) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", {
      style: {
        display: 'flex'
      }
    }, data.map((val, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", {
      style: {
        padding: '5px'
      },
      key: index
    }, index == 0 ? ` ${t(val)} ` : ` - ${t(val)} `))));
  }
}

/***/ }),

/***/ "./src/app/components/inputs/fields/label/typeofData/string.js":
/*!*********************************************************************!*\
  !*** ./src/app/components/inputs/fields/label/typeofData/string.js ***!
  \*********************************************************************/
/*! exports provided: string */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "string", function() { return string; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _date__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./date */ "./src/app/components/inputs/fields/label/typeofData/date.js");


class string extends react__WEBPACK_IMPORTED_MODULE_0__["Component"] {
  render() {
    const {
      data,
      t
    } = this.props;
    const datetime = /\d{4,4}-\d{2,2}-\d{2,2}/;
    let item = datetime.test(data) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_date__WEBPACK_IMPORTED_MODULE_1__["date"], {
      data: data
    }) : data;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, item);
  }
}

/***/ })

}]);
//# sourceMappingURL=15.min.js.map