(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[2],{

/***/ "./src/app/components/inputs/fields/list/index.js":
/*!********************************************************!*\
  !*** ./src/app/components/inputs/fields/list/index.js ***!
  \********************************************************/
/*! exports provided: list, connectList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "list", function() { return list; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "connectList", function() { return connectList; });
/* harmony import */ var antd_lib_button_style__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd/lib/button/style */ "./node_modules/antd/lib/button/style/index.js");
/* harmony import */ var antd_lib_button_style__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd_lib_button_style__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var antd_lib_button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd/lib/button */ "./node_modules/antd/lib/button/index.js");
/* harmony import */ var antd_lib_button__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd_lib_button__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "./node_modules/@babel/runtime/helpers/extends.js");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var lodash_map__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/map */ "./node_modules/lodash/map.js");
/* harmony import */ var lodash_map__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_map__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var lodash_last__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash/last */ "./node_modules/lodash/last.js");
/* harmony import */ var lodash_last__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_last__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash/isEmpty */ "./node_modules/lodash/isEmpty.js");
/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash/sortBy */ "./node_modules/lodash/sortBy.js");
/* harmony import */ var lodash_sortBy__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(lodash_sortBy__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! lodash/get */ "./node_modules/lodash/get.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! lodash/pick */ "./node_modules/lodash/pick.js");
/* harmony import */ var lodash_pick__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(lodash_pick__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! lodash/isEqual */ "./node_modules/lodash/isEqual.js");
/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var redux_form__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! redux-form */ "./node_modules/redux-form/es/index.js");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../.. */ "./src/app/components/inputs/index.js");
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react-redux */ "./node_modules/react-redux/es/index.js");
/* harmony import */ var _mapping__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./mapping */ "./src/app/components/inputs/fields/list/mapping.js");
/* harmony import */ var _helpers_apiMethods__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../helpers/apiMethods */ "./src/app/helpers/apiMethods/index.js");
/* harmony import */ var _helpers_main_input__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../helpers/main/input */ "./src/app/helpers/main/input.js");
/* harmony import */ var _helpers_fieldValues__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../helpers/fieldValues */ "./src/app/helpers/fieldValues/index.js");
/* harmony import */ var _helpers_functions__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../helpers/functions */ "./src/app/helpers/functions/index.js");
/* harmony import */ var _loadData__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./loadData */ "./src/app/components/inputs/fields/list/loadData.js");
/* harmony import */ var _helpers_components_show_types__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../helpers/components/show/types */ "./src/app/helpers/components/show/types.js");






















class list extends _helpers_main_input__WEBPACK_IMPORTED_MODULE_17__["default"] {
  constructor(props) {
    super(props);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "delete_action", (index, item) => {
      const {
        params = [],
        values = {},
        crud = {},
        value_key,
        removeFromData,
        api_config,
        setItemsCount,
        pagination = {},
        postDelete = () => {}
      } = this.props;
      const {
        count
      } = pagination;
      if (crud.deleteUrl) {
        Object(_helpers_apiMethods__WEBPACK_IMPORTED_MODULE_16__["deleteItem"])(crud.deleteUrl, lodash_get__WEBPACK_IMPORTED_MODULE_8___default()(item, value_key), {
          ...api_config,
          params: {
            ...lodash_get__WEBPACK_IMPORTED_MODULE_8___default()(api_config, params),
            ...lodash_pick__WEBPACK_IMPORTED_MODULE_9___default()(values, params)
          }
        }).then(response => {
          removeFromData(this.calculateIndex(index));
          setItemsCount(count - 1);
          postDelete(index, item, this.props);
        });
      } else {
        removeFromData(this.calculateIndex(index));
        setItemsCount(count - 1);
        postDelete(index, item, this.props);
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "cancel_action", key => {
      let {
        name,
        value
      } = this.props.input;
      const {
        untouch,
        removeFromData,
        setItemsCount,
        pagination = {}
      } = this.props;
      const {
        count
      } = pagination;
      const fieldsName = this.fields.map(d => d.name);
      value = [...value];
      const {
        old_data
      } = this.state;
      if (old_data) {
        value[key] = old_data;
      } else {
        removeFromData(this.calculateIndex(key));
        setItemsCount(count - 1);
      }
      this.setState({
        index: -1,
        old_data: null
      });
      untouch(...fieldsName.map(d => `${name}[${key}].${d}`));
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "edit_index", index => {
      this.setState({
        index
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "edit_action", (index, data) => {
      this.setState({
        old_data: data
      });
      this.edit_index(index);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "add_row", () => {
      const {
        pagination = {},
        addToData,
        addFrom = "top",
        data,
        setItemsCount,
        ux_pattern
      } = this.props;
      const {
        pageSize = 20,
        count,
        currentPage = 1
      } = pagination;
      const shift = addFrom == "top" ? 0 : ux_pattern == "pagination" && data.length == pageSize ? data.length - 1 : data.length;
      addToData({}, (currentPage - 1) * pageSize + shift);
      setItemsCount(count + 1);
      this.edit_index(shift);
      this.listDiv.scrollTop = addFrom == "top" ? 0 : this.listDiv.scrollHeight - this.listDiv.clientHeight;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "actionRender", (record, index) => {
      const {
        t
      } = this.props;
      if (this.state.index == -1) {
        const {
          t,
          input: {
            value
          }
        } = this.props;
        const actions = this.actions.filter(d => Object(_helpers_functions__WEBPACK_IMPORTED_MODULE_19__["apply_permissions"])(record, d, "permissions", {
          list: value,
          itemIndex: index
        })).map(d => {
          const ActionComponent = lodash_get__WEBPACK_IMPORTED_MODULE_8___default()(this.ActionsComponents, d.show, this.ActionsComponents.mainStyle);
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(ActionComponent, _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_2___default()({
            key: d.name
          }, d, {
            t,
            clickAction: () => d.action(index, record, this.props)
          }));
        });
        return actions;
      } else if (this.state.index == index) {
        const actions = [/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_1___default.a, {
          className: "save",
          key: "save",
          onClick: () => this.save_data(index)
        }, t("actions:Save")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_1___default.a, {
          className: "cancel",
          key: "cancel",
          onClick: () => this.cancel_action(index)
        }, t("actions:Cancel"))];
        return actions;
      }
    });
    const {
      fields = [],
      t: _t,
      setCurrentPage,
      setPageSize,
      permissions = {},
      pagination: _pagination = {},
      pageSize: propsPageSize
    } = props;
    const {
      currentPage: _currentPage = 1,
      pageSize: _pageSize = propsPageSize
    } = _pagination;
    setCurrentPage(_currentPage);
    setPageSize(_pageSize);
    this.fields = fields.map(f => {
      f.hideLabel = ["boolean", "multiChecks"].includes(f.field) ? true : f.hideLabel;
      f.label = _t(`labels:${f.label}`);
      return Object(_helpers_functions__WEBPACK_IMPORTED_MODULE_19__["serverFieldMapper"])(f);
    });
    this.state = {};
    this.state.columns = this.buildColumns();
    this.extraActions = [{
      action: this.add_row.bind(this),
      name: "Add",
      permissions: lodash_get__WEBPACK_IMPORTED_MODULE_8___default()(permissions, "actions.create", null)
    }];
    this.onScroll = this.onScroll.bind(this);
    this.loading = false;
    if (!props.input.value) {
      this.handleChange([]);
    }
  }
  setSumFooter() {
    const {
      t,
      input: {
        value = []
      },
      moduleName = "",
      sum = "",
      sum_to = "",
      change,
      sumFields = []
    } = this.props;
    let sums = {};
    if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_6___default()(value)) {
      sumFields.map(sumField => {
        sums[`${sumField}Sum`] = 0;
        value.map(val => {
          sums[`${sumField}Sum`] = parseFloat(sums[`${sumField}Sum`]) + parseFloat(val[sumField]);
        });
      });
      change && sums[`${sum}Sum`] ? change(`${sum_to}.Sum.${moduleName}`, sums[`${sum}Sum`]) : null;
    }
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("div", {
      style: {
        display: "flex",
        flexDirection: "row",
        justifyContent: "space-between",
        marginLeft: 500
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("label", null, " ", t("Sum"), " "), sums ? lodash_map__WEBPACK_IMPORTED_MODULE_4___default()(sums, (value, key) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("div", {
      style: {
        display: "flex",
        flexDirection: "row",
        justifyContent: "space-evenly"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("label", null, " ", value ? `${value.toFixed(2)}` : ""))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("div", null));
  }
  buildColumns() {
    const {
      t,
      actions: pActions = [],
      permissions = {}
    } = this.props;
    this.columns = [...this.fields.map(d => ({
      title: t(`labels:${d.label}`),
      key: d.show || d.name,
      dataIndex: d.show || d.name,
      render: (value, record, index) => this.cellRender(d, value, record, index)
    })), {
      title: t("actions:Actions"),
      key: "actions",
      dataIndex: "actions",
      render: (value, record, index) => this.actionRender(record, index)
    }];
    this.actions = [
    //   {
    //     action: this.add_action,
    //     name: "Add",
    //     icon: "fa fa-home",
    //     color: "#fff",
    //     // permissions: get(permissions, "actions.add", null),
    //   },
    {
      action: this.edit_action,
      name: "Edit",
      icon: "fas fa-edit",
      color: "#fff",
      permissions: lodash_get__WEBPACK_IMPORTED_MODULE_8___default()(permissions, "actions.edit", null)
    }, {
      action: this.delete_action,
      name: "Delete",
      msg: "Are you sure you want to delete this item?",
      show: "confirmAction",
      icon: "fas fa-trash",
      permissions: lodash_get__WEBPACK_IMPORTED_MODULE_8___default()(permissions, "actions.delete", null)
    }, ...pActions];
    this.state = {
      index: -1,
      old_data: ""
    };
  }
  shouldComponentUpdate(nextProps, nextState) {
    const {
      index
    } = this.state;
    const {
      data,
      pagination = {},
      input: {
        value
      }
    } = this.props;
    const {
      currentPage,
      pageSize,
      failed,
      count
    } = pagination;
    const {
      data: nextData,
      pagination: nextPagination = {},
      ux_pattern,
      input: {
        value: nextValue
      }
    } = nextProps;
    const {
      currentPage: nextCurrentPage,
      count: nextCount,
      pageSize: nextPageSize,
      failed: nextFailed
    } = nextPagination;
    return !lodash_isEqual__WEBPACK_IMPORTED_MODULE_10___default()(nextData, data) || !lodash_isEqual__WEBPACK_IMPORTED_MODULE_10___default()(nextValue, value) || nextState.index != this.state.index || this.props.footer && nextProps.selectors != this.props.selectors || index > -1 && !lodash_isEqual__WEBPACK_IMPORTED_MODULE_10___default()(nextProps.input.value[index], this.props.input.value[index]) || ux_pattern === "pagination" && (!lodash_isEqual__WEBPACK_IMPORTED_MODULE_10___default()(pageSize, nextPageSize) || !lodash_isEqual__WEBPACK_IMPORTED_MODULE_10___default()(count, nextCount) || !lodash_isEqual__WEBPACK_IMPORTED_MODULE_10___default()(currentPage, nextCurrentPage) || !lodash_isEqual__WEBPACK_IMPORTED_MODULE_10___default()(failed, nextFailed));
  }
  componentDidMount() {
    const {
      data = [],
      inline,
      crud = {},
      input: {
        value
      },
      setValueLabelKeys,
      value_key,
      label_key,
      ux_pattern,
      inconsistant,
      links
    } = this.props;
    const {
      fetch
    } = crud;
    data ? this.handleChange(data) : null;
    if (ux_pattern == "infiniteScrolling") {
      this.setScrollEvents();
    }
    if (!data.length || ux_pattern != "infiniteScrolling" && (lodash_get__WEBPACK_IMPORTED_MODULE_8___default()(links, "nextLink") || !inconsistant)) {
      setValueLabelKeys(label_key, value_key);
      fetch ? this.loadData(this.props, true) : this.handleChange([]);
    }
    if (inline) {
      this.handleChange(value.length ? value : []);
    }
  }
  setPaginationConfig(currentPage, total, pageSize) {
    const {
      setCurrentPage
    } = this.props;
    this.paginationConfig = {
      current: currentPage,
      total,
      pageSize,
      onChange: page => setCurrentPage(page)
    };
  }
  loadData(props, onMount) {
    const {
      ux_pattern
    } = props;
    if (this.loading) {
      return;
    }
    this.loading = true;
    switch (ux_pattern) {
      case "pagination":
        {
          _loadData__WEBPACK_IMPORTED_MODULE_20__["getPaginatedData"].call(this, props, onMount);
          break;
        }
      case "infiniteScrolling":
        {
          _loadData__WEBPACK_IMPORTED_MODULE_20__["getScrollingData"].call(this, props, onMount);
          break;
        }
      default:
        {
          _loadData__WEBPACK_IMPORTED_MODULE_20__["getAllData"].call(this, props);
        }
    }
  }
  componentWillReceiveProps(nextProps) {
    const {
      data,
      pagination = {}
    } = this.props;
    const {
      currentPage,
      pageSize,
      failed,
      count
    } = pagination;
    const {
      data: nextData,
      pagination: nextPagination = {},
      ux_pattern,
      crud = {}
    } = nextProps;
    const {
      currentPage: nextCurrentPage,
      count: nextCount,
      pageSize: nextPageSize,
      failed: nextFailed
    } = nextPagination;
    const {
      fetch
    } = crud;
    if (!lodash_isEqual__WEBPACK_IMPORTED_MODULE_10___default()(data, nextData)) {
      this.handleChange(nextData);
      ux_pattern === "pagination" ? this.setPaginationConfig(nextCurrentPage, nextCount, nextPageSize) : null;
    }
    if (nextFailed != failed && nextFailed) {
      this.loadData(nextProps);
    }
    if (ux_pattern === "pagination" && (!lodash_isEqual__WEBPACK_IMPORTED_MODULE_10___default()(pageSize, nextPageSize) || !lodash_isEqual__WEBPACK_IMPORTED_MODULE_10___default()(count, nextCount) || !lodash_isEqual__WEBPACK_IMPORTED_MODULE_10___default()(currentPage, nextCurrentPage))) {
      this.setPaginationConfig(nextCurrentPage, nextCount, nextPageSize);
    }
    if (!lodash_isEqual__WEBPACK_IMPORTED_MODULE_10___default()(data, nextData) && nextData.length == 0) {
      const {
        label_key,
        value_key,
        setValueLabelKeys
      } = nextProps;
      setValueLabelKeys(label_key, value_key);
      fetch ? this.loadData(this.props, true) : null;
    }
  }
  handleChange(value) {
    const {
      onChange
    } = this.props.input;
    const {
      setData,
      sortby,
      ux_pattern
    } = this.props;
    const data = lodash_sortBy__WEBPACK_IMPORTED_MODULE_7___default()(value, sortby);
    if (ux_pattern != "pagination") {
      setData(data);
    }
    onChange(value);
  }
  calculateIndex(index) {
    const {
      pagination = {},
      ux_pattern
    } = this.props;
    const {
      currentPage = 1,
      pageSize = 20
    } = pagination;
    return ux_pattern != "pagination" ? index : (currentPage - 1) * pageSize + index;
  }
  save_data(index, ev) {
    const {
      params = [],
      values = {},
      crud = {},
      value_key,
      addToData,
      editData,
      untouch,
      touch = () => {},
      meta: {
        error = [{}]
      },
      api_config,
      preSubmit
    } = this.props;
    const {
      createUrl,
      updateUrl
    } = crud;
    const {
      old_data = {}
    } = this.state;
    const {
      value,
      name
    } = this.props.input;
    const fieldsName = this.fields.map(d => d.name);
    const errors = Array.isArray(error) ? lodash_pick__WEBPACK_IMPORTED_MODULE_9___default()(error.reduce((d, o) => ({
      ...o,
      ...d
    }), 0), fieldsName) : error;
    const calculatedIndex = this.calculateIndex(index);
    if (lodash_isEmpty__WEBPACK_IMPORTED_MODULE_6___default()(errors)) {
      Object(_helpers_functions__WEBPACK_IMPORTED_MODULE_19__["applySubmissionsFuncs"])(value[index], preSubmit, values, this.props).then(newItem => {
        if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_6___default()(old_data)) {
          if (updateUrl) {
            const id = value[index][value_key];
            Object(_helpers_apiMethods__WEBPACK_IMPORTED_MODULE_16__["updateItem"])(updateUrl, newItem, id, {
              ...api_config,
              params: {
                ...lodash_get__WEBPACK_IMPORTED_MODULE_8___default()(api_config, params),
                ...lodash_pick__WEBPACK_IMPORTED_MODULE_9___default()(values, params)
              }
            }).then(response => {
              if (window.cadsId && newItem.floorfilepath) {
                window.cadsId = window.cadsId.filter(d => d != id);
              }
              editData(this.calculateIndex(index), response);
              this.edit_index(-1);
              this.setState({
                old_data: null
              });
            });
          } else {
            editData(this.calculateIndex(index), newItem);
            this.edit_index(-1);
            this.setState({
              old_data: null
            });
          }
        } else {
          if (createUrl) {
            Object(_helpers_apiMethods__WEBPACK_IMPORTED_MODULE_16__["postItem"])(createUrl, newItem, {
              ...api_config,
              params: {
                ...lodash_get__WEBPACK_IMPORTED_MODULE_8___default()(api_config, "params"),
                ...lodash_pick__WEBPACK_IMPORTED_MODULE_9___default()(values, params)
              }
            }).then(response => {
              addToData(response, calculatedIndex, "rewrite");
              this.setState({
                old_data: null
              });
              this.edit_index(-1);
              untouch(...fieldsName.map(d => `${name}[${index}].${d}`));
            });
          } else {
            addToData(newItem, calculatedIndex, "rewrite");
            this.setState({
              old_data: null
            });
            this.edit_index(-1);
            untouch(...fieldsName.map(d => `${name}[${index}].${d}`));
          }
        }
      });
    } else {
      touch(...fieldsName.map(d => `${name}[${index}].${d}`));
    }
  }
  setScrollEvents() {
    this.listDiv.addEventListener("scroll", this.onScroll);
  }
  componentWillUnmount() {
    this.listDiv ? this.listDiv.removeEventListener("scroll", this.onScroll) : null;
  }
  onScroll(event) {
    let maxScroll = event.target.scrollHeight - event.target.clientHeight;
    let currentScroll = event.target.scrollTop;
    if (currentScroll >= maxScroll) {
      if (lodash_get__WEBPACK_IMPORTED_MODULE_8___default()(this.props, "links.nextLink")) {
        _loadData__WEBPACK_IMPORTED_MODULE_20__["getScrollingData"].call(this, this.props);
      }
    }
  }
  cellRender({
    name: fname,
    ...field
  }, data, record, index) {
    const {
      name,
      value
    } = this.props.input;
    const _name = lodash_last__WEBPACK_IMPORTED_MODULE_5___default()(name.split("."));
    if (index == this.state.index) {
      const {
        values: mainValues
      } = this.props;
      return Object(_helpers_functions__WEBPACK_IMPORTED_MODULE_19__["apply_permissions"])({
        ...mainValues,
        ...value[index]
      }, field, "permissions", this.props) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(redux_form__WEBPACK_IMPORTED_MODULE_12__["Field"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_2___default()({
        key: `${_name}[${index}].${fname}`,
        name: `${_name}[${index}].${fname}`,
        component: ___WEBPACK_IMPORTED_MODULE_13__["default"]
      }, field, lodash_pick__WEBPACK_IMPORTED_MODULE_9___default()(this.props, ["touch", "untouch", "change"]), {
        hideLabel: this.props.hideLabels
      }));
    }
    const label = !this.props.hideLabels && !field.hideLabel ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("label", null, lodash_get__WEBPACK_IMPORTED_MODULE_8___default()(field, "label"), " :") : null;
    const fieldValue = lodash_get__WEBPACK_IMPORTED_MODULE_8___default()(_helpers_fieldValues__WEBPACK_IMPORTED_MODULE_18__, field.field, text => text)(data, record, {
      name: fname,
      ...field
    }, {
      ...field
    }, this.calculateIndex(index), {
      inputName: lodash_get__WEBPACK_IMPORTED_MODULE_8___default()(this.props, "input.name", {}),
      change: lodash_get__WEBPACK_IMPORTED_MODULE_8___default()(this.props, "change"),
      props: this.props
    });
    if (fieldValue) {
      const FComponent = lodash_get__WEBPACK_IMPORTED_MODULE_8___default()(_helpers_components_show_types__WEBPACK_IMPORTED_MODULE_21__, field.field, _helpers_components_show_types__WEBPACK_IMPORTED_MODULE_21__["label"]);
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement("div", {
        key: `${_name}[${index}].${fname}`
      }, label, " ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default.a.createElement(FComponent, {
        field: field,
        val: fieldValue
      }));
    } else {
      return null;
    }
  }
}
function connectList(component) {
  return Object(react_redux__WEBPACK_IMPORTED_MODULE_14__["connect"])(_mapping__WEBPACK_IMPORTED_MODULE_15__["mapStateToProps"], _mapping__WEBPACK_IMPORTED_MODULE_15__["mapDispatchToProps"])(component);
}

/***/ }),

/***/ "./src/app/components/inputs/fields/list/loadData.js":
/*!***********************************************************!*\
  !*** ./src/app/components/inputs/fields/list/loadData.js ***!
  \***********************************************************/
/*! exports provided: getPaginatedData, getScrollingData, getAllData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getPaginatedData", function() { return getPaginatedData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getScrollingData", function() { return getScrollingData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAllData", function() { return getAllData; });
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/get */ "./node_modules/lodash/get.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _helpers_apiMethods__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../helpers/apiMethods */ "./src/app/helpers/apiMethods/index.js");
/* harmony import */ var _helpers_errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../helpers/errors */ "./src/app/helpers/errors/index.js");
/* harmony import */ var _helpers_functions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../helpers/functions */ "./src/app/helpers/functions/index.js");




function getPaginatedData(props, onMount) {
  const {
    t,
    crud: {
      fetch
    },
    setItemsCount,
    addToData,
    api_config,
    setTotalPages,
    pagination = {},
    pageSize: propsPageSize,
    initialPage = 1
  } = props;
  const {
    pageSize = propsPageSize,
    currentPage = 1
  } = pagination;
  const shift = initialPage - 1;
  Object(_helpers_apiMethods__WEBPACK_IMPORTED_MODULE_1__["fetchData"])(fetch, {
    ...api_config,
    params: {
      ...lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(api_config, 'params'),
      pageSize,
      page: currentPage + shift
    }
  }).then(({
    results,
    totalPages,
    count
  }) => {
    setTotalPages(totalPages);
    addToData(results, (currentPage - 1) * pageSize, 'rewrite');
    setItemsCount(count);
    this.loading = false;
    // if (onMount) {
    //     fetchData(fetch, {
    //         ...api_config,
    //         params: {
    //             ...get(api_config, 'params'),
    //             size: pageSize,
    //             page: totalPages
    //         }
    //     })
    //         .then(({ results }) => {
    //             setItemsCount((totalPages - 1) * pageSize + results.length);
    //         })
    // }
  }, err => Object(_helpers_errors__WEBPACK_IMPORTED_MODULE_2__["handleErrorMessages"])(err, t));
}
function getScrollingData(props, onMount) {
  const {
    t,
    crud: {
      fetch
    },
    addToData,
    setData,
    api_config,
    setNextUrl,
    links = {},
    pageSize
  } = props;
  const {
    nextLink
  } = links;
  if (onMount) {
    Object(_helpers_apiMethods__WEBPACK_IMPORTED_MODULE_1__["fetchData"])(fetch, {
      ...api_config,
      params: {
        ...lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(api_config, 'params'),
        pageSize
      }
    }).then(({
      results,
      next
    }) => {
      setData(results);
      setNextUrl(next);
      this.loading = false;
    }, err => Object(_helpers_errors__WEBPACK_IMPORTED_MODULE_2__["handleErrorMessages"])(err, t));
  } else {
    Object(_helpers_apiMethods__WEBPACK_IMPORTED_MODULE_1__["fetchData"])(nextLink, api_config).then(({
      results,
      next
    }) => {
      addToData(results, -1);
      setNextUrl(next);
      this.loading = false;
    }, err => Object(_helpers_errors__WEBPACK_IMPORTED_MODULE_2__["handleErrorMessages"])(err, t));
  }
}
function getAllData(props) {
  const {
    crud: {
      fetch
    },
    api_config,
    setData,
    t
  } = props;
  Object(_helpers_functions__WEBPACK_IMPORTED_MODULE_3__["fetchAllData"])(fetch, api_config).then(data => {
    setData(data);
    this.loading = false;
  }, err => Object(_helpers_errors__WEBPACK_IMPORTED_MODULE_2__["handleErrorMessages"])(err, t));
}

/***/ }),

/***/ "./src/app/components/inputs/fields/list/mapping.js":
/*!**********************************************************!*\
  !*** ./src/app/components/inputs/fields/list/mapping.js ***!
  \**********************************************************/
/*! exports provided: mapStateToProps, mapDispatchToProps */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapStateToProps", function() { return mapStateToProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapDispatchToProps", function() { return mapDispatchToProps; });
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/get */ "./node_modules/lodash/get.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);

const mapStateToProps = ({
  wizard: {
    mainObject,
    currentModule
  },
  selectors
}, ownProps) => {
  const {
    moduleName,
    ux_pattern,
    pageSize: propsPageSize = 20
  } = ownProps;
  const {
    pagination = {}
  } = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(selectors, moduleName, {});
  let {
    pageSize = propsPageSize,
    currentPage = 1,
    totalPages = 0,
    count = propsPageSize
  } = pagination;
  let allData = lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(selectors, `${moduleName}.data`, ownProps.data || []);
  let data = null;
  let failed = false;
  if (ux_pattern === 'pagination') {
    const firstIndex = (currentPage - 1) * pageSize;
    data = allData.slice(firstIndex, firstIndex + pageSize).filter(d => d != undefined || d != null);
    let arrayLength = currentPage == totalPages ? count - firstIndex : pageSize;
    if (data.length < arrayLength && arrayLength <= pageSize) {
      failed = true;
    }
  }
  return {
    selectors,
    ...lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(selectors, moduleName, {}),
    pagination: {
      ...lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(selectors, `${moduleName}.links`, {}),
      failed
    },
    data: data || allData,
    mainObject,
    currentModule
  };
};
const mapDispatchToProps = (dispatch, {
  moduleName
}) => {
  return {
    setValueLabelKeys: (label_key, value_key) => {
      dispatch({
        type: 'setSelectors',
        path: `${moduleName}.label_key`,
        data: label_key
      });
      dispatch({
        type: 'setSelectors',
        path: `${moduleName}.value_key`,
        data: value_key
      });
    },
    setSelector: (moduleName, data) => {
      dispatch({
        type: 'setSelectors',
        path: `${moduleName}`,
        data
      });
    },
    setData: data => {
      dispatch({
        type: 'setSelectors',
        path: `${moduleName}.data`,
        data
      });
    },
    editData: (index, data) => {
      dispatch({
        type: 'setSelectors',
        path: `${moduleName}.data[${index}]`,
        data
      });
    },
    addToData: (data, index, operation) => {
      dispatch({
        type: 'insertInArraySelectors',
        path: `${moduleName}.data`,
        operation,
        index,
        data
      });
    },
    removeFromData: index => {
      dispatch({
        type: 'removeSelectors',
        path: `${moduleName}.data`,
        index
      });
    },
    setCurrentPage: pageNum => {
      dispatch({
        type: 'setSelectors',
        path: `${moduleName}.links.currentPage`,
        data: pageNum
      });
    },
    setPageSize: pageSize => {
      dispatch({
        type: 'setSelectors',
        path: `${moduleName}.links.pageSize`,
        data: pageSize
      });
    },
    setTotalPages: totalPages => {
      dispatch({
        type: 'setSelectors',
        path: `${moduleName}.links.totalPages`,
        data: totalPages
      });
    },
    setItemsCount: itemsCount => {
      dispatch({
        type: 'setSelectors',
        path: `${moduleName}.links.count`,
        data: itemsCount
      });
    },
    setNextUrl: nextUrl => {
      dispatch({
        type: 'setSelectors',
        path: `${moduleName}.links.nextLink`,
        data: nextUrl
      });
    }
  };
};

/***/ }),

/***/ "./src/app/helpers/components/show/checkbox/index.js":
/*!***********************************************************!*\
  !*** ./src/app/helpers/components/show/checkbox/index.js ***!
  \***********************************************************/
/*! exports provided: boolean */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "boolean", function() { return boolean; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

const boolean = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["lazy"])(() => __webpack_require__.e(/*! import() */ 165).then(__webpack_require__.bind(null, /*! ./single */ "./src/app/helpers/components/show/checkbox/single.js")));
// export const multiChecks = lazy(()=>import('./multi'));
// export const op = lazy(()=>import('./op'));

/***/ }),

/***/ "./src/app/helpers/components/show/select/index.js":
/*!*********************************************************!*\
  !*** ./src/app/helpers/components/show/select/index.js ***!
  \*********************************************************/
/*! exports provided: multiSelect, select */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiSelect", function() { return multiSelect; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "select", function() { return select; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

const multiSelect = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["lazy"])(() => __webpack_require__.e(/*! import() */ 60).then(__webpack_require__.bind(null, /*! ./multiSelect */ "./src/app/helpers/components/show/select/multiSelect.js")));
const select = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["lazy"])(() => __webpack_require__.e(/*! import() */ 93).then(__webpack_require__.bind(null, /*! ./main */ "./src/app/helpers/components/show/select/main.js")));

/***/ }),

/***/ "./src/app/helpers/components/show/types.js":
/*!**************************************************!*\
  !*** ./src/app/helpers/components/show/types.js ***!
  \**************************************************/
/*! exports provided: fileUploader, simpleUploader, radio, singleSwitch, label, list, simpleModal, primaryPricing, propertyRemovalIdentify, button, multiSelect, select, boolean */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fileUploader", function() { return fileUploader; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "simpleUploader", function() { return simpleUploader; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "radio", function() { return radio; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "singleSwitch", function() { return singleSwitch; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "label", function() { return label; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "list", function() { return list; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "simpleModal", function() { return simpleModal; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "primaryPricing", function() { return primaryPricing; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "propertyRemovalIdentify", function() { return propertyRemovalIdentify; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "button", function() { return button; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _select__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./select */ "./src/app/helpers/components/show/select/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "multiSelect", function() { return _select__WEBPACK_IMPORTED_MODULE_1__["multiSelect"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "select", function() { return _select__WEBPACK_IMPORTED_MODULE_1__["select"]; });

/* harmony import */ var _checkbox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./checkbox */ "./src/app/helpers/components/show/checkbox/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "boolean", function() { return _checkbox__WEBPACK_IMPORTED_MODULE_2__["boolean"]; });


const fileUploader = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["lazy"])(() => __webpack_require__.e(/*! import() */ 22).then(__webpack_require__.bind(null, /*! ./fileUploader */ "./src/app/helpers/components/show/fileUploader/index.js")));
const simpleUploader = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["lazy"])(() => __webpack_require__.e(/*! import() */ 91).then(__webpack_require__.bind(null, /*! ./fileUploader/simple */ "./src/app/helpers/components/show/fileUploader/simple.js")));
// export const hijriDatePicker = lazy(()=>import('./hijriDatePicker'));
const radio = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["lazy"])(() => __webpack_require__.e(/*! import() */ 170).then(__webpack_require__.bind(null, /*! ./radio */ "./src/app/helpers/components/show/radio/index.js")));
const singleSwitch = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["lazy"])(() => __webpack_require__.e(/*! import() */ 94).then(__webpack_require__.bind(null, /*! ./switch */ "./src/app/helpers/components/show/switch/index.js")));
// export const timePicker = lazy(()=>import('./timepicker'));
// export const datePicker = lazy(()=>import('./datePicker'));
// export const slider = lazy(()=>import('./slider'));
// export const mentions = lazy(()=>import('./mention'));
const label = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["lazy"])(() => __webpack_require__.e(/*! import() */ 23).then(__webpack_require__.bind(null, /*! ./label */ "./src/app/helpers/components/show/label/index.js")));
// export const autoValue = lazy(()=>import('./autoValue'));
// export const address = lazy(()=>import('./address'));
// export const tableList = lazy(()=>import('./list/tableList'));
const list = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["lazy"])(() => __webpack_require__.e(/*! import() */ 43).then(__webpack_require__.bind(null, /*! ./list/table */ "./src/app/helpers/components/show/list/table/index.js")));
const simpleModal = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["lazy"])(() => __webpack_require__.e(/*! import() */ 171).then(__webpack_require__.bind(null, /*! ./simpleModal */ "./src/app/helpers/components/show/simpleModal.js")));
const primaryPricing = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["lazy"])(() => __webpack_require__.e(/*! import() */ 6).then(__webpack_require__.bind(null, /*! ../../../../app/components/inputs/fields/property_removal_primarypricing */ "./src/app/components/inputs/fields/property_removal_primarypricing.js")));
const propertyRemovalIdentify = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["lazy"])(() => Promise.all(/*! import() */[__webpack_require__.e(0), __webpack_require__.e(5)]).then(__webpack_require__.bind(null, /*! ../../../../app/components/inputs/fields/identify/Component/propertyRemovalIdentifyComponnent */ "./src/app/components/inputs/fields/identify/Component/propertyRemovalIdentifyComponnent/index.js")));
// export const Collapse = lazy(()=>import('./list/collapse'));
// export const cardList = lazy(()=>import('./list/cardList'));
// export const multiTableList = lazy(()=>import('./list/multiTableList'));
// export const gistTable = lazy(()=>import('./list/tableAdd/gisTableAdd'));
// export const gistTable2 = lazy(()=>import('./list/hob'));
// export const textArea = lazy(()=>import('./textArea'));
// export const table = lazy(()=>import('./table'));
const button = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["lazy"])(() => __webpack_require__.e(/*! import() */ 4).then(__webpack_require__.bind(null, /*! ../../../../app/components/inputs/fields/button */ "./src/app/components/inputs/fields/button.js")));
// export const AdvancedTable = lazy(()=>import('./advanced_table'))
// export const identifyWizard = lazy(()=>import('./identifyWizard'))
// export * from './identify';
// export * from './identify'


// export * from './calculator'

/***/ })

}]);
//# sourceMappingURL=2.min.js.map