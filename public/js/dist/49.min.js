(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[49],{

/***/ "./node_modules/css-loader/dist/cjs.js!./src/app/components/inputs/fields/selectedParcels/Component/style.css":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/app/components/inputs/fields/selectedParcels/Component/style.css ***!
  \********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../../../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js")(false);
// Module
exports.push([module.i, ".titleSelectedParcel {\r\n  background: #00726f;\r\n  color: white;\r\n  text-align: right;\r\n  margin-top: 0px !important;\r\n  padding: 5px;\r\n  text-align: center;\r\n  font-size: 20px !important;\r\n}\r\n\r\n.add-gis {\r\n  background: #00726f !important;\r\n  float: none !important;\r\n  margin: 0 !important;\r\n  color: #fff !important;\r\n}", ""]);



/***/ }),

/***/ "./src/app/components/inputs/fields/selectedParcels/Component/mapping.js":
/*!*******************************************************************************!*\
  !*** ./src/app/components/inputs/fields/selectedParcels/Component/mapping.js ***!
  \*******************************************************************************/
/*! exports provided: mapStateToProps, mapDispatchToProps */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapStateToProps", function() { return mapStateToProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapDispatchToProps", function() { return mapDispatchToProps; });
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/get */ "./node_modules/lodash/get.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var redux_form__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux-form */ "./node_modules/redux-form/es/index.js");


const mapStateToProps = ({
  mapReducer,
  wizard: {
    steps,
    mainObject,
    currentStep,
    treeNode,
    currentModule,
    comments,
    wizardSettings
  },
  selectors = {},
  ...state
}, {
  moduleName,
  path,
  value_key,
  ...props
}) => {
  return {
    mainObject,
    selectedRequestType: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(selectors[moduleName], "selectedRequestType", {}),
    domainList: lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(selectors[moduleName], "domainList", {}),
    currentStep,
    steps,
    currentModule
  };
};
const mapDispatchToProps = dispatch => {
  return {
    getValues(name = "stepForm") {
      return Object(redux_form__WEBPACK_IMPORTED_MODULE_1__["formValueSelector"])("name");
    },
    setSelectorEnability: (moduleName, data) => {
      dispatch({
        type: "setSelectors",
        path: `${moduleName}.disabled`,
        data
      });
    },
    removeSelector: moduleName => {
      dispatch({
        type: "removeSelectors",
        path: `${moduleName}`
      });
    },
    setSelector: (moduleName, data) => {
      dispatch({
        type: "setSelectors",
        path: `${moduleName}`,
        data
      });
    }
    // setSelectedParcels: (path, data) => dispatch({type: 'setWizard', path: `mainObject.waseka_data.selectedParcels`, data})
  };
};

/***/ }),

/***/ "./src/app/components/inputs/fields/selectedParcels/Component/plan_approval_parcels.js":
/*!*********************************************************************************************!*\
  !*** ./src/app/components/inputs/fields/selectedParcels/Component/plan_approval_parcels.js ***!
  \*********************************************************************************************/
/*! exports provided: appMapDispatchToProps, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "appMapDispatchToProps", function() { return appMapDispatchToProps; });
/* harmony import */ var antd_lib_button_style__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd/lib/button/style */ "./node_modules/antd/lib/button/style/index.js");
/* harmony import */ var antd_lib_button_style__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd_lib_button_style__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var antd_lib_button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd/lib/button */ "./node_modules/antd/lib/button/index.js");
/* harmony import */ var antd_lib_button__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd_lib_button__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/get */ "./node_modules/lodash/get.js");
/* harmony import */ var lodash_get__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _mapping__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mapping */ "./src/app/components/inputs/fields/selectedParcels/Component/mapping.js");
/* harmony import */ var _main_helpers_actions_main__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../main_helpers/actions/main */ "./src/main_helpers/actions/main/index.js");
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-redux */ "./node_modules/react-redux/es/index.js");
/* harmony import */ var antd_dist_antd_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! antd/dist/antd.css */ "./node_modules/antd/dist/antd.css");
/* harmony import */ var antd_dist_antd_css__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(antd_dist_antd_css__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _main_helpers_functions_filters__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../main_helpers/functions/filters */ "./src/main_helpers/functions/filters/index.js");
/* harmony import */ var _reducers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../reducers */ "./src/app/reducers/index.js");
/* harmony import */ var _identify_Component_common_common_func__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../identify/Component/common/common_func */ "./src/app/components/inputs/fields/identify/Component/common/common_func.js");
/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./style.css */ "./src/app/components/inputs/fields/selectedParcels/Component/style.css");
/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_style_css__WEBPACK_IMPORTED_MODULE_12__);





//import { mapStateToProps } from "./mapping";








const appMapDispatchToProps = dispatch => {
  return {
    ...Object(_mapping__WEBPACK_IMPORTED_MODULE_5__["mapDispatchToProps"])(dispatch, "lands"),
    ...Object(_main_helpers_actions_main__WEBPACK_IMPORTED_MODULE_6__["default"])(dispatch)
  };
};
class planParcelsComponent extends react__WEBPACK_IMPORTED_MODULE_4__["Component"] {
  constructor(props) {
    super(props);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "saveEdit", (PARCEL_SPATIAL_ID, name, i, isEditing) => {
      let {
        input,
        onResetParcelDesc,
        values,
        setSelector,
        change
      } = this.props;
      change("landData.parcel_desc", this["edit_" + name + i]);
      // setSelector("parcelDesc", {
      //   value: this["edit_" + name + i]
      // })
      this.selectedParcels[i].attributes[name] = this["edit_" + name + i];
      this.props.input.onChange({
        parcels: [...this.selectedParcels],
        parcelData: {
          ...this.state.parcelData
        }
      });
      this.setState({
        [name + "_isEdit_" + i]: isEditing,
        selectedParcels: [...this.selectedParcels],
        parcelData: this.state.parcelData
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "myChangeHandler", (name, i, e, event) => {
      this["edit_" + name + i] = event.target.value;
      this.selectedParcels[i].attributes[name] = this["edit_" + name + i];
      this.setState({
        [name + "_isEdit_" + i]: true,
        selectedParcels: [...this.selectedParcels],
        parcelData: this.state.parcelData
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "showEditBtn", (name, value) => {
      if (name == "USING_SYMBOL") {
        return value == null;
      } else {
        return ["PARCEL_PLAN_NO", "NEW_PARCEL_AREA"].indexOf(name) > -1;
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "enableEdit", (name, i) => {
      this["edit_" + name + i] = this.selectedParcels[i].attributes[name];
      this.setState({
        [name + "_isEdit_" + i]: true
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "remove", item => {
      this.selectedParcels.pop(item);
      if (this.selectedParcels.length == 0) {
        this.state.parcelData = {};
        //this.props.action(this.props.values, this.props, this.state);
      }
      this.state.selectedParcels = [...this.selectedParcels];
      this.props.input.onChange({
        parcels: [...this.state.selectedParcels],
        parcelData: {
          ...this.state.parcelData
        }
      });
      this.setState({
        selectedParcels: [...this.selectedParcels],
        parcelData: this.state.parcelData
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "addParcel", item => {
      const {
        input,
        onResetParcelDesc,
        values
      } = this.props;
      var parcel_desc = lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(values, "parcel_desc", "");
      if (!_.find(this.selectedParcels, function (d) {
        return d.PARCEL_PLAN_NO == parcel_desc;
      }) && parcel_desc) {
        this.selectedParcels.push({
          attributes: {
            PARCEL_PLAN_NO: parcel_desc,
            NEW_PARCEL_AREA: "",
            PARCEL_SPATIAL_ID: Object(_identify_Component_common_common_func__WEBPACK_IMPORTED_MODULE_11__["generateUUID"])(),
            MUNICIPALITY_NAME_Code: lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(values, "municipality_id", ""),
            PARCEL_AREA: ""
          }
        });
        this.props.input.onChange({
          parcels: JSON.parse(JSON.stringify([...this.selectedParcels])),
          parcelData: JSON.parse(JSON.stringify({
            ...this.state.parcelData
          }))
        });
        this.setState({
          selectedParcels: [...this.selectedParcels],
          parcelData: this.state.parcelData
        });
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(this, "openPopup", scope => {
      var fields = this.parcelDataFields;
      this.props.setMain("Popup", {
        popup: {
          type: "create",
          childProps: {
            fields,
            initialValues: {
              ...scope.state.parcelData
            },
            ok(values) {
              scope.props.input.onChange({
                parcels: [...scope.state.selectedParcels],
                parcelData: {
                  ...values
                }
              });
              scope.setState({
                selectedParcels: [...scope.selectedParcels],
                parcelData: {
                  ...values
                }
              });
              return Promise.resolve(true);
            }
          }
        }
      });
    });
    this.parcelDataFields = {
      north_length: {
        label: "طول الحد الشمالي (م)",
        placeholder: "من فضلك ادخل طول الحد الشمالي (م)",
        field: "inputNumber",
        name: "north_length",
        required: true
      },
      north_desc: {
        label: "وصف الحد الشمالي",
        placeholder: "من فضلك ادخل وصف الحد الشمالي",
        type: "text",
        name: "north_desc",
        maxLength: 200,
        required: true
      },
      south_length: {
        label: "طول الحد الجنوبي (م)",
        placeholder: "من فضلك ادخل طول الحد الجنوبي (م)",
        field: "inputNumber",
        name: "south_length",
        required: true
      },
      south_desc: {
        label: "وصف الحد الجنوبي",
        placeholder: "من فضلك ادخل وصف الحد الجنوبي",
        type: "text",
        name: "south_desc",
        maxLength: 200,
        required: true
      },
      east_length: {
        label: "طول الحد الشرقي (م)",
        placeholder: "من فضلك ادخل طول الحد الشرقي (م)",
        field: "inputNumber",
        name: "east_length",
        required: true
      },
      east_desc: {
        label: "وصف الحد الشرقي",
        placeholder: "من فضلك ادخل وصف الحد الشرقي",
        type: "text",
        name: "east_desc",
        maxLength: 200,
        required: true
      },
      west_length: {
        label: "طول الحد الغربي (م)",
        placeholder: "من فضلك ادخل طول الحد الغربي (م)",
        field: "inputNumber",
        name: "west_length",
        required: true
      },
      west_desc: {
        label: "وصف الحد الغربي",
        placeholder: "من فضلك ادخل وصف الحد الغربي",
        type: "text",
        name: "west_desc",
        maxLength: 200,
        required: true
      }
    };
    if (props.mainObject && props.mainObject.landData && props.mainObject.landData.landData && props.mainObject.landData.landData.lands) {
      const {
        mainObject: {
          landData: {
            landData: {
              lands
            }
          }
        }
      } = props;
      lands.parcels.forEach(parcel => {
        if (parcel.attributes.PARCEL_AREA && !parcel.attributes.NEW_PARCEL_AREA) {
          parcel.attributes.NEW_PARCEL_AREA = parcel.attributes.PARCEL_AREA;
        }
      });
      this.selectedParcels = JSON.parse(JSON.stringify(lands.parcels || []));
      this.state = {
        selectedParcels: JSON.parse(JSON.stringify(lands.parcels || [])),
        parcelData: JSON.parse(JSON.stringify(lands.parcelData || {}))
      };
    } else {
      this.selectedParcels = [];
      this.state = {
        selectedParcels: [],
        parcelData: {}
      };
    }
  }
  render() {
    const {
      selectedParcels
    } = this.state;
    const {
      parcel_fields,
      parcel_fields_headers,
      values,
      multiple
    } = this.props;
    var uploadedImage = lodash_get__WEBPACK_IMPORTED_MODULE_3___default()(values, "image_uploader", "");
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div", {
      style: {
        gridColumn: "1/3"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_1___default.a, {
      className: "add-gis",
      disabled: !multiple ? !uploadedImage || selectedParcels.length > 0 : false,
      onClick: this.addParcel.bind(this)
    }, "\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0623\u0631\u0636"), selectedParcels && selectedParcels.length > 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("h1", {
      className: "titleSelectedParcel"
    }, "\u0627\u0644\u0623\u0631\u0627\u0636\u064A \u0627\u0644\u0645\u062E\u062A\u0627\u0631\u0629"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("table", {
      className: "table table-bordered",
      style: {
        marginTop: "1%"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("thead", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("tr", null, parcel_fields_headers.map((field, k) => {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("th", null, field);
    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("th", null, " \u062E\u064A\u0627\u0631\u0627\u062A"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("tbody", null, selectedParcels.map((e, i) => {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("tr", {
        key: i
      }, parcel_fields.map((field, k) => {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("td", {
          key: k
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div", null, !this.state[field + "_isEdit_" + i] ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("span", null, Object(_identify_Component_common_common_func__WEBPACK_IMPORTED_MODULE_11__["localizeNumber"])(e.attributes[field] || "")), this.showEditBtn(field, e.attributes[field]) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("span", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("button", {
          className: "btn",
          style: {
            marginRight: e.attributes[field] ? "20px" : "0px"
          },
          onClick: this.enableEdit.bind(this, field, i)
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("i", {
          className: "fas fa-edit"
        })))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("span", {
          style: {
            display: "grid",
            gridTemplateColumns: "1fr auto"
          }
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("input", {
          key: i,
          className: "form-control",
          type: field != "PARCEL_PLAN_NO" ? "number" : "text",
          step: "any",
          maxLength: 200,
          value: e.attributes[field],
          onChange: this.myChangeHandler.bind(this, field, i, e)
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("button", {
          className: "btn",
          style: {
            marginRight: "20px"
          },
          onClick: this.saveEdit.bind(this, e.attributes.PARCEL_SPATIAL_ID, field, i, false)
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("i", {
          className: "fa fa-floppy-o"
        })))));
      }), i === selectedParcels.length - 1 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("td", null, this.props.currentModule.id != 108 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("button", {
        className: "btn follow",
        style: {
          margin: "0px 5px"
        },
        onClick: () => {
          this.openPopup(this);
        }
      }, "\u062D\u062F\u0648\u062F \u0648 \u0623\u0628\u0639\u0627\u062F \u0627\u0644\u0623\u0631\u0636 \u062D\u0633\u0628 \u0648\u062B\u064A\u0642\u0629 \u0627\u0644\u0645\u0644\u0643\u064A\u0629"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("button", {
        className: " btn btn-danger ",
        onClick: this.remove.bind(this, e)
      }, "\u062D\u0630\u0641")) : "");
    })))));
  }
}
/* harmony default export */ __webpack_exports__["default"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_7__["connect"])(_mapping__WEBPACK_IMPORTED_MODULE_5__["mapStateToProps"], appMapDispatchToProps)(planParcelsComponent));

/***/ }),

/***/ "./src/app/components/inputs/fields/selectedParcels/Component/style.css":
/*!******************************************************************************!*\
  !*** ./src/app/components/inputs/fields/selectedParcels/Component/style.css ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


var content = __webpack_require__(/*! !../../../../../../../node_modules/css-loader/dist/cjs.js!./style.css */ "./node_modules/css-loader/dist/cjs.js!./src/app/components/inputs/fields/selectedParcels/Component/style.css");

if(typeof content === 'string') content = [[module.i, content, '']];

var transform;
var insertInto;



var options = {"hmr":true}

options.transform = transform
options.insertInto = undefined;

var update = __webpack_require__(/*! ../../../../../../../node_modules/style-loader/lib/addStyles.js */ "./node_modules/style-loader/lib/addStyles.js")(content, options);

if(content.locals) module.exports = content.locals;

if(false) {}

/***/ })

}]);
//# sourceMappingURL=49.min.js.map