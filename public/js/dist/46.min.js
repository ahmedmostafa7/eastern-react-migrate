(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[46],{

/***/ "./src/app/components/inputs/fields/identify/Component/FilterComponent/index.js":
/*!**************************************************************************************!*\
  !*** ./src/app/components/inputs/fields/identify/Component/FilterComponent/index.js ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var antd_lib_input_style__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd/lib/input/style */ "./node_modules/antd/lib/input/style/index.js");
/* harmony import */ var antd_lib_input_style__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd_lib_input_style__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var antd_lib_input__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd/lib/input */ "./node_modules/antd/lib/input/index.js");
/* harmony import */ var antd_lib_input__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd_lib_input__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var antd_lib_spin_style__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! antd/lib/spin/style */ "./node_modules/antd/lib/spin/style/index.js");
/* harmony import */ var antd_lib_spin_style__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(antd_lib_spin_style__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var antd_lib_spin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! antd/lib/spin */ "./node_modules/antd/lib/spin/index.js");
/* harmony import */ var antd_lib_spin__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(antd_lib_spin__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var antd_lib_select_style__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd/lib/select/style */ "./node_modules/antd/lib/select/style/index.js");
/* harmony import */ var antd_lib_select_style__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(antd_lib_select_style__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd_lib_select__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd/lib/select */ "./node_modules/antd/lib/select/index.js");
/* harmony import */ var antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd_lib_select__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../mapviewer/config */ "./src/app/components/inputs/fields/identify/Component/mapviewer/config/index.js");
/* harmony import */ var _common_common_func__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/common_func */ "./src/app/components/inputs/fields/identify/Component/common/common_func.js");










class FilterComponent extends react__WEBPACK_IMPORTED_MODULE_7__["Component"] {
  constructor(...args) {
    super(...args);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(this, "state", {
      searchLayer: null,
      searchLayers: [],
      formValues: {},
      searchFields: [],
      isActiveBufferSearch: false,
      showInfo: false,
      noData: false
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(this, "self", this);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(this, "mapPoint", null);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(this, "handleSearchSelect", () => layer => {
      this.setState({
        searchLayer: layer,
        showInfo: false,
        noData: false,
        formValues: {},
        searchFields: [],
        isActiveBufferSearch: false
      });
      this.props.setSelectMapLayer(layer);
      this.getListsValue(layer);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(this, "getListsValue", (layer, getListsAfterFieldName, parentFilter) => {
      var _editAndDeleteMapLaye, _editAndDeleteMapLaye2;
      //get all filters
      let promiseQueries = [];
      let fieldsName = [];
      let layerdId = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_9__["getLayerId"])(this.props.map.__mapInfo, layer);
      (_editAndDeleteMapLaye = _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["editAndDeleteMapLayers"][layer]) === null || _editAndDeleteMapLaye === void 0 ? void 0 : (_editAndDeleteMapLaye2 = _editAndDeleteMapLaye.searchFields) === null || _editAndDeleteMapLaye2 === void 0 ? void 0 : _editAndDeleteMapLaye2.filter(x => !x.isSearch).forEach((item, index) => {
        if (!getListsAfterFieldName) {
          fieldsName.push(item.field);
          let filterQuery = parentFilter ? parentFilter + " and " + item.field + " is not null" : "1=1";
          promiseQueries.push(Object(_common_common_func__WEBPACK_IMPORTED_MODULE_9__["queryTask"])({
            url: _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["addedParcelMapServiceUrl"] + "/" + layerdId,
            where: filterQuery,
            outFields: item.zoomLayer && item.zoomLayer.filterField && !item.zoomLayer.isNotSameAttributeNameInLayer ? [item.field, item.zoomLayer.filterField] : [item.field],
            returnGeometry: false,
            returnExecuteObject: true,
            returnDistinctValues: true
          }));
        } else {
          if (item.field == getListsAfterFieldName) getListsAfterFieldName = null;
        }
      });
      if (promiseQueries.length > 0) Object(_common_common_func__WEBPACK_IMPORTED_MODULE_9__["showLoading"])(true);else {
        var _editAndDeleteMapLaye3, _editAndDeleteMapLaye4;
        this.setState({
          searchFields: (_editAndDeleteMapLaye3 = _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["editAndDeleteMapLayers"][layer]) === null || _editAndDeleteMapLaye3 === void 0 ? void 0 : (_editAndDeleteMapLaye4 = _editAndDeleteMapLaye3.searchFields) === null || _editAndDeleteMapLaye4 === void 0 ? void 0 : _editAndDeleteMapLaye4.filter(x => !x.isSearch)
        });
      }
      if (!this.state.formValues["MUNICIPALITY_NAME"]) {
        promiseQueries = [promiseQueries[0]];
        fieldsName = [fieldsName[0]];
      }
      Promise.all(promiseQueries).then(resultsData => {
        this.mapResultWithDomain(resultsData, fieldsName, layerdId).then(data => {
          var _editAndDeleteMapLaye7, _editAndDeleteMapLaye8, _editAndDeleteMapLaye9, _editAndDeleteMapLaye10;
          data.forEach((item, index) => {
            var _editAndDeleteMapLaye5, _editAndDeleteMapLaye6;
            let searchField = (_editAndDeleteMapLaye5 = _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["editAndDeleteMapLayers"][layer]) === null || _editAndDeleteMapLaye5 === void 0 ? void 0 : (_editAndDeleteMapLaye6 = _editAndDeleteMapLaye5.searchFields) === null || _editAndDeleteMapLaye6 === void 0 ? void 0 : _editAndDeleteMapLaye6.find(x => x.field == fieldsName[index]);
            if (item.features.length > 0) {
              searchField.dataList = fieldsName[index] === "MUNICIPALITY_NAME" ? [...item.features.filter(f => typeof f.attributes["MUNICIPALITY_NAME"] === "string").sort((a, b) => a.attributes["MUNICIPALITY_NAME"].localeCompare(b.attributes["MUNICIPALITY_NAME"], "ar"))] : [...item.features];
            } else {
              searchField.dataList = [];
            }
          });
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_9__["showLoading"])(false);
          this.setState({
            searchFields: this.state.formValues["MUNICIPALITY_NAME"] ? (_editAndDeleteMapLaye7 = _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["editAndDeleteMapLayers"][layer]) === null || _editAndDeleteMapLaye7 === void 0 ? void 0 : (_editAndDeleteMapLaye8 = _editAndDeleteMapLaye7.searchFields) === null || _editAndDeleteMapLaye8 === void 0 ? void 0 : _editAndDeleteMapLaye8.filter(x => !x.isSearch) : (_editAndDeleteMapLaye9 = _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["editAndDeleteMapLayers"][layer]) === null || _editAndDeleteMapLaye9 === void 0 ? void 0 : (_editAndDeleteMapLaye10 = _editAndDeleteMapLaye9.searchFields) === null || _editAndDeleteMapLaye10 === void 0 ? void 0 : _editAndDeleteMapLaye10.filter(x => x.field == "MUNICIPALITY_NAME"),
            formValues: {
              ...this.state.formValues
            }
          });
        });
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(this, "mapResultWithDomain", (results, fieldsName, layerId) => {
      return new Promise((resolve, reject) => {
        let count = fieldsName.length;
        results.forEach((item, index) => {
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_9__["getFeatureDomainName"])(item.features, layerId, false, _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["addedParcelMapServiceUrl"]).then(domainResult => {
            if (domainResult) item.features = domainResult;
            --count;
            if (count < 1) {
              resolve(results);
            }
          });
        });
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(this, "selectChange", (name, listData, item) => e => {
      this.setState({
        showInfo: false,
        noData: false
      });
      if (!e) {
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_9__["clearGraphicFromLayer"])(this.props.map, "ZoomGraphicLayer");
        this.setState({
          [name]: undefined
        });
      }
      this.setState({
        formValues: {
          ...this.state.formValues,
          [name]: e
        }
      }, () => {
        let searchField = _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["editAndDeleteMapLayers"][this.state.searchLayer].searchFields.find(i => i.field == name && !i.isSearch);
        if (searchField) {
          let filterQuery = [];
          if (searchField.zoomLayer) {
            let item = searchField.dataList.find(x => (x.attributes[name + "_Code"] || x.attributes[name]) == this.state.formValues[name]);
            if (item) {
              let where = "";
              if (searchField.zoomLayer.isNotSameAttributeNameInLayer) {
                where = searchField.zoomLayer.filterField + "=" + "'" + (item.attributes[searchField.field + "_Code"] || item.attributes[searchField.zoomLayer.field]) + "'";
              } else {
                where = searchField.zoomLayer.filterField + "=" + "'" + (item.attributes[searchField.zoomLayer.filterField + "_Code"] || item.attributes[searchField.zoomLayer.filterField]) + "'";
              }
              if (e) {
                Object(_common_common_func__WEBPACK_IMPORTED_MODULE_9__["zoomToFeatureByFilter"])(where, searchField.zoomLayer.name, this.props.map, null, data => {
                  if (item) {
                    item.attributes["OBJECTID"] = data.attributes["OBJECTID"];
                    item.geometry = data.geometry;
                    this.state[name + "_Object"] = item;
                  }
                });
              }
            }
          }
          this.state.formValues = this.deleteChildValues(name);
          Object.keys(this.state.formValues).forEach(key => {
            if (this.state.formValues[key]) filterQuery.push(key + "='" + this.state.formValues[key] + "'");
          });
          this.getListsValue(this.state.searchLayer, name, filterQuery.join(" and "));
        }
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(this, "deleteChildValues", name => {
      let found = false;
      _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["editAndDeleteMapLayers"][this.state.searchLayer].searchFields.forEach(item => {
        if (found) {
          delete this.state.formValues[item.field];
          delete this.state[item.field];
        }
        if (item.field == name) {
          found = true;
        }
      });
      return this.state.formValues;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(this, "handleChangeInput", e => {
      this.setState({
        showInfo: false,
        noData: false,
        formValues: {
          ...this.state.formValues,
          [e.target.name]: e.target.value
        }
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(this, "handleBufferSearch", e => {
      this.setState({
        showInfo: false,
        noData: false,
        buffer_distance: e.target.value
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(this, "searchForData", e => {
      let searchFields = _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["editAndDeleteMapLayers"][this.state.searchLayer].searchFields;
      let selectedFeature = this.state[searchFields[searchFields.length - 1].field + "_Object"];
      let layerdId = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_9__["getLayerId"])(this.props.map.__mapInfo, this.state.searchLayer);
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_9__["queryTask"])({
        url: this.props.map.getLayer("basemap").url.split("?")[0] + "/" + layerdId,
        where: "OBJECTID = " + selectedFeature.attributes["OBJECTID"],
        outFields: _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["layersSetting"][this.state.searchLayer].outFields,
        returnGeometry: false,
        callbackResult: ({
          features
        }) => {
          if (features.length > 0) {
            Object(_common_common_func__WEBPACK_IMPORTED_MODULE_9__["getFeatureDomainName"])(features, layerdId, false, _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["addedParcelMapServiceUrl"]).then(res => {
              selectedFeature.attributes = {
                ...res[0].attributes
              };
              selectedFeature.layerName = this.state.searchLayer;
              this.props.addFeature(selectedFeature);
              this.state.formValues[searchFields[searchFields.length - 1].field] = null;
              this.setState({
                formValues: {
                  ...this.state.formValues
                }
              });
            });
          }
        },
        callbackError(error) {}
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(this, "onChange", e => {
      this.setState({
        isActiveBufferSearch: !this.state.isActiveBufferSearch
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(this, "changeDate", name => e => {
      this.setState({
        formValues: {
          ...this.state.formValues,
          [name]: e
        }
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(this, "onSearch", (item, filterValue) => {
      if (item.isServerSideSearch) {
        if (this.searchTimeOut) clearTimeout(this.searchTimeOut);
        this.searchTimeOut = setTimeout(() => {
          this.setState({
            fetching: true
          });
          let filterQuery = [];
          Object.keys(this.state.formValues).forEach(key => {
            if (this.state.formValues[key] && key != item.field && key != item.isServerSideSearch) filterQuery.push(key + "='" + this.state.formValues[key] + "'");
          });
          if (filterValue) {
            filterQuery.push(item.field + " like '%" + filterValue + "%'");
          }
          let layerdId = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_9__["getLayerId"])(this.props.map.__mapInfo, this.state.searchLayer);
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_9__["queryTask"])({
            url: _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["addedParcelMapServiceUrl"] + "/" + layerdId,
            where: filterQuery.join(" and "),
            outFields: [item.field, item.zoomLayer.filterField],
            returnDistinctValues: true,
            returnGeometry: false,
            callbackResult: ({
              features
            }) => {
              let searchField = _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["editAndDeleteMapLayers"][this.state.searchLayer].searchFields.find(x => x.field == item.field);
              if (features.length > 0) searchField.dataList = [...features];
              this.setState({
                searchFields: [..._mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["editAndDeleteMapLayers"][this.state.searchLayer].searchFields.filter(x => !x.isSearch)],
                formValues: {
                  ...this.state.formValues
                },
                fetching: false
              });
            }
          });
        }, 500);
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(this, "isActive", () => {
      let searchFields = _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["editAndDeleteMapLayers"][this.state.searchLayer].searchFields;
      return !this.state.formValues[searchFields[searchFields.length - 1].field];
    });
  }
  componentDidMount() {
    this.setState({
      searchLayers: Object.keys(_mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["editAndDeleteMapLayers"]).map(key => {
        return {
          layerName: key,
          layer: _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["editAndDeleteMapLayers"][key],
          name: _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["editAndDeleteMapLayers"][key].name
        };
      }).filter(l => {
        return l.layer.searchFields && Object(_common_common_func__WEBPACK_IMPORTED_MODULE_9__["isLayerExist"])(this.props.map.__mapInfo, l.layerName);
      })
    });
  }
  componentWillUnmount() {
    Object(_common_common_func__WEBPACK_IMPORTED_MODULE_9__["clearGraphicFromLayer"])(this.props.map, "ZoomGraphicLayer");
  }
  render() {
    const {
      t
    } = this.props;
    const filterText = this.state.searchLayer && _mapviewer_config__WEBPACK_IMPORTED_MODULE_8__["editAndDeleteMapLayers"][this.state.searchLayer].searchFields.find(x => x.isSearch);
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
      style: {
        textAlign: "right",
        paddingRight: "10px"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
      style: {
        display: "grid"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("label", {
      className: "selectLabelStyle"
    }, "\u0627\u0644\u0637\u0628\u0642\u0629"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a, {
      virtual: false,
      showSearch: true,
      className: "dont-show",
      onChange: this.handleSearchSelect(),
      value: this.state.searchLayer,
      placeholder: "\u0627\u0644\u0637\u0628\u0642\u0629",
      getPopupContainer: trigger => trigger.parentNode,
      optionFilterProp: "v",
      filterOption: (input, option) => option.v && option.v.indexOf(input) >= 0
    }, this.state.searchLayers.map((s, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a.Option, {
      v: s.name,
      value: s.layerName,
      id: s.layerName
    }, s.name))), this.state.searchFields.map((item, index) => {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
        style: {
          display: "grid"
        },
        key: index
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("label", {
        className: "selectLabelStyle"
      }, item.alias), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a, {
        style: {
          width: "50%"
        },
        virtual: false,
        disabled: item.dataList && item.dataList.length == 0,
        showSearch: true,
        allowClear: true,
        notFoundContent: this.state.fetching ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd_lib_spin__WEBPACK_IMPORTED_MODULE_3___default.a, {
          size: "small"
        }) : null,
        onChange: this.selectChange(item.field, item.dataList, item),
        value: this.state.formValues[item.field],
        placeholder: item.alias,
        onSearch: e => {
          this.setState({
            [item.field]: e
          });
          this.onSearch(item, e);
        },
        getPopupContainer: trigger => trigger.parentNode,
        optionFilterProp: "v"
      }, item.dataList && item.dataList.filter((e, i) => {
        if (this.state[item.field]) {
          return e.attributes[item.field] && e.attributes[item.field].toLowerCase().indexOf(this.state[item.field].toLowerCase()) >= 0;
        } else {
          return i < 100 && e.attributes[item.field];
        }
      }).slice(0, 50).map((m, i) => {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a.Option, {
          key: m.attributes[item.field] + i,
          v: m.attributes[item.field],
          value: m.attributes[item.field + "_Code"] || m.attributes[item.field]
        }, m.attributes[item.field]);
      })));
    })), this.state.searchLayer && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", null, filterText && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
      style: {
        display: "grid"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("label", {
      className: "selectLabelStyle"
    }, filterText.alias), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd_lib_input__WEBPACK_IMPORTED_MODULE_1___default.a, {
      name: filterText.field,
      onChange: this.handleChangeInput,
      value: this.state.formValues[filterText.field],
      placeholder: filterText.alias
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
      style: {
        display: "grid"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div", {
      style: {
        textAlign: "center"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("button", {
      onClick: this.searchForData,
      className: "SearchBtn mt-3 w-25",
      size: "large",
      disabled: this.isActive(),
      htmlType: "submit"
    }, "\u0625\u0636\u0627\u0641\u0629")))));
  }
}
/* harmony default export */ __webpack_exports__["default"] = (FilterComponent);

/***/ }),

/***/ "./src/app/components/inputs/fields/identify/Component/editUpdateFilterComponent/ExportCSV.js":
/*!****************************************************************************************************!*\
  !*** ./src/app/components/inputs/fields/identify/Component/editUpdateFilterComponent/ExportCSV.js ***!
  \****************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_export_excel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-export-excel */ "./node_modules/react-export-excel/dist/index.js");
/* harmony import */ var react_export_excel__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_export_excel__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");



const ExcelFile = react_export_excel__WEBPACK_IMPORTED_MODULE_1___default.a.ExcelFile;
const ExcelSheet = react_export_excel__WEBPACK_IMPORTED_MODULE_1___default.a.ExcelFile.ExcelSheet;
const ExcelColumn = react_export_excel__WEBPACK_IMPORTED_MODULE_1___default.a.ExcelFile.ExcelColumn;
function ExportCSV({
  dataSet,
  columns,
  labels,
  layerName
}) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ExcelFile, {
    filename: layerName + "CSV",
    element: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", null, "CSV \u0627\u0633\u062A\u062E\u0631\u0627\u062C \u0645\u0644\u0641")
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ExcelSheet, {
    data: dataSet,
    name: "AttributeTable"
  }, labels.map((head, index) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ExcelColumn, {
    label: head,
    value: col => {
      return col.attributes[head] ? col.attributes[head] + '' : null;
    }
  }))));
}
/* harmony default export */ __webpack_exports__["default"] = (ExportCSV);

/***/ }),

/***/ "./src/app/components/inputs/fields/identify/Component/editUpdateFilterComponent/index.js":
/*!************************************************************************************************!*\
  !*** ./src/app/components/inputs/fields/identify/Component/editUpdateFilterComponent/index.js ***!
  \************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var antd_lib_modal_style__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! antd/lib/modal/style */ "./node_modules/antd/lib/modal/style/index.js");
/* harmony import */ var antd_lib_modal_style__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd_lib_modal_style__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var antd_lib_modal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd/lib/modal */ "./node_modules/antd/lib/modal/index.js");
/* harmony import */ var antd_lib_modal__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd_lib_modal__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var antd_lib_input_style__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! antd/lib/input/style */ "./node_modules/antd/lib/input/style/index.js");
/* harmony import */ var antd_lib_input_style__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(antd_lib_input_style__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var antd_lib_input__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! antd/lib/input */ "./node_modules/antd/lib/input/index.js");
/* harmony import */ var antd_lib_input__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(antd_lib_input__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var antd_lib_select_style__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd/lib/select/style */ "./node_modules/antd/lib/select/style/index.js");
/* harmony import */ var antd_lib_select_style__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(antd_lib_select_style__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var antd_lib_select__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd/lib/select */ "./node_modules/antd/lib/select/index.js");
/* harmony import */ var antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(antd_lib_select__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var antd_lib_tooltip_style__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! antd/lib/tooltip/style */ "./node_modules/antd/lib/tooltip/style/index.js");
/* harmony import */ var antd_lib_tooltip_style__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(antd_lib_tooltip_style__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! antd/lib/tooltip */ "./node_modules/antd/lib/tooltip/index.js");
/* harmony import */ var antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var antd_lib_checkbox_style__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! antd/lib/checkbox/style */ "./node_modules/antd/lib/checkbox/style/index.js");
/* harmony import */ var antd_lib_checkbox_style__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(antd_lib_checkbox_style__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var antd_lib_checkbox__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! antd/lib/checkbox */ "./node_modules/antd/lib/checkbox/index.js");
/* harmony import */ var antd_lib_checkbox__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(antd_lib_checkbox__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var antd_lib_dropdown_style__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! antd/lib/dropdown/style */ "./node_modules/antd/lib/dropdown/style/index.js");
/* harmony import */ var antd_lib_dropdown_style__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(antd_lib_dropdown_style__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var antd_lib_dropdown__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! antd/lib/dropdown */ "./node_modules/antd/lib/dropdown/index.js");
/* harmony import */ var antd_lib_dropdown__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(antd_lib_dropdown__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var antd_lib_icon_style__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! antd/lib/icon/style */ "./node_modules/antd/lib/icon/style/index.js");
/* harmony import */ var antd_lib_icon_style__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(antd_lib_icon_style__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var antd_lib_icon__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! antd/lib/icon */ "./node_modules/antd/lib/icon/index.js");
/* harmony import */ var antd_lib_icon__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(antd_lib_icon__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var antd_lib_button_style__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! antd/lib/button/style */ "./node_modules/antd/lib/button/style/index.js");
/* harmony import */ var antd_lib_button_style__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(antd_lib_button_style__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var antd_lib_button__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! antd/lib/button */ "./node_modules/antd/lib/button/index.js");
/* harmony import */ var antd_lib_button__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(antd_lib_button__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ "./node_modules/@babel/runtime/helpers/extends.js");
/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var antd_lib_upload_style__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! antd/lib/upload/style */ "./node_modules/antd/lib/upload/style/index.js");
/* harmony import */ var antd_lib_upload_style__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(antd_lib_upload_style__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var antd_lib_upload__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! antd/lib/upload */ "./node_modules/antd/lib/upload/index.js");
/* harmony import */ var antd_lib_upload__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(antd_lib_upload__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var antd_lib_menu_style__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! antd/lib/menu/style */ "./node_modules/antd/lib/menu/style/index.js");
/* harmony import */ var antd_lib_menu_style__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(antd_lib_menu_style__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var antd_lib_menu__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! antd/lib/menu */ "./node_modules/antd/lib/menu/index.js");
/* harmony import */ var antd_lib_menu__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(antd_lib_menu__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var antd_lib_message_style__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! antd/lib/message/style */ "./node_modules/antd/lib/message/style/index.js");
/* harmony import */ var antd_lib_message_style__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(antd_lib_message_style__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var antd_lib_message__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! antd/lib/message */ "./node_modules/antd/lib/message/index.js");
/* harmony import */ var antd_lib_message__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(antd_lib_message__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "./node_modules/@babel/runtime/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_24__);
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../.. */ "./src/app/components/inputs/index.js");
/* harmony import */ var _helpers_functions__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../../../../helpers/functions */ "./src/app/helpers/functions/index.js");
/* harmony import */ var _maping__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./maping */ "./src/app/components/inputs/fields/identify/Component/editUpdateFilterComponent/maping.js");
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! react-redux */ "./node_modules/react-redux/es/index.js");
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");
/* harmony import */ var _imports_config__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../../../../../../imports/config */ "./src/imports/config.js");
/* harmony import */ var _common_common_func__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../common/common_func */ "./src/app/components/inputs/fields/identify/Component/common/common_func.js");
/* harmony import */ var _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../mapviewer/config */ "./src/app/components/inputs/fields/identify/Component/mapviewer/config/index.js");
/* harmony import */ var _fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @fortawesome/react-fontawesome */ "./node_modules/@fortawesome/react-fontawesome/index.es.js");
/* harmony import */ var _reducers__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../../../../../reducers */ "./src/app/reducers/index.js");
/* harmony import */ var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @fortawesome/free-solid-svg-icons */ "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_36___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_36__);
/* harmony import */ var _main_helpers_functions_filters_state__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../../../../../../../main_helpers/functions/filters/state */ "./src/main_helpers/functions/filters/state.js");
/* harmony import */ var _MapComponent_MapComponent__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../MapComponent/MapComponent */ "./src/app/components/inputs/fields/identify/Component/MapComponent/MapComponent.js");
/* harmony import */ var react_sticky__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! react-sticky */ "./node_modules/react-sticky/lib/index.js");
/* harmony import */ var react_sticky__WEBPACK_IMPORTED_MODULE_39___default = /*#__PURE__*/__webpack_require__.n(react_sticky__WEBPACK_IMPORTED_MODULE_39__);
/* harmony import */ var _MapBtnsComponent__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ../MapBtnsComponent */ "./src/app/components/inputs/fields/identify/Component/MapBtnsComponent/index.js");
/* harmony import */ var _FilterComponent__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ../FilterComponent */ "./src/app/components/inputs/fields/identify/Component/FilterComponent/index.js");
/* harmony import */ var _common_esri_request__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ../common/esri_request */ "./src/app/components/inputs/fields/identify/Component/common/esri_request.js");
/* harmony import */ var _ExportCSV__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./ExportCSV */ "./src/app/components/inputs/fields/identify/Component/editUpdateFilterComponent/ExportCSV.js");












































const pageSize = 10;
class editUpdateFilterComponent extends react__WEBPACK_IMPORTED_MODULE_24__["Component"] {
  constructor(props) {
    var _props$mainObject, _props$mainObject$edi, _props$mainObject2, _props$mainObject2$ed;
    super(props);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "mapFieldsAndGetDomainCodes", (attributes, searchBy) => {
      let tempAttributes = {};
      this.props.UploadFileDetails.activeLayerDetails.outFields.forEach(outField => {
        if (outField.mappingField) {
          let domainField = this.LayerFields.find(x => x.name == outField.name);
          if (domainField !== null && domainField !== void 0 && domainField.domain) {
            let domainValues = domainField.domain.codedValues.filter(x => x[searchBy] == attributes[outField.mappingField]);
            if (domainValues.length == 1) {
              if (searchBy == "code") {
                tempAttributes[outField.name + "_Code"] = domainValues[0].code;
                tempAttributes[outField.name] = domainValues[0].name;
              } else {
                tempAttributes[outField.name + "_Code"] = domainValues[0].code;
                tempAttributes[outField.name] = attributes[outField.mappingField] != "<Null>" ? attributes[outField.mappingField] : null;
              }
            }
          } else {
            tempAttributes[outField.name] = attributes[outField.mappingField] != "<Null>" ? attributes[outField.mappingField] : null;
          }
        }
      });
      return tempAttributes;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "getSpatialRelationsWithLayers", (features, spatialRelationLayers) => {
      return new Promise((resolve, reject) => {
        _reducers__WEBPACK_IMPORTED_MODULE_34__["default"].dispatch({
          type: "Show_Loading_new",
          loading: true
        });
        let intersectGraphic = window.geometryEngine.union(features.map(f => {
          return f.geometry;
        }));
        let promiseList = [];
        spatialRelationLayers.forEach(item => {
          let layerId = this.LayerID[item.layerName];
          promiseList.push(Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["queryTask"])({
            url: _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["addedParcelMapServiceUrl"] + "/" + layerId,
            geometry: intersectGraphic,
            queryWithGemoerty: true,
            returnGeometry: true,
            outFields: item.bindFields.map(i => i.dependLayerField),
            returnExecuteObject: true
          }));
        });
        let promises = window.promiseAll(promiseList);
        promises.then(result => {
          features.forEach(feature => {
            spatialRelationLayers.forEach((item, index) => {
              let intersectedGeometry = result[index].features.find(x => {
                return window.geometryEngine.contains(x.geometry, feature.geometry);
              });
              if (intersectedGeometry) {
                item.bindFields.forEach(bindField => {
                  feature.attributes[bindField.mappingField] = intersectedGeometry.attributes[bindField.dependLayerField];
                });
              }
            });
          });
          _reducers__WEBPACK_IMPORTED_MODULE_34__["default"].dispatch({
            type: "Show_Loading_new",
            loading: false
          });
          if (!features.find(x => x.attributes.MUNICIPALITY_NAME)) {
            antd_lib_message__WEBPACK_IMPORTED_MODULE_22___default.a.error("البيانات المدرجة خارج حدود البلديات");
            resolve([]);
          } else {
            resolve([...features]);
          }
        });
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "handleOk", () => {
      if (this.state.isEditMultiple) {
        this.state.allFeatures[this.state.isEditMultiple].features.forEach(f => {
          if (f.isSelected) {
            Object.keys(this.state.editFeature.attributes).forEach(attribute => {
              if (this.state.editFeature.attributes[attribute]) f.attributes[attribute] = this.state.editFeature.attributes[attribute];
            });
          }
        });
      } else {
        this.state.allFeatures[this.state.editFeature.layerName].features[this.state.editFeature.index].attributes = {
          ...this.state.editFeature.attributes
        };
      }
      this.setState({
        allFeatures: {
          ...this.state.allFeatures
        },
        showModal: false,
        isEditMultiple: false
      });
      this.props.setEditableFeatures({
        ...this.state.allFeatures
      });
      //this.drawEditableFeatures([...this.state.features]);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "removeDialog", () => {
      this.setState({
        showModal: false,
        isEditMultiple: false
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "checkIntersect", (features, OBJECTID) => {
      if (features.length == 1) {
        if (features[0].attributes["OBJECTID"] != OBJECTID) {
          return true;
        }
      } else if (features.length > 1) {
        return true;
      }
      return false;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "checkLineFullIntersect", (features, OBJECTID, newFeature, layerType) => {
      let isIntersect = false;
      if (layerType == "line") {
        if (features.length == 1) {
          if (features[0].attributes["OBJECTID"] != OBJECTID) {
            return true;
          }
        } else if (features.length > 1) {
          features.filter(x => x.attributes["OBJECTID"] != OBJECTID).forEach(f => {
            if (!isIntersect) {
              if (newFeature.spatialReference) delete newFeature.spatialReference._geVersion;
              if (f.geometry.spatialReference) delete f.geometry.spatialReference._geVersion;
              isIntersect = window.geometryEngine.equals(newFeature, f.geometry);
            }
          });
        }
      } else {
        return true;
      }
      return isIntersect;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "handleUserInput", e => {
      let editFeatureTemp = {
        ...this.state.editFeature
      };
      editFeatureTemp.attributes[e.target.name] = e.target.value;
      this.setState({
        editFeature: {
          ...editFeatureTemp
        }
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "selectHandleChange", (e, value) => {
      let editFeatureTemp = {
        ...this.state.editFeature
      };
      editFeatureTemp.attributes[e.name + "_Code"] = value;
      editFeatureTemp.attributes[e.name] = e.domain.codedValues.find(x => x.code == value).name;
      this.setState({
        editFeature: {
          ...editFeatureTemp
        }
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "isdisabledField", (field, feature) => {
      if (feature) {
        var _layerInfo$outFields, _layerInfo$outFields$;
        let layerInfo = _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["editAndDeleteMapLayers"][feature.layerName || feature];
        return layerInfo === null || layerInfo === void 0 ? void 0 : (_layerInfo$outFields = layerInfo.outFields) === null || _layerInfo$outFields === void 0 ? void 0 : (_layerInfo$outFields$ = _layerInfo$outFields.find(x => x.name == field.name)) === null || _layerInfo$outFields$ === void 0 ? void 0 : _layerInfo$outFields$.isDisabled;
      }
      return false;
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "onChangeSelectFeature", (index, feature, e) => {
      this.state.allFeatures[feature.layerName].features[index].isSelected = !this.state.allFeatures[feature.layerName].features[index].isSelected;
      let selectedFeatures = this.state.allFeatures[feature.layerName].features.filter(x => x.isSelected);
      if (selectedFeatures.length > 1) {
        this.setState({
          selectedFeatures: [...selectedFeatures],
          allFeatures: {
            ...this.state.allFeatures
          }
        });
      } else {
        this.setState({
          selectedFeatures: [],
          allFeatures: {
            ...this.state.allFeatures
          }
        });
      }
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "zoomToSelectedFeature", layer => {
      let features = [];
      this.state.allFeatures[layer].features.forEach((f, index) => {
        if (f.isSelected) {
          features.push(f);
        }
      });
      if (!features.length) {
        features = this.state.features;
      }
      this.drawEditableFeatures(features);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "editSelectedFeatures", layer => {
      var _this$map$__mapInfo$i;
      let editFeatureObj = {
        attributes: {}
      };
      let layerInfo = _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["editAndDeleteMapLayers"][layer];
      let layerFields = (_this$map$__mapInfo$i = this.map.__mapInfo.info.$layers.layers.find(x => x.name == layer)) === null || _this$map$__mapInfo$i === void 0 ? void 0 : _this$map$__mapInfo$i.fields;
      let editFieldsObj = [];
      layerInfo.outFields.forEach(outField => {
        if (!this.isdisabledField(outField, layer)) editFieldsObj.push(layerFields.find(x => x.name == outField.name));
      });
      this.setState({
        showModal: true,
        editFields: [...editFieldsObj],
        editFeature: {
          ...editFeatureObj
        },
        isEditMultiple: layer
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "deleteSelectedFeatures", layer => {
      this.state.allFeatures[layer].features.forEach((f, index) => {
        f.isDelete = !f.isDelete;
      });
      this.props.setEditableFeatures({
        ...this.state.allFeatures
      });
      this.setState({
        allFeatures: {
          ...this.state.allFeatures
        }
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "removeSelectedFeatures", layer => {
      this.state.allFeatures[layer].isSelectAll = false;
      this.state.allFeatures[layer].selectedFeatures = [];
      this.state.allFeatures[layer].features = [...this.state.allFeatures[layer].features.filter(x => !x.isSelected)];
      this.props.setEditableFeatures({
        ...this.state.allFeatures
      });
      this.setState({
        allFeatures: {
          ...this.state.allFeatures
        }
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "onChangeSelectAll", layerName => {
      this.state.allFeatures[layerName].isSelectAll = !this.state.allFeatures[layerName].isSelectAll;
      this.state.allFeatures[layerName].selectedFeatures = [];
      this.state.allFeatures[layerName].features.map(f => {
        f.isSelected = this.state.allFeatures[layerName].isSelectAll;
      });
      this.setState({
        allFeatures: {
          ...this.state.allFeatures
        }
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "handleChange", page => {
      this.setState({
        current: page,
        minIndex: (page - 1) * pageSize,
        maxIndex: page * pageSize
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "mapLoaded", map => {
      Object(_common_esri_request__WEBPACK_IMPORTED_MODULE_42__["getMapInfo"])(_mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["addedParcelMapServiceUrl"]).then(response => {
        map.__mapInfo = response;
        this.map = map;
        this.map.on("click", evt => {
          this.editToolbar.deactivate();
        });
        this.setState({
          mapLoaded: true
        });
        this.props.setCurrentMap(map);
        if (Object.keys(this.state.allFeatures).length > 0) {
          var _this$state, _this$state$allFeatur, _this$state$allFeatur2;
          if (((_this$state = this.state) === null || _this$state === void 0 ? void 0 : (_this$state$allFeatur = _this$state.allFeatures[Object.keys(this.state.allFeatures)[0]]) === null || _this$state$allFeatur === void 0 ? void 0 : (_this$state$allFeatur2 = _this$state$allFeatur.features) === null || _this$state$allFeatur2 === void 0 ? void 0 : _this$state$allFeatur2.length) > 0) {
            Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["highlightFeature"])(this.state.allFeatures[Object.keys(this.state.allFeatures)[0]].features, this.map, {
              layerName: "ZoomGraphicLayer",
              isZoom: true,
              isHighlighPolygonBorder: true,
              zoomFactor: 20
            });
          }
        }
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "setSelectMapLayer", layer => {
      this.props.setSelectMapLayer(layer);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "addFeature", feature => {
      this.state.allFeatures[feature.layerName] = this.state.allFeatures[feature.layerName] || {};
      this.state.allFeatures[feature.layerName].features = this.state.allFeatures[feature.layerName].features || [];
      this.state.allFeatures[feature.layerName].features.push({
        ...feature
      });

      //set original features for compare
      this.state.originalFeatures[feature.layerName] = this.state.originalFeatures[feature.layerName] || {};
      this.state.originalFeatures[feature.layerName].features = this.state.originalFeatures[feature.layerName].features || [];
      this.state.originalFeatures[feature.layerName].features.push(JSON.parse(JSON.stringify(feature)));
      this.setState({
        allFeatures: {
          ...this.state.allFeatures
        },
        originalFeatures: {
          ...this.state.originalFeatures
        }
      });
      this.props.setEditableFeatures({
        ...this.state.allFeatures
      });
      this.props.setOriginalFeatures({
        ...this.state.originalFeatures
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "addSelectedFeaturesFromMap", () => {
      this.props.selectedFeaturesOnMap.forEach(f => {
        f.layerName = this.props.selectMapLayer;
        this.addFeature(f);
      });
      this.props.setSelectedFeaturesOnMap([]);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "exportFile", (fileType, layer) => {
      let conditions = this.state.allFeatures[layer].features.map(f => {
        return "OBJECTID = " + f.attributes["OBJECTID"];
      });
      let where = conditions.join(" or ");
      let whereClause = [{
        ["SDE." + layer]: where
      }];
      let params = {
        Filters: whereClause,
        FileType: fileType
      };
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["showLoading"])(true);
      //notification with it is succeeded
      //notificationMessage(t("fileUploading"), 5);
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["executeGPTool"])(window.exportFeaturesGPUrl, params, this.callBackExportFile, this.callbackExportError, "output_value");
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "callBackExportFile", result => {
      if (result) {
        let anchor = document.createElement("a");
        anchor.href = window.filesURL + "/" + result.value;
        // anchor.download = layersNames[activeLink].layerName
        document.body.appendChild(anchor);
        anchor.click();
      }
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["showLoading"])(false);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "callbackExportError", err => {
      console.log(err);
      //notification with something error happened
      //notificationMessage(t("ErrorOccurd"), 5);

      window.notifySystem("error", "حدث خطأ اثناء استخراج الملفات");
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["showLoading"])(false);
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "exportMenu", layer => {
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_menu__WEBPACK_IMPORTED_MODULE_20___default.a, {
        className: "exportMenu"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_menu__WEBPACK_IMPORTED_MODULE_20___default.a.Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("label", {
        onClick: () => this.exportFile("Shape", layer)
      }, "Shape \u0627\u0633\u062A\u062E\u0631\u0627\u062C \u0645\u0644\u0641")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_menu__WEBPACK_IMPORTED_MODULE_20___default.a.Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_24___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(_ExportCSV__WEBPACK_IMPORTED_MODULE_43__["default"], {
        dataSet: () => this.exportCsvMapping(this.state.allFeatures[layer].features),
        labels: [..._mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["layersSetting"][layer].outFields, "x", "y"],
        layerName: layer
      }))));
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "setFeatures", (features, layer) => {
      let layerdId = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["getLayerId"])(this.map.__mapInfo, layer);
      Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["getFeatureDomainName"])(features, layerdId, false, _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["addedParcelMapServiceUrl"]).then(domainFeatures => {
        _reducers__WEBPACK_IMPORTED_MODULE_34__["default"].dispatch({
          type: "Show_Loading_new",
          loading: false
        });
        domainFeatures.forEach(d => {
          d.isUploaded = true;
          d.layerName = layer;
        });
        this.state.allFeatures[layer] = this.state.allFeatures[layer] || {};
        this.state.allFeatures[layer].features = this.state.allFeatures[layer].features || [];
        //self.state.allFeatures[layer].features.push(...domainFeatures);

        let isMatched = true;
        domainFeatures.forEach(f => {
          let tempF = this.state.allFeatures[layer].features.find(x => x.attributes.OBJECTID == f.attributes.OBJECTID);
          if (tempF) {
            tempF.attributes = {
              ...f.attributes
            };
            tempF.geometry = f.geometry;
            tempF.isUploaded = true;
          } else {
            isMatched = false;
          }
        });
        if (isMatched) {
          this.zoomToFeature(this.state.allFeatures[layer].features);
          this.setState({
            allFeatures: {
              ...this.state.allFeatures
            }
          });
          this.props.setEditableFeatures({
            ...this.state.allFeatures
          });
        } else {
          window.notifySystem("error", "للبيانات المرفوعة لا يتوافق مع البيانات المختارة OBJECTID");
        }
      });
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "uploadMenu", layer => {
      let self = this;
      let startUpload = false;
      const excelUploadProps = {
        name: "file",
        action: `${_imports_config__WEBPACK_IMPORTED_MODULE_30__["host"]}/uploadMultifiles`,
        accept: ".xlsx,.xls",
        onChange(info) {
          if (info.file.status === "uploading") {
            if (!startUpload) {
              _reducers__WEBPACK_IMPORTED_MODULE_34__["default"].dispatch({
                type: "Show_Loading_new",
                loading: true
              });
              startUpload = true;
            }
          }
          if (info.file.status === "done") {
            var _info$file, _info$file$response$;
            Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["readExcel"])((_info$file = info.file) === null || _info$file === void 0 ? void 0 : (_info$file$response$ = _info$file.response[0]) === null || _info$file$response$ === void 0 ? void 0 : _info$file$response$.data, res => {
              let features = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["formatMappingExcel"])(res.features, layer, self.map);
              self.setFeatures(features, layer);
            });
          }
        }
      };
      const handleFileChange = e => {
        if (e.target.files.length == 8) {
          const formData = new window.FormData();
          for (let i = 0; i < e.target.files.length; i++) {
            formData.append("file" + i, e.target.files[i]);
          }
          return axios__WEBPACK_IMPORTED_MODULE_36___default.a.post(`${_imports_config__WEBPACK_IMPORTED_MODULE_30__["host"]}/uploadShpeFiles`, formData, {
            headers: {
              "content-type": "multipart/form-data"
            }
          }).then(({
            data
          }) => {
            let params, outputName, processingToolUrl;
            params = {
              ShapeFile_Name: data[0].data
            };
            processingToolUrl = `${window.restServicesPath.replace("/Eastern", "")}/ShapeFileToJSON/GPServer/ShapeFileToJSON`;

            //outputName = "Output_JSON";

            Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["uploadGISFile"])(processingToolUrl, params, data => {
              var _data$value, _data$value$features;
              if ((_data$value = data.value) !== null && _data$value !== void 0 && (_data$value$features = _data$value.features) !== null && _data$value$features !== void 0 && _data$value$features.length) {
                let features = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["formatMappingShape"])(data.value.features, layer, self.map);
                self.setFeatures(features, layer);
              } else {
                window.notifySystem("error", "الملف لا يحتوي على بيانات");
              }
              _reducers__WEBPACK_IMPORTED_MODULE_34__["default"].dispatch({
                type: "Show_Loading_new",
                loading: false
              });
            }, outputName);
          });
        }
      };
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_menu__WEBPACK_IMPORTED_MODULE_20___default.a, {
        className: "exportMenu"
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_menu__WEBPACK_IMPORTED_MODULE_20___default.a.Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_24___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("input", {
        type: "file",
        id: "actual-btn",
        hidden: true,
        onChange: handleFileChange,
        multiple: true
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("label", {
        htmlFor: "actual-btn"
      }, "Shape \u0631\u0641\u0639 \u0645\u0644\u0641"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_menu__WEBPACK_IMPORTED_MODULE_20___default.a.Item, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_upload__WEBPACK_IMPORTED_MODULE_18___default.a, excelUploadProps, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("label", null, "Excel \u0631\u0641\u0639 \u0645\u0644\u0641"))));
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_23___default()(this, "exportCsvMapping", features => {
      let records = [];
      let featuresClone = JSON.parse(JSON.stringify(features));
      featuresClone.forEach(f => {
        Object.keys(f.attributes).forEach(attribute => {
          if (f.attributes[attribute + "_Code"] != null) {
            f.attributes[attribute] = f.attributes[attribute + "_Code"];
            delete f.attributes[attribute + "_Code"];
          }
        });
      });
      featuresClone.forEach(f => {
        var _f$geometry, _f$geometry3;
        if ((_f$geometry = f.geometry) !== null && _f$geometry !== void 0 && _f$geometry.rings) {
          var _f$geometry2, _f$geometry2$rings$;
          (_f$geometry2 = f.geometry) === null || _f$geometry2 === void 0 ? void 0 : (_f$geometry2$rings$ = _f$geometry2.rings[0]) === null || _f$geometry2$rings$ === void 0 ? void 0 : _f$geometry2$rings$.forEach(point => {
            records.push({
              attributes: {
                ...f.attributes,
                x: point[0],
                y: point[1]
              }
            });
          });
        } else if ((_f$geometry3 = f.geometry) !== null && _f$geometry3 !== void 0 && _f$geometry3.paths) {
          var _f$geometry4, _f$geometry4$paths$;
          (_f$geometry4 = f.geometry) === null || _f$geometry4 === void 0 ? void 0 : (_f$geometry4$paths$ = _f$geometry4.paths[0]) === null || _f$geometry4$paths$ === void 0 ? void 0 : _f$geometry4$paths$.forEach(point => {
            records.push({
              attributes: {
                ...f.attributes,
                x: point[0],
                y: point[1]
              }
            });
          });
        } else {
          records.push({
            attributes: {
              ...f.attributes,
              x: f.geometry.x,
              y: f.geometry.y
            }
          });
        }
      });
      return records;
    });
    this.props = props;
    this.isLoaded = true;
    this.editLayerName;
    this.state = {
      features: null,
      editFields: [],
      editFeature: {},
      current: 1,
      allFeatures: (props === null || props === void 0 ? void 0 : (_props$mainObject = props.mainObject) === null || _props$mainObject === void 0 ? void 0 : (_props$mainObject$edi = _props$mainObject.editUpdateCreate) === null || _props$mainObject$edi === void 0 ? void 0 : _props$mainObject$edi.editableFeatures) || {},
      originalFeatures: (props === null || props === void 0 ? void 0 : (_props$mainObject2 = props.mainObject) === null || _props$mainObject2 === void 0 ? void 0 : (_props$mainObject2$ed = _props$mainObject2.editUpdateCreate) === null || _props$mainObject2$ed === void 0 ? void 0 : _props$mainObject2$ed.originalFeatures) || {},
      totalPage: 0,
      minIndex: 0,
      maxIndex: pageSize,
      selectedFeatures: [],
      isEditMultiple: false,
      mapLoaded: false
    };
    this.props.setEditableFeatures({
      ...this.state.allFeatures
    });
    this.props.setOriginalFeatures({
      ...this.state.originalFeatures
    });
  }
  formatNumber(num) {
    return (+num).toFixed(2).replace(/[.,]00$/, "");
  }
  zoomToFeature(feature) {
    Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["highlightFeature"])(feature, this.map, {
      layerName: "ZoomGraphicLayer",
      isZoom: true,
      isHighlighPolygonBorder: true,
      zoomFactor: 20
    });
  }
  removeFeature(feature, index) {
    this.state.allFeatures[feature.layerName].features.splice(index, 1);
    this.state.originalFeatures[feature.layerName].features.splice(index, 1);
    this.props.setEditableFeatures({
      ...this.state.allFeatures
    });
    this.props.setOriginalFeatures({
      ...this.state.originalFeatures
    });
    this.setState({
      allFeatures: {
        ...this.state.allFeatures
      },
      originalFeatures: {
        ...this.state.originalFeatures
      }
    });
  }
  deleteFeature(feature, index) {
    this.state.allFeatures[feature.layerName].features[index].isDelete = !this.state.allFeatures[feature.layerName].features[index].isDelete;
    this.props.setEditableFeatures({
      ...this.state.allFeatures
    });
    this.setState({
      allFeatures: {
        ...this.state.allFeatures
      }
    });
  }
  drawEditableFeatures(features) {
    //let layerInfo = addFeaturesMapLayers.find((l) => l.value == this.props.UploadFileDetails.layerName);
    //let annotationField = layerInfo.outFields.find((x) => x.isMainAnnotaion);
    Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["clearGraphicFromLayer"])(this.map, "ParcelPlanNoGraphicLayer");
    Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["clearGraphicFromLayer"])(this.map, "ZoomGraphicLayer");
    features.forEach(f => {
      let pt;
      if (f.geometry.type == "point") {
        pt = f.geometry;
      } else {
        pt = f.geometry.getExtent().getCenter();
      }
      /*addParcelNo(
                pt, this.map, convertToArabic(f.attributes[annotationField.name]),
                "ParcelPlanNoGraphicLayer", 40, [0, 0, 0]
            );*/

      var symbol;
      if (f.geometry.type === "point") {
        symbol = new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE, 28, new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID, new esri.Color([0, 0, 0]), 2), new esri.Color([0, 0, 0, 0.2]));
      } else if (f.geometry.type === "polyline") {
        symbol = new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID, new esri.Color([0, 0, 0]), 7);
      } else {
        symbol = new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_NULL, new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID, new esri.Color([0, 0, 0]), 3), new esri.Color([0, 0, 0]));
      }
      var graphic = new esri.Graphic(f.geometry, symbol, null);
      this.map.getLayer("ZoomGraphicLayer").add(graphic);
    });
    Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["zoomToFeature"])(this.map.getLayer("ZoomGraphicLayer").graphics, this.map, 2);
  }
  reProjectAndMapSpatailRelation(features) {
    _reducers__WEBPACK_IMPORTED_MODULE_34__["default"].dispatch({
      type: "Show_Loading_new",
      loading: true
    });
    Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["project"])([...features.map(x => x.geometry)], this.map.spatialReference.wkid, res => {
      features.forEach((f, index) => {
        f.geometry = res[index];
      });
      this.getSpatialRelationsWithLayers(features, this.layerInfo.spatialRelationLayers).then(spatialFeatures => {
        Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["getFeatureDomainName"])(spatialFeatures, this.LayerID[this.props.UploadFileDetails.layerName], null, _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["addedParcelMapServiceUrl"]).then(r => {
          _reducers__WEBPACK_IMPORTED_MODULE_34__["default"].dispatch({
            type: "Show_Loading_new",
            loading: false
          });
          this.drawEditableFeatures([...r]);
          this.props.setEditableFeatures([...r]);
          this.setState({
            features: [...r],
            totalPage: r.length / pageSize,
            minIndex: 0,
            maxIndex: pageSize
          });
        });
      });
    }, true);
  }
  componentDidUpdate() {}
  editGraphicFeature(feature, index, type, layer) {
    if (this.editToolbar) this.editToolbar.deactivate();else {
      this.editToolbar = new window.Edit(this.map);
      this.editToolbar.on("deactivate", evt => {
        if (evt.info.isModified) {
          let editGraphic = {
            ...evt.graphic
          };
          let editFeature = this.state.allFeatures[this.editLayerName].features.find(x => x.attributes["OBJECTID"] == editGraphic.attributes["OBJECTID"]);
          let layerId = Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["getLayerId"])(this.map.__mapInfo, editGraphic.layerName);
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["queryTask"])({
            url: _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["addedParcelMapServiceUrl"] + "/" + layerId,
            geometry: editGraphic.geometry,
            outFields: ['OBJECTID'],
            spatialRelationship: _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["editAndDeleteMapLayers"][editGraphic.layerName].type == "line" ? "SPATIAL_REL_INTERSECTS" : "SPATIAL_REL_OVERLAPS",
            queryWithGemoerty: true,
            returnGeometry: true,
            callbackResult: ({
              features
            }) => {
              if (!this.checkIntersect(features, editGraphic.attributes["OBJECTID"]) || !this.checkLineFullIntersect(features, editGraphic.attributes["OBJECTID"], editGraphic.geometry, _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["editAndDeleteMapLayers"][editGraphic.layerName].type)) {
                if (_mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["editAndDeleteMapLayers"][editGraphic.layerName].type == "polygon") {
                  let areaField = _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["editAndDeleteMapLayers"][editGraphic.layerName].outFields.find(x => x.isArea);
                  if (areaField) {
                    //

                    if (editGraphic.geometry.spatialReference) delete editGraphic.geometry.spatialReference._geVersion;
                    editFeature.attributes[areaField.name] = window.geometryEngine.planarArea(new esri.geometry.Polygon(JSON.parse(JSON.stringify(editGraphic.geometry))));
                    window.notifySystem("info", "تم تغيير المساحة");
                  }
                  Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["drawLength"])(this.map, [{
                    geometry: new esri.geometry.Polygon(JSON.parse(JSON.stringify(editGraphic.geometry)))
                  }]);
                } else if (_mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["editAndDeleteMapLayers"][editGraphic.layerName].type == "line") {
                  Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["drawLength_Lines"])(this.map, [{
                    geometry: new esri.geometry.Polyline(JSON.parse(JSON.stringify(editGraphic.geometry)))
                  }]);
                }
                editFeature.geometry = editGraphic.geometry;
                editFeature.isUploaded = true;
                this.props.setEditableFeatures({
                  ...this.state.allFeatures
                });
                this.setState({
                  allFeatures: {
                    ...this.state.allFeatures
                  }
                });
                Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["highlightFeature"])(editFeature, this.map, {
                  layerName: "ZoomGraphicLayer",
                  isZoom: true,
                  isHighlighPolygonBorder: true,
                  zoomFactor: 20
                });
                this.map.graphics.clear();
              } else {
                window.notifySystem("error", "لا يمكن رسم قطعتين متقاطعتين");
                Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["highlightFeature"])(editFeature, this.map, {
                  layerName: "ZoomGraphicLayer",
                  isZoom: true,
                  isHighlighPolygonBorder: true,
                  zoomFactor: 20
                });
                this.map.graphics.clear();
              }
            }
          });
        }
      });
      //Use the edit toolbar to edit vertices
    }
    this.editLayerName = layer;
    var polygonSymbol = new esri.symbol.SimpleFillSymbol();
    var polylineSymbol = new esri.symbol.SimpleLineSymbol();
    var symbol = feature.geometry.rings ? polygonSymbol : polylineSymbol;
    let tempGeometry = null;
    if (feature.geometry.type == "polygon") {
      tempGeometry = new esri.geometry.Polygon(JSON.parse(JSON.stringify(feature.geometry)));
    } else if (feature.geometry.type == "point") {
      tempGeometry = new esri.geometry.Point(JSON.parse(JSON.stringify(feature.geometry)));
      symbol = new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE, 28, new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID, new esri.Color([0, 0, 0]), 2), new esri.Color([0, 0, 0, 0.2]));
    } else {
      tempGeometry = new esri.geometry.Polyline(JSON.parse(JSON.stringify(feature.geometry)));
    }
    var graphic = new esri.Graphic(tempGeometry, symbol, feature.attributes);
    graphic.layerName = layer;
    this.map.graphics.clear();
    this.map.graphics.add(graphic);
    if (type == "MOVE") {
      this.editToolbar.activate(window.Edit.MOVE, graphic);
    } else if (type == "EDIT_VERTICES") {
      if (graphic.type == "point") {
        this.editToolbar.activate(window.Edit.MOVE, graphic);
      } else {
        this.editToolbar.activate(window.Edit.EDIT_VERTICES | window.Edit.SCALE, graphic);
        if (feature.geometry.type == "polygon") {
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["drawLength"])(this.map, [{
            geometry: new esri.geometry.Polygon(JSON.parse(JSON.stringify(graphic.geometry)))
          }]);
        } else if (feature.geometry.type == "polyline") {
          Object(_common_common_func__WEBPACK_IMPORTED_MODULE_31__["drawLength_Lines"])(this.map, [{
            geometry: new esri.geometry.Polyline(JSON.parse(JSON.stringify(graphic.geometry)))
          }]);
        }
      }
    } else if (type == "ROTATE") this.editToolbar.activate(window.Edit.ROTATE, graphic);
  }
  editFeature(feature, index) {
    var _this$map$__mapInfo$i2;
    let editFeatureObj = {
      index: index
    };
    editFeatureObj.attributes = {
      ...feature.attributes
    };
    editFeatureObj.layerName = feature.layerName;
    let layerInfo = _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["editAndDeleteMapLayers"][feature.layerName];
    let layerFields = (_this$map$__mapInfo$i2 = this.map.__mapInfo.info.$layers.layers.find(x => x.name == feature.layerName)) === null || _this$map$__mapInfo$i2 === void 0 ? void 0 : _this$map$__mapInfo$i2.fields;
    let editFieldsObj = [];
    let mandatoryFields = layerInfo.outFields.filter(x => x.isMandatory).map(f => f.name);
    layerInfo.outFields.forEach(outField => {
      editFieldsObj.push(layerFields.find(x => x.name == outField.name));
    });
    editFieldsObj.forEach(item => {
      if (item && mandatoryFields.indexOf(item.name) > -1) {
        item.isMandatory = true;
      }
      if (item && item.domain && item.type == "esriFieldTypeInteger") {
        editFeatureObj.attributes[item.name + "_Code"] = +editFeatureObj.attributes[item.name + "_Code"];
      }
    });
    this.setState({
      showModal: true,
      editFields: [...editFieldsObj],
      editFeature: {
        ...editFeatureObj
      },
      isEditMultiple: false
    });
  }
  render() {
    const {
      fullMapWidth,
      selectedFeaturesOnMap,
      mainObject: {
        selectEditingWorkFlow: {
          selectWorkFlow: {
            workflowType
          }
        }
      }
    } = this.props;
    const {
      editFields,
      editFeature,
      mapLoaded,
      allFeatures
    } = this.state;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", {
      className: !fullMapWidth ? "filter-section implementation" : ""
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", null, mapLoaded && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", {
      style: {
        boxShadow: "1px 1px 3px black",
        paddingLeft: "15px",
        height: "487px",
        overflowY: "auto",
        overflowX: "hidden"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(_FilterComponent__WEBPACK_IMPORTED_MODULE_41__["default"], {
      map: this.map,
      setSelectMapLayer: this.setSelectMapLayer,
      addFeature: this.addFeature
    }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(react_sticky__WEBPACK_IMPORTED_MODULE_39__["StickyContainer"], {
      style: {
        direction: "ltr"
      }
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(react_sticky__WEBPACK_IMPORTED_MODULE_39__["Sticky"], {
      bottomOffset: 80
    }, ({
      style
    }) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(_MapBtnsComponent__WEBPACK_IMPORTED_MODULE_40__["default"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_16___default()({
      style: style
    }, this.props)))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(_MapComponent_MapComponent__WEBPACK_IMPORTED_MODULE_38__["default"], _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_16___default()({
      mapload: this.mapLoaded.bind(this)
    }, this.props))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", {
      style: {
        textAlign: "end",
        marginTop: "10px"
      }
    }, selectedFeaturesOnMap && selectedFeaturesOnMap.length ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_15___default.a, {
      onClick: this.addSelectedFeaturesFromMap.bind(this),
      className: "add_mktab toolsBtnStyle",
      type: "primary",
      icon: "plus"
    }, " ", "\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0627\u0642\u0639", " ") : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", null)), Object.keys(allFeatures).map(layer => {
      var _allFeatures$layer$fe, _allFeatures$layer$se, _allFeatures$layer$se2, _allFeatures$layer$se3, _editAndDeleteMapLaye, _editAndDeleteMapLaye2, _editAndDeleteMapLaye3;
      return (_allFeatures$layer$fe = allFeatures[layer].features) !== null && _allFeatures$layer$fe !== void 0 && _allFeatures$layer$fe.length ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", {
        style: {
          background: "#57779d",
          textAlign: "center",
          padding: "5px"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("label", {
        style: {
          color: "white",
          float: allFeatures[layer].isSelectAll || ((_allFeatures$layer$se = allFeatures[layer].selectedFeatures) === null || _allFeatures$layer$se === void 0 ? void 0 : _allFeatures$layer$se.length) > 1 ? "right" : "none",
          marginRight: "20px",
          fontSize: "23px !important"
        }
      }, _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["editAndDeleteMapLayers"][layer].name), (allFeatures[layer].isSelectAll || ((_allFeatures$layer$se2 = allFeatures[layer].selectedFeatures) === null || _allFeatures$layer$se2 === void 0 ? void 0 : _allFeatures$layer$se2.length) > 1) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", {
        style: {
          textAlign: "left"
        }
      }, workflowType == "update_geo" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_dropdown__WEBPACK_IMPORTED_MODULE_11___default.a, {
        overlay: this.exportMenu(layer)
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("a", {
        className: "ant-dropdown-link",
        style: {
          marginLeft: "20px"
        },
        onClick: e => e.preventDefault()
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_33__["FontAwesomeIcon"], {
        icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_35__["faCloudDownloadAlt"],
        style: {
          marginLeft: "5px"
        }
      }), "\u062A\u0646\u0632\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_icon__WEBPACK_IMPORTED_MODULE_13___default.a, {
        type: "down"
      }))), workflowType == "update_geo" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_dropdown__WEBPACK_IMPORTED_MODULE_11___default.a, {
        overlay: this.uploadMenu(layer)
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("a", {
        className: "ant-dropdown-link",
        style: {
          marginLeft: "20px"
        },
        onClick: e => e.preventDefault()
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_33__["FontAwesomeIcon"], {
        icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_35__["faCloudUploadAlt"],
        style: {
          marginLeft: "5px"
        }
      }), "\u0631\u0641\u0639 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_icon__WEBPACK_IMPORTED_MODULE_13___default.a, {
        type: "down"
      }))), workflowType == "edit" || workflowType == "update_geo" ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_15___default.a, {
        className: "toolsBtnStyle",
        size: "large",
        onClick: this.editSelectedFeatures.bind(this, layer),
        style: {
          marginLeft: "10px"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_33__["FontAwesomeIcon"], {
        icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_35__["faEdit"]
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("span", {
        style: {
          marginRight: "5px"
        }
      }, "\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u062D\u062F\u062F")) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_15___default.a, {
        className: "toolsBtnStyle",
        size: "large",
        onClick: this.deleteSelectedFeatures.bind(this, layer),
        style: {
          marginLeft: "10px"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_33__["FontAwesomeIcon"], {
        icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_35__["faEdit"]
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("span", {
        style: {
          marginRight: "5px"
        }
      }, "\u062D\u0630\u0641 \u0627\u0644\u0645\u062D\u062F\u062F")), (allFeatures[layer].isSelectAll || ((_allFeatures$layer$se3 = allFeatures[layer].selectedFeatures) === null || _allFeatures$layer$se3 === void 0 ? void 0 : _allFeatures$layer$se3.length) > 1 /*&& selectedFeatures?.length != features?.length*/) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_15___default.a, {
        className: "toolsBtnStyle",
        size: "large",
        onClick: this.removeSelectedFeatures.bind(this, layer),
        style: {
          marginLeft: "10px"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_33__["FontAwesomeIcon"], {
        icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_35__["faTimes"]
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("span", {
        style: {
          marginRight: "5px"
        }
      }, "\u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0645\u062D\u062F\u062F")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_15___default.a, {
        className: "toolsBtnStyle",
        size: "large",
        onClick: this.zoomToSelectedFeature.bind(this, layer)
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_33__["FontAwesomeIcon"], {
        icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_35__["faSearchPlus"],
        className: ""
      })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("table", {
        className: "table table-bordered centeredTable",
        style: {
          width: "100%"
        }
      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("thead", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("tr", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("th", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_checkbox__WEBPACK_IMPORTED_MODULE_9___default.a, {
        style: {
          marginTop: "20px"
        },
        checked: allFeatures[layer].isSelectAll,
        onChange: this.onChangeSelectAll.bind(this, layer)
      }))), (_editAndDeleteMapLaye = _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["editAndDeleteMapLayers"][layer]) === null || _editAndDeleteMapLaye === void 0 ? void 0 : (_editAndDeleteMapLaye2 = _editAndDeleteMapLaye.outFields) === null || _editAndDeleteMapLaye2 === void 0 ? void 0 : (_editAndDeleteMapLaye3 = _editAndDeleteMapLaye2.filter(x => !x.notInclude)) === null || _editAndDeleteMapLaye3 === void 0 ? void 0 : _editAndDeleteMapLaye3.map(field => {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("th", null, field.arName);
      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("th", null, "\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("tbody", null, allFeatures[layer].features.map((feature, index) => {
        var _editAndDeleteMapLaye4, _editAndDeleteMapLaye5, _editAndDeleteMapLaye6, _allFeatures$layer$se4, _allFeatures$layer$se5, _allFeatures$layer$se6, _allFeatures$layer$se7, _allFeatures$layer$se8;
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("tr", {
          style: {
            background: feature.isDelete ? "#ff000045" : feature.isUploaded ? "#fff6588f" : ""
          }
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("td", {
          style: {
            textAlign: "center"
          }
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_checkbox__WEBPACK_IMPORTED_MODULE_9___default.a, {
          style: {
            marginTop: "20px"
          },
          checked: feature.isSelected,
          onChange: this.onChangeSelectFeature.bind(this, index, feature)
        })), (_editAndDeleteMapLaye4 = _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["editAndDeleteMapLayers"][layer]) === null || _editAndDeleteMapLaye4 === void 0 ? void 0 : (_editAndDeleteMapLaye5 = _editAndDeleteMapLaye4.outFields) === null || _editAndDeleteMapLaye5 === void 0 ? void 0 : (_editAndDeleteMapLaye6 = _editAndDeleteMapLaye5.filter(x => !x.notInclude)) === null || _editAndDeleteMapLaye6 === void 0 ? void 0 : _editAndDeleteMapLaye6.map(field => {
          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("td", null, isNaN(feature.attributes[field.name]) || !feature.attributes[field.name] ? feature.attributes[field.name] || "غير متوفر" : this.formatNumber(feature.attributes[field.name]));
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("td", null, (workflowType == "edit" || workflowType == "update_geo") && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_7___default.a, {
          title: "\u062A\u0639\u062F\u064A\u0644"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_15___default.a, {
          className: "toolsBtnStyle",
          style: {
            margin: "auto 3px"
          },
          disabled: allFeatures[layer].isSelectAll || ((_allFeatures$layer$se4 = allFeatures[layer].selectedFeatures) === null || _allFeatures$layer$se4 === void 0 ? void 0 : _allFeatures$layer$se4.length) > 1,
          size: "large",
          onClick: this.editFeature.bind(this, feature, index)
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_33__["FontAwesomeIcon"], {
          icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_35__["faEdit"],
          className: ""
        }))), workflowType == "update_geo" && _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["editAndDeleteMapLayers"][layer].type != 'point' && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_7___default.a, {
          title: "\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0623\u0628\u0639\u0627\u062F"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_15___default.a, {
          className: "toolsBtnStyle",
          style: {
            margin: "auto 3px"
          },
          disabled: allFeatures[layer].isSelectAll || ((_allFeatures$layer$se5 = allFeatures[layer].selectedFeatures) === null || _allFeatures$layer$se5 === void 0 ? void 0 : _allFeatures$layer$se5.length) > 1,
          size: "large",
          onClick: this.editGraphicFeature.bind(this, feature, index, "EDIT_VERTICES", layer)
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("svg", {
          width: "24",
          height: "24",
          viewBox: "0 0 24 24",
          fill: "none",
          xmlns: "http://www.w3.org/2000/svg"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("rect", {
          width: "24",
          height: "24",
          fill: "white"
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("path", {
          d: "M20.2891 14.0082V20.2889H3.71133V4.16516L20.2891 14.0082Z",
          stroke: "#196F6C",
          "stroke-width": "1.2"
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("line", {
          x1: "20.4443",
          y1: "14.8336",
          x2: "20.4443",
          y2: "5.49971",
          stroke: "#196F6C",
          "stroke-linecap": "square",
          "stroke-dasharray": "2 2"
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("path", {
          d: "M3.61133 3.72223L18.5 3.72223",
          stroke: "#196F6C",
          "stroke-linecap": "square",
          "stroke-dasharray": "2 2"
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("rect", {
          x: "2",
          y: "2",
          width: "3.33333",
          height: "3.33333",
          fill: "#196F6C"
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("rect", {
          x: "2",
          y: "18.6667",
          width: "3.33333",
          height: "3.33333",
          fill: "#196F6C"
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("rect", {
          x: "18.6665",
          y: "18.6667",
          width: "3.33333",
          height: "3.33333",
          fill: "#196F6C"
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("rect", {
          x: "18.6665",
          y: "12",
          width: "3.33333",
          height: "3.33333",
          fill: "#A61C35"
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("rect", {
          x: "18.9165",
          y: "2.25",
          width: "2.83333",
          height: "2.83333",
          stroke: "#196F6C",
          "stroke-width": "0.5"
        })))), workflowType == "update_geo" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_7___default.a, {
          title: "\u062A\u062D\u0631\u064A\u0643"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_15___default.a, {
          className: "toolsBtnStyle",
          style: {
            margin: "auto 3px"
          },
          disabled: allFeatures[layer].isSelectAll || ((_allFeatures$layer$se6 = allFeatures[layer].selectedFeatures) === null || _allFeatures$layer$se6 === void 0 ? void 0 : _allFeatures$layer$se6.length) > 1,
          size: "large",
          onClick: this.editGraphicFeature.bind(this, feature, index, "MOVE", layer)
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("svg", {
          width: "24",
          height: "24",
          viewBox: "0 0 24 24",
          fill: "none",
          xmlns: "http://www.w3.org/2000/svg"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("rect", {
          width: "24",
          height: "24",
          fill: "white"
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("line", {
          x1: "4.04983",
          y1: "19.153",
          x2: "20.2047",
          y2: "4.79307",
          stroke: "#196F6C",
          "stroke-width": "1.2",
          "stroke-linecap": "square"
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("path", {
          d: "M4 4.00006L20.1323 20.1324",
          stroke: "#196F6C",
          "stroke-linecap": "square",
          "stroke-dasharray": "2 2"
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("rect", {
          x: "9.65186",
          y: "10.0161",
          width: "3.80243",
          height: "3.80243",
          fill: "#A61C35"
        })))), workflowType == "update_geo" && _mapviewer_config__WEBPACK_IMPORTED_MODULE_32__["editAndDeleteMapLayers"][layer].type != "point" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_7___default.a, {
          title: "\u062A\u062F\u0648\u064A\u0631"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_15___default.a, {
          className: "toolsBtnStyle",
          style: {
            margin: "auto 3px"
          },
          disabled: allFeatures[layer].isSelectAll || ((_allFeatures$layer$se7 = allFeatures[layer].selectedFeatures) === null || _allFeatures$layer$se7 === void 0 ? void 0 : _allFeatures$layer$se7.length) > 1,
          size: "large",
          onClick: this.editGraphicFeature.bind(this, feature, index, "ROTATE", layer)
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("svg", {
          width: "24",
          height: "24",
          viewBox: "0 0 24 24",
          fill: "none",
          xmlns: "http://www.w3.org/2000/svg"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("g", {
          "clip-path": "url(#clip0_16_25)"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("rect", {
          width: "24",
          height: "24",
          transform: "matrix(1.19249e-08 -1 -1 -1.19249e-08 24 24)",
          fill: "white"
        }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("path", {
          d: "M10.2502 10.4689C11.2028 9.91891 12.4323 10.2483 12.9823 11.201C13.5323 12.1536 13.2028 13.383 12.2502 13.933C11.2976 14.483 10.0682 14.1536 9.51815 13.201C8.96815 12.2483 9.29758 11.0189 10.2502 10.4689ZM19.0444 7.70096C21.5294 12.0051 20.0544 17.5102 15.7502 19.9952L17.2502 22.5933L11.7861 21.1292L13.2502 15.6651L14.7502 18.2631C18.1017 16.3281 19.2474 12.0525 17.3124 8.70096C15.3774 5.34944 11.1017 4.20378 7.7502 6.13878C4.39869 8.07378 3.25303 12.3494 5.18803 15.701C5.94303 17.0087 7.06738 17.9761 8.34386 18.567L7.80678 20.5168C6.04219 19.7804 4.48598 18.485 3.45598 16.701C0.970976 12.3968 2.44606 6.89173 6.7502 4.40673C11.0543 1.92173 16.5594 3.39681 19.0444 7.70096Z",
          fill: "#196F6C"
        })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("defs", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("clipPath", {
          id: "clip0_16_25"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("rect", {
          width: "24",
          height: "24",
          fill: "white",
          transform: "matrix(1.19249e-08 -1 -1 -1.19249e-08 24 24)"
        })))))), workflowType == "delete" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_7___default.a, {
          title: "\u062D\u0630\u0641"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_15___default.a, {
          className: "toolsBtnStyle",
          style: {
            margin: "auto 3px"
          },
          disabled: allFeatures[layer].isSelectAll || ((_allFeatures$layer$se8 = allFeatures[layer].selectedFeatures) === null || _allFeatures$layer$se8 === void 0 ? void 0 : _allFeatures$layer$se8.length) > 1,
          size: "large",
          onClick: this.deleteFeature.bind(this, feature, index)
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_33__["FontAwesomeIcon"], {
          icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_35__["faTrash"],
          className: ""
        }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_7___default.a, {
          title: "\u062A\u0642\u0631\u064A\u0628"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_15___default.a, {
          className: "toolsBtnStyle",
          style: {
            margin: "auto 3px"
          },
          size: "large",
          onClick: this.zoomToFeature.bind(this, feature)
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_33__["FontAwesomeIcon"], {
          icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_35__["faSearchPlus"],
          className: ""
        }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_7___default.a, {
          title: "\u0625\u0632\u0627\u0644\u0629"
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_button__WEBPACK_IMPORTED_MODULE_15___default.a, {
          className: "toolsBtnStyle",
          style: {
            margin: "auto 3px"
          },
          size: "large",
          onClick: this.removeFeature.bind(this, feature, index)
        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_33__["FontAwesomeIcon"], {
          icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_35__["faTimes"],
          className: ""
        })))));
      })))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_24___default.a.Fragment, null);
    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_modal__WEBPACK_IMPORTED_MODULE_1___default.a, {
      width: 800,
      title: "\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A",
      onOk: this.handleOk,
      visible: this.state.showModal,
      onCancel: this.removeDialog,
      okText: "\u0646\u0639\u0645",
      cancelText: "\u0625\u0644\u063A\u0627\u0621"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("table", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("tbody", null, editFields.length > 0 && editFields.filter(x => x).map(field => {
      var _field$domain, _field$domain$codedVa;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("tr", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("td", null, field.alias, field.isMandatory && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("label", {
        style: {
          marginRight: "10px",
          color: "red"
        }
      }, "*")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("td", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement("div", null, (_field$domain = field.domain) !== null && _field$domain !== void 0 && (_field$domain$codedVa = _field$domain.codedValues) !== null && _field$domain$codedVa !== void 0 && _field$domain$codedVa.length ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a, {
        disabled: this.isdisabledField(field, editFeature),
        style: {
          width: "80%"
        },
        virtual: false,
        onChange: this.selectHandleChange.bind(this, field),
        className: "dont-show",
        value: editFeature.attributes[field.name + "_Code"] || editFeature.attributes[field.name],
        placeholder: "من فضلك أدخل " + field.alias,
        getPopupContainer: trigger => trigger.parentNode
      }, field.domain.codedValues.map((domain, index) => {
        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default.a.Option, {
          value: domain.code,
          id: domain.code
        }, domain.name);
      })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_24___default.a.createElement(antd_lib_input__WEBPACK_IMPORTED_MODULE_3___default.a, {
        disabled: this.isdisabledField(field, editFeature),
        name: field.name,
        type: field.type == "esriFieldTypeString" ? "text" : "number",
        onChange: this.handleUserInput,
        value: editFeature.attributes[field.name],
        placeholder: "من فضلك أدخل " + field.alias
      }))));
    }))))));
  }
}
/* harmony default export */ __webpack_exports__["default"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_28__["connect"])(_maping__WEBPACK_IMPORTED_MODULE_27__["mapStateToProps"], _maping__WEBPACK_IMPORTED_MODULE_27__["mapDispatchToProps"])(Object(react_i18next__WEBPACK_IMPORTED_MODULE_29__["translate"])("labels")(editUpdateFilterComponent)));

/***/ }),

/***/ "./src/app/components/inputs/fields/identify/Component/editUpdateFilterComponent/maping.js":
/*!*************************************************************************************************!*\
  !*** ./src/app/components/inputs/fields/identify/Component/editUpdateFilterComponent/maping.js ***!
  \*************************************************************************************************/
/*! exports provided: mapStateToProps, mapDispatchToProps */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapStateToProps", function() { return mapStateToProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapDispatchToProps", function() { return mapDispatchToProps; });
/* harmony import */ var _main_helpers_functions_filters_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../../../main_helpers/functions/filters/state */ "./src/main_helpers/functions/filters/state.js");
let mainMap = undefined;

const mapStateToProps = state => {
  return {
    mainObject: state.wizard.mainObject,
    UploadFileDetails: state.mainApp.uploadFileDetails,
    editableFeatures: state.mainApp.editableFeatures,
    originalFeatures: state.mainApp.originalFeatures,
    selectMapLayer: state.mainApp.selectMapLayer,
    selectedFeaturesOnMap: state.mainApp.selectedFeaturesOnMap
  };
};
const mapDispatchToProps = dispatch => {
  return {
    setLoading: data => {
      dispatch({
        type: 'setMainApp',
        path: 'loading',
        data
      });
    },
    setCurrentMap: data => {
      mainMap = data;
      Object(_main_helpers_functions_filters_state__WEBPACK_IMPORTED_MODULE_0__["setMap"])(data);
    },
    setMap: e => dispatch({
      type: 'setMap',
      value: e
    }),
    setEditableFeatures: e => {
      dispatch({
        type: 'setMainApp',
        path: 'editableFeatures',
        data: e
      });
    },
    setSelectMapLayer: e => {
      dispatch({
        type: 'setMainApp',
        path: 'selectMapLayer',
        data: e
      });
    },
    setOriginalFeatures: e => {
      dispatch({
        type: 'setMainApp',
        path: 'originalFeatures',
        data: e
      });
    },
    setSelectedFeaturesOnMap: e => {
      dispatch({
        type: 'setMainApp',
        path: 'selectedFeaturesOnMap',
        data: e
      });
    }
  };
};

/***/ })

}]);
//# sourceMappingURL=46.min.js.map